import{M as ne,J as he,ag as Qe,ah as je,q as F,ai as ze,P as J,aj as Oe,X,a2 as fe,U as Pe,a0 as Ve,a5 as K,ak as Le,al as ye,am as We,a8 as Ze,an as $,ad as Fe,ao as pe,ap as H,a9 as we,aq as $e,ar as Ke,as as Ie,at as Je,u as me,t as He,a1 as Ye,au as Xe,av as Ge,aw as et,ax as be,s as re,ay as tt,a6 as Se,az as _e,m as qe,aA as Te,o as ee,aB as ce,w as P,j as V,v as Me,aC as oe,G as se,z as D,I as De,i as ve,A as ie,x as ge,y as ae,aD as Ae,Q as nt,aE as ke,ac as at,aF as le,aG as te,aH as ot,aI as st,K as it,aJ as lt,aK as rt,aL as ut,aM as xe,aN as ct,aO as Ce,aP as dt,aQ as ft,aR as mt,aS as vt,aT as gt,aU as kt,aV as Ee,aW as Re,aX as ht,aY as de,aZ as yt,B as pt,a_ as wt,a$ as bt}from"./index-779b76fa.js";function Gt(e){const n=e.keyCode?e.keyCode:e.which;(n<48||n>57)&&n!==46&&e.preventDefault(),n===46&&String(e.target.value).includes(".")&&e.preventDefault()}const St=ne("div",{class:"q-space"}),_t=he({name:"QSpace",setup(){return()=>St}}),Tt=he({name:"QCardActions",props:{...Qe,vertical:Boolean},setup(e,{slots:n}){const r=je(e),f=F(()=>`q-card__actions ${r.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>ne("div",{class:f.value},ze(n.default))}}),Mt=new J("EjCM3aozA6sFUzQQ7vXg2uTtjRydyuHSWRwvQX16pAS9");var At=(e=>(e.TOKEN_A="TOKEN_A",e.TOKEN_B="TOKEN_B",e))(At||{});const en=Oe("swap",()=>{const e=X(),n=fe({loading:!1,slippageDialog:!1,status:void 0,poolBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},userBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},poolTokenSupply:0,rate:0}),r=Pe(),f=Ve();K(f,async m=>{m?l().then():c()},{immediate:!0}),K(e,async m=>{m&&await B()});async function l(){n.loading=!0;try{e.value=await Le.loadTokenSwap(r.connection,Mt),await u()}catch(m){console.log(m),e.value=void 0}finally{n.loading=!1}console.log("Token SWAP: ",e.value)}async function u(){if(!e.value)return;const m=await ye(r.connection,e.value.authority);for(const A of m){const T=_(A.mint);T&&(n.poolBalance[T]=A.amount)}const N=await We(r.connection,e.value.poolToken);n.poolTokenSupply=Number(N.supply),n.rate=E()}async function B(){if(!e.value)return;const m=f.value?.publicKey;if(!m){console.log("Wallet is not connected...");return}const N=await ye(r.connection,m,[e.value.poolToken,e.value.mintA,e.value.mintB]),A={TOKEN_A:0,TOKEN_B:0};for(const T of N){const I=_(T.mint);I&&(A[I]=+T.amount)}n.userBalance=A,console.log("[Pool Balance]",n.poolBalance),console.log("[User Balance]",n.userBalance)}function E(){return Ze(k(Fe))}function _(m){if(e.value)switch(String(m)){case String(e.value.mintA):return"TOKEN_A";case String(e.value.mintB):return"TOKEN_B"}}function k(m){const N=new $(n.poolBalance.TOKEN_A),A=new $(m).div(N),T=new $(1),M=T.add(A).sqrt().sub(T);return new $(n.poolTokenSupply).mul(M).toNumber()}function y(m,N){const A=new $(n.poolBalance[N]??0),T=new $(m).div(A),I=new $(1),M=I.sub(T);if(M.isNeg())return 0;const Q=I.sub(M.sqrt());return new $(n.poolTokenSupply).mul(Q).toNumber()}async function p(m,N){const A=e.value?.mintA,T=e.value?.mintB;if(!A||!T)return;const I=A.toBase58()===m,M=await pe(r.connection,A.toBase58()),Q=await pe(r.connection,T.toBase58()),L=10**(I?Q:M),z=10**(I?M:Q),d=N*z;return(I?n.userBalance.TOKEN_B/n.userBalance.TOKEN_A*d:n.userBalance.TOKEN_A/n.userBalance.TOKEN_B*d)/L}function c(){n.loading=!1,n.slippageDialog=!1,n.status=void 0,n.poolBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},n.userBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},n.poolTokenSupply=0,n.rate=0}return{state:n,tokenSwap:e,loadUserTokenAccounts:B,depositSingleTokenType:k,withdrawSingleTokenTypeExactOut:y,calculateDependentAmount:p}});var xt=Object.defineProperty,Ct=(e,n,r)=>n in e?xt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,Et=(e,n,r)=>(Ct(e,typeof n!="symbol"?n+"":n,r),r);const Rt=new H.BeetArgsStruct([["instructionDiscriminator",H.uniformFixedSizeArray(H.u8,8)],["amount",H.u64]],"SplTransferInstructionArgs"),Bt=[67,186,237,99,235,243,166,198];function Nt(e,n,r=new J("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[f]=Rt.serialize({instructionDiscriminator:Bt,...n}),l=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.tokenMint,isWritable:!1,isSigner:!1},{pubkey:e.source,isWritable:!0,isSigner:!1},{pubkey:e.destination,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??$e,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ke.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const u of e.anchorRemainingAccounts)l.push(u);return new Ie({programId:r,keys:l,data:f})}const Ot=new H.BeetArgsStruct([["instructionDiscriminator",H.uniformFixedSizeArray(H.u8,8)],["amount",H.u64]],"TransferInstructionArgs"),Pt=[163,52,200,231,140,3,69,186];function Vt(e,n,r=new J("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[f]=Ot.serialize({instructionDiscriminator:Pt,...n}),l=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ke.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const u of e.anchorRemainingAccounts)l.push(u);return new Ie({programId:r,keys:l,data:f})}const Ft="J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c",Kt=new J(Ft);class It{constructor(n){Et(this,"programId",Kt),this.provider=n}get connection(){return this.provider.connection}async transfer(n,r){const f=Vt({proofRequest:n.proofRequest,sender:this.provider.publicKey,receiver:n.receiver},{amount:n.amount}),l=new we().add(f);return this.provider.sendAndConfirm(l,[],r)}async transferToken(n,r){const f=Nt({proofRequest:n.proofRequest,sender:this.provider.publicKey,receiver:n.receiver,source:n.source,destination:n.destination,tokenMint:n.tokenMint},{amount:n.amount}),l=new we().add(f);return this.provider.sendAndConfirm(l,[],r)}}const tn=Oe("transfer",()=>{const e=Pe(),{tokens:n}=Je(),r=me(),{state:f,getUserTokens:l}=me(),u=F(()=>r.certificate),B=F(()=>r.certificateValid),E=0,_=Ve(),{publicKey:k}=He(),{notify:y}=Ye(),p=fe(n[0]),c=fe({address:"",value:void 0,loading:!1,token:p,fee:E,valid:!1});function m(){c.value=void 0,c.fee=E}K(()=>c.token,()=>{m(),r.policySpec=c.token.name}),K(()=>_.value?.publicKey,d=>{d||(m(),c.address="")}),K(()=>c.address,async()=>{c.valid=await Xe(c.address)}),K([()=>c.valid,()=>c.value],async([d,b])=>{d&&Number(b)>0?A():c.fee=E});async function N(){const d=c.token.label,b=f.tokens.find(U=>re(U.symbol)===re(d));return d==="sol"?!0:!b||!b.mint?!1:!!tt(b.mint)}async function A(){const d=await N(),b=await Ge(_.value?.publicKey,c.address,Number(c.value),e.connection),U=await et(b,e.connection);c.fee=d?U:U+.02}const T=F(()=>new It(new be(e.connection,_.value??{publicKey:J.default},be.defaultOptions())));async function I(){try{if(c.loading=!0,console.log("[debug] on transfer certificate === ",u.value),B.value){console.log(c.token);let d;c.token.label==="sol"?d=await M():d=await Q(),y({type:"positive",message:"Transaction confirmed",actions:[{label:"Explore",color:"white",target:"_blank",href:`https://explorer.solana.com/tx/${d}?cluster=${e.cluster}`,onClick:()=>!1}]}),await l()}else y({type:"info",position:"top-right",message:"You need a valid Certificate"})}catch(d){console.error("verifyTransfer error: ",d)}finally{c.loading=!1}}async function M(){const d=new Se(Number(c.value)*Fe),b=new J(c.address);return await T.value.transfer({amount:d,receiver:b,proofRequest:u.value.pubkey})}async function Q(){if(!k.value||!c.token.mint)return;const d=f.tokens.find(o=>o.mint===c.token.mint);if(!d)return;const b=new J(c.token.mint),U=new J(c.address),s=await _e(b,k.value),a=await _e(b,U),i=new Se(Number(c.value)*10**d.decimals);return await T.value.transferToken({destination:a,source:s,tokenMint:b,amount:i,receiver:U,proofRequest:u.value.pubkey})}function L(d){c.value=d}function z(d){c.token=d}return{state:c,setMax:L,setToken:z,verifyTransfer:I}}),qt=ae("div",{class:"text-h6"}," Info ",-1),Dt={key:0},Ut={key:1},Qt=["href"],jt=["href"],nn=qe({__name:"ZkpRequestDialog",setup(e){const n=me(),r=X(!1),f=F(()=>Te.Empty===n.certificate?.data.status),l=F(()=>Te.Pending===n.certificate?.data.status);return(u,B)=>(ee(),ce(at,{modelValue:D(r),"onUpdate:modelValue":B[0]||(B[0]=E=>ke(r)?r.value=E:null)},{default:P(()=>[V(nt,{class:"zkp-dialog"},{default:P(()=>[V(Me,{class:"row items-center q-pb-none zkp-dialog__header"},{default:P(()=>[qt,V(_t),oe(V(se,{icon:D(De),flat:"",round:"",dense:""},null,8,["icon"]),[[le]])]),_:1}),V(Me,{class:"q-pt-none zkp-dialog__body"},{default:P(()=>[D(f)?(ee(),ve("div",Dt," To continue, you need to create a ZKP request ")):ie("",!0),D(l)?(ee(),ve("div",Ut,[ge(' To continue, you need to "prove" the request. Follow this link. '),ae("a",{class:"prove-link",href:D(Ae),target:"_blank"},"__Albus account__",8,Qt)])):ie("",!0)]),_:1}),V(Tt,{align:"right",class:"zkp-dialog__actions"},{default:P(()=>[oe(V(se,{flat:"",label:"Cancel",class:"zkp-dialog__actions--cancel"},null,512),[[le]]),D(f)?oe((ee(),ce(se,{key:0,outline:"",label:"Create",color:"yellow"},null,512)),[[le]]):ie("",!0),D(l)?oe((ee(),ce(se,{key:1,color:"yellow",outline:""},{default:P(()=>[ae("a",{href:D(Ae),target:"_blank"},"prove",8,jt)]),_:1})),[[le]]):ie("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const Be={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ue={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ue=Object.keys(ue);Ue.forEach(e=>{ue[e].regex=new RegExp(ue[e].pattern)});const zt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ue.join("")+"])|(.)","g"),Ne=/[.*+?^${}()|[\]\\]/g,R=String.fromCharCode(1),Lt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Wt(e,n,r,f){let l,u,B,E,_,k;const y=X(null),p=X(m());function c(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}K(()=>e.type+e.autogrow,A),K(()=>e.mask,s=>{if(s!==void 0)T(p.value,!0);else{const a=b(p.value);A(),e.modelValue!==a&&n("update:modelValue",a)}}),K(()=>e.fillMask+e.reverseFillMask,()=>{y.value===!0&&T(p.value,!0)}),K(()=>e.unmaskedValue,()=>{y.value===!0&&T(p.value)});function m(){if(A(),y.value===!0){const s=z(b(e.modelValue));return e.fillMask!==!1?U(s):s}return e.modelValue}function N(s){if(s<l.length)return l.slice(-s);let a="",i=l;const o=i.indexOf(R);if(o>-1){for(let g=s-i.length;g>0;g--)a+=R;i=i.slice(0,o)+a+i.slice(o)}return i}function A(){if(y.value=e.mask!==void 0&&e.mask.length!==0&&c(),y.value===!1){E=void 0,l="",u="";return}const s=Be[e.mask]===void 0?e.mask:Be[e.mask],a=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",i=a.replace(Ne,"\\$&"),o=[],g=[],v=[];let C=e.reverseFillMask===!0,h="",w="";s.replace(zt,(O,t,x,W,j)=>{if(W!==void 0){const q=ue[W];v.push(q),w=q.negate,C===!0&&(g.push("(?:"+w+"+)?("+q.pattern+"+)?(?:"+w+"+)?("+q.pattern+"+)?"),C=!1),g.push("(?:"+w+"+)?("+q.pattern+")?")}else if(x!==void 0)h="\\"+(x==="\\"?"":x),v.push(x),o.push("([^"+h+"]+)?"+h+"?");else{const q=t!==void 0?t:j;h=q==="\\"?"\\\\\\\\":q.replace(Ne,"\\\\$&"),v.push(q),o.push("([^"+h+"]+)?"+h+"?")}});const Y=new RegExp("^"+o.join("")+"("+(h===""?".":"[^"+h+"]")+"+)?"+(h===""?"":"["+h+"]*")+"$"),Z=g.length-1,S=g.map((O,t)=>t===0&&e.reverseFillMask===!0?new RegExp("^"+i+"*"+O):t===Z?new RegExp("^"+O+"("+(w===""?".":w)+"+)?"+(e.reverseFillMask===!0?"$":i+"*")):new RegExp("^"+O));B=v,E=O=>{const t=Y.exec(e.reverseFillMask===!0?O:O.slice(0,v.length+1));t!==null&&(O=t.slice(1).join(""));const x=[],W=S.length;for(let j=0,q=O;j<W;j++){const G=S[j].exec(q);if(G===null)break;q=q.slice(G.shift().length),x.push(...G)}return x.length!==0?x.join(""):O},l=v.map(O=>typeof O=="string"?O:R).join(""),u=l.split(R).join(a)}function T(s,a,i){const o=f.value,g=o.selectionEnd,v=o.value.length-g,C=b(s);a===!0&&A();const h=z(C),w=e.fillMask!==!1?U(h):h,Y=p.value!==w;o.value!==w&&(o.value=w),Y===!0&&(p.value=w),document.activeElement===o&&te(()=>{if(w===u){const S=e.reverseFillMask===!0?u.length:0;o.setSelectionRange(S,S,"forward");return}if(i==="insertFromPaste"&&e.reverseFillMask!==!0){const S=o.selectionEnd;let O=g-1;for(let t=_;t<=O&&t<S;t++)l[t]!==R&&O++;M.right(o,O);return}if(["deleteContentBackward","deleteContentForward"].indexOf(i)>-1){const S=e.reverseFillMask===!0?g===0?w.length>h.length?1:0:Math.max(0,w.length-(w===u?0:Math.min(h.length,v)+1))+1:g;o.setSelectionRange(S,S,"forward");return}if(e.reverseFillMask===!0)if(Y===!0){const S=Math.max(0,w.length-(w===u?0:Math.min(h.length,v+1)));S===1&&g===1?o.setSelectionRange(S,S,"forward"):M.rightReverse(o,S)}else{const S=w.length-v;o.setSelectionRange(S,S,"backward")}else if(Y===!0){const S=Math.max(0,l.indexOf(R),Math.min(h.length,g)-1);M.right(o,S)}else{const S=g-1;M.right(o,S)}});const Z=e.unmaskedValue===!0?b(w):w;String(e.modelValue)!==Z&&(e.modelValue!==null||Z!=="")&&r(Z,!0)}function I(s,a,i){const o=z(b(s.value));a=Math.max(0,l.indexOf(R),Math.min(o.length,a)),_=a,s.setSelectionRange(a,i,"forward")}const M={left(s,a){const i=l.slice(a-1).indexOf(R)===-1;let o=Math.max(0,a-1);for(;o>=0;o--)if(l[o]===R){a=o,i===!0&&a++;break}if(o<0&&l[a]!==void 0&&l[a]!==R)return M.right(s,0);a>=0&&s.setSelectionRange(a,a,"backward")},right(s,a){const i=s.value.length;let o=Math.min(i,a+1);for(;o<=i;o++)if(l[o]===R){a=o;break}else l[o-1]===R&&(a=o);if(o>i&&l[a-1]!==void 0&&l[a-1]!==R)return M.left(s,i);s.setSelectionRange(a,a,"forward")},leftReverse(s,a){const i=N(s.value.length);let o=Math.max(0,a-1);for(;o>=0;o--)if(i[o-1]===R){a=o;break}else if(i[o]===R&&(a=o,o===0))break;if(o<0&&i[a]!==void 0&&i[a]!==R)return M.rightReverse(s,0);a>=0&&s.setSelectionRange(a,a,"backward")},rightReverse(s,a){const i=s.value.length,o=N(i),g=o.slice(0,a+1).indexOf(R)===-1;let v=Math.min(i,a+1);for(;v<=i;v++)if(o[v-1]===R){a=v,a>0&&g===!0&&a--;break}if(v>i&&o[a-1]!==void 0&&o[a-1]!==R)return M.leftReverse(s,i);s.setSelectionRange(a,a,"forward")}};function Q(s){n("click",s),k=void 0}function L(s){if(n("keydown",s),ot(s)===!0||s.altKey===!0)return;const a=f.value,i=a.selectionStart,o=a.selectionEnd;if(s.shiftKey||(k=void 0),s.keyCode===37||s.keyCode===39){s.shiftKey&&k===void 0&&(k=a.selectionDirection==="forward"?i:o);const g=M[(s.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(s.preventDefault(),g(a,k===i?o:i),s.shiftKey){const v=a.selectionStart;a.setSelectionRange(Math.min(k,v),Math.max(k,v),"forward")}}else s.keyCode===8&&e.reverseFillMask!==!0&&i===o?(M.left(a,i),a.setSelectionRange(a.selectionStart,o,"backward")):s.keyCode===46&&e.reverseFillMask===!0&&i===o&&(M.rightReverse(a,o),a.setSelectionRange(i,a.selectionEnd,"forward"))}function z(s){if(s==null||s==="")return"";if(e.reverseFillMask===!0)return d(s);const a=B;let i=0,o="";for(let g=0;g<a.length;g++){const v=s[i],C=a[g];if(typeof C=="string")o+=C,v===C&&i++;else if(v!==void 0&&C.regex.test(v))o+=C.transform!==void 0?C.transform(v):v,i++;else return o}return o}function d(s){const a=B,i=l.indexOf(R);let o=s.length-1,g="";for(let v=a.length-1;v>=0&&o>-1;v--){const C=a[v];let h=s[o];if(typeof C=="string")g=C+g,h===C&&o--;else if(h!==void 0&&C.regex.test(h))do g=(C.transform!==void 0?C.transform(h):h)+g,o--,h=s[o];while(i===v&&h!==void 0&&C.regex.test(h));else return g}return g}function b(s){return typeof s!="string"||E===void 0?typeof s=="number"?E(""+s):s:E(s)}function U(s){return u.length-s.length<=0?s:e.reverseFillMask===!0&&s.length!==0?u.slice(0,-s.length)+s:s+u.slice(s.length)}return{innerValue:p,hasMask:y,moveCursorForPaste:I,updateMaskValue:T,onMaskedKeydown:L,onMaskedClick:Q}}function Zt(e,n){function r(){const f=e.modelValue;try{const l="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(f)===f&&("length"in f?Array.from(f):[f]).forEach(u=>{l.items.add(u)}),{files:l.files}}catch{return{files:void 0}}}return n===!0?F(()=>{if(e.type==="file")return r()}):F(r)}const $t=he({name:"QInput",inheritAttrs:!1,props:{...st,...Lt,...it,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...lt,"paste","change","keydown","click","animationend"],setup(e,{emit:n,attrs:r}){const{proxy:f}=rt(),{$q:l}=f,u={};let B=NaN,E,_,k=null,y;const p=X(null),c=ut(e),{innerValue:m,hasMask:N,moveCursorForPaste:A,updateMaskValue:T,onMaskedKeydown:I,onMaskedClick:M}=Wt(e,n,h,p),Q=Zt(e,!0),L=F(()=>xe(m.value)),z=gt(v),d=ct(),b=F(()=>e.type==="textarea"||e.autogrow===!0),U=F(()=>b.value===!0||["text","search","url","tel","password"].includes(e.type)),s=F(()=>{const t={...d.splitAttrs.listeners.value,onInput:v,onPaste:g,onChange:Y,onBlur:Z,onFocus:Ce};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=z,N.value===!0&&(t.onKeydown=I,t.onClick=M),e.autogrow===!0&&(t.onAnimationend=C),t}),a=F(()=>{const t={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:c.value,...d.splitAttrs.attributes.value,id:d.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return b.value===!1&&(t.type=e.type),e.autogrow===!0&&(t.rows=1),t});K(()=>e.type,()=>{p.value&&(p.value.value=e.modelValue)}),K(()=>e.modelValue,t=>{if(N.value===!0){if(_===!0&&(_=!1,String(t)===B))return;T(t)}else m.value!==t&&(m.value=t,e.type==="number"&&u.hasOwnProperty("value")===!0&&(E===!0?E=!1:delete u.value));e.autogrow===!0&&te(w)}),K(()=>e.autogrow,t=>{t===!0?te(w):p.value!==null&&r.rows>0&&(p.value.style.height="auto")}),K(()=>e.dense,()=>{e.autogrow===!0&&te(w)});function i(){kt(()=>{const t=document.activeElement;p.value!==null&&p.value!==t&&(t===null||t.id!==d.targetUid.value)&&p.value.focus({preventScroll:!0})})}function o(){p.value!==null&&p.value.select()}function g(t){if(N.value===!0&&e.reverseFillMask!==!0){const x=t.target;A(x,x.selectionStart,x.selectionEnd)}n("paste",t)}function v(t){if(!t||!t.target)return;if(e.type==="file"){n("update:modelValue",t.target.files);return}const x=t.target.value;if(t.target.qComposing===!0){u.value=x;return}if(N.value===!0)T(x,!1,t.inputType);else if(h(x),U.value===!0&&t.target===document.activeElement){const{selectionStart:W,selectionEnd:j}=t.target;W!==void 0&&j!==void 0&&te(()=>{t.target===document.activeElement&&x.indexOf(t.target.value)===0&&t.target.setSelectionRange(W,j)})}e.autogrow===!0&&w()}function C(t){n("animationend",t),w()}function h(t,x){y=()=>{k=null,e.type!=="number"&&u.hasOwnProperty("value")===!0&&delete u.value,e.modelValue!==t&&B!==t&&(B=t,x===!0&&(_=!0),n("update:modelValue",t),te(()=>{B===t&&(B=NaN)})),y=void 0},e.type==="number"&&(E=!0,u.value=t),e.debounce!==void 0?(k!==null&&clearTimeout(k),u.value=t,k=setTimeout(y,e.debounce)):y()}function w(){requestAnimationFrame(()=>{const t=p.value;if(t!==null){const x=t.parentNode.style,{scrollTop:W}=t,{overflowY:j,maxHeight:q}=l.platform.is.firefox===!0?{}:window.getComputedStyle(t),G=j!==void 0&&j!=="scroll";G===!0&&(t.style.overflowY="hidden"),x.marginBottom=t.scrollHeight-1+"px",t.style.height="1px",t.style.height=t.scrollHeight+"px",G===!0&&(t.style.overflowY=parseInt(q,10)<t.scrollHeight?"auto":"hidden"),x.marginBottom="",t.scrollTop=W}})}function Y(t){z(t),k!==null&&(clearTimeout(k),k=null),y!==void 0&&y(),n("change",t.target.value)}function Z(t){t!==void 0&&Ce(t),k!==null&&(clearTimeout(k),k=null),y!==void 0&&y(),E=!1,_=!1,delete u.value,e.type!=="file"&&setTimeout(()=>{p.value!==null&&(p.value.value=m.value!==void 0?m.value:"")})}function S(){return u.hasOwnProperty("value")===!0?u.value:m.value!==void 0?m.value:""}dt(()=>{Z()}),ft(()=>{e.autogrow===!0&&w()}),Object.assign(d,{innerValue:m,fieldClass:F(()=>`q-${b.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:F(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:p,emitValue:h,hasValue:L,floatingLabel:F(()=>L.value===!0&&(e.type!=="number"||isNaN(m.value)===!1)||xe(e.displayValue)),getControl:()=>ne(b.value===!0?"textarea":"input",{ref:p,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...a.value,...s.value,...e.type!=="file"?{value:S()}:Q.value}),getShadowControl:()=>ne("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(b.value===!0?"":" text-no-wrap")},[ne("span",{class:"invisible"},S()),ne("span",e.shadowText)])});const O=mt(d);return Object.assign(f,{focus:i,select:o,getNativeElement:()=>p.value}),vt(f,"nativeEl",()=>p.value),O}}),Jt={class:"token-select"},Ht=["src"],Yt=["src"],an=qe({__name:"SelectToken",props:{options:Object,searchToken:String,direction:{type:Boolean,default:!1},token:Object,swapToken:String,disable:{type:Boolean,default:!1}},emits:["handleSearchToken","setToken"],setup(e,{emit:n}){const r=e,f=n,l=X(r.searchToken),u=X(r.token??r.options[0]);K(()=>r.token,_=>{u.value=_});function B(){l.value=""}const E=F(()=>r.options.map(_=>({..._,inactive:re(String(_.value))===re(r.swapToken)})));return K(l,_=>{f("handleSearchToken",_)}),K(u,_=>{f("setToken",_,r.direction)}),(_,k)=>(ee(),ve("div",Jt,[V(bt,{modelValue:D(u),"onUpdate:modelValue":k[2]||(k[2]=y=>ke(u)?u.value=y:null),"option-disable":"inactive","popup-content-class":"transition-duration",outlined:"",options:D(E),dense:"","options-dense":!1,disable:e.disable,onPopupHide:B},{prepend:P(()=>[V(Ee,null,{default:P(()=>[ae("img",{src:D(u).image},null,8,Ht)]),_:1})]),option:P(y=>[V(Re,ht(y.itemProps,{class:"token-select__token"}),{default:P(()=>[V(de,{avatar:"",class:"token-select__token--item"},{default:P(()=>[V(Ee,null,{default:P(()=>[ae("img",{src:y.opt.image},null,8,Yt)]),_:2},1024)]),_:2},1024),V(de,null,{default:P(()=>[V(yt,null,{default:P(()=>[ge(pt(y.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":P(()=>[V($t,{modelValue:D(l),"onUpdate:modelValue":k[1]||(k[1]=y=>ke(l)?l.value=y:null),maxlength:8,outlined:"",class:"token-search"},{append:P(()=>[V(wt,{name:D(De),class:"cursor-pointer token-search__close",onClick:k[0]||(k[0]=y=>l.value="")},null,8,["name"])]),_:1},8,["modelValue"]),V(Re,null,{default:P(()=>[V(de,{class:"text-grey"},{default:P(()=>[ge(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"])]))}});export{At as P,$t as Q,nn as _,an as a,en as b,Gt as o,tn as u};
