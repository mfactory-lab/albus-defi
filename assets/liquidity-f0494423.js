import{_ as ve,a as we}from"./AppDescription-5f53b18b.js";import{_ as ne}from"./PolicyCard.vue_vue_type_script_setup_true_lang-c372dce5.js";import{_ as ie}from"./SelectPool.vue_vue_type_script_setup_true_lang-99e1ebd8.js";import{m as W,Z as ee,t as p,q as de,S as z,V as he,a0 as D,o as _,x as K,y as n,C as e,j as A,k as a,ac as F,ad as ge,B as o,ae as be,af as ye,ag as ae,z as w,G as s,a9 as G,ah as Be,s as re,ai as Ae,$ as b,aj as Te,ak as U,F as J,H as y,I as Y,J as $,a2 as ce,Q as oe,A as R,a3 as ue,a4 as me,a5 as pe,K as _e,a6 as fe,al as Se,n as qe,W as xe,R as $e,M as Ve,L as Ce,am as Pe,an as le,ao as Ue,ap as Me,aq as se,ar as Le,_ as Qe,O as Ie}from"./index-773fd831.js";import{o as Z,_ as Ee}from"./SelectToken.vue_vue_type_script_setup_true_lang-353b0c92.js";import{_ as Ne}from"./AppDescriptionTop-eb385519.js";import"./PoolsListItem.vue_vue_type_script_setup_true_lang-08be2d16.js";const je={key:0,class:"select-token-pair__selected-prepend q-mr-xs"},Fe=["src","alt"],De={key:1,class:"text-body2"},Re={avatar:"",class:"row q-mr-sm q-pr-xs"},We=["src"],Ke=["src"],Oe={class:"row items-center"},He=o("span",null,"/",-1),Xe=W({__name:"SelectPair",setup(I){const c=ee(),{state:t}=c,k=p(()=>c.tokenSwapsAllFiltered),{handleFilterToken:T,tokens:u}=de();T(z);const h=p(()=>(k.value?.map(i=>({tokenA:i.data.tokenAMint.toBase58(),tokenB:i.data.tokenBMint.toBase58()})).filter((i,d,g)=>{const B=g.findIndex(S=>S.tokenA===i.tokenA&&S.tokenB===i.tokenB||S.tokenA===i.tokenB&&S.tokenB===i.tokenA);return B===-1||B===d})).map(i=>{const d=u.value.find(B=>B.mint===i.tokenA),g=u.value.find(B=>B.mint===i.tokenB);return{value:{tokenA:d,tokenB:g},label:`${d?.symbol}/${g?.symbol}`}}).filter(i=>i.value.tokenA&&i.value.tokenB)),m=he();return D([()=>t.from,()=>t.to,h],([l,i])=>{m.value=h.value.find(d=>l.mint===d.value.tokenA?.mint&&i.mint===d.value.tokenB?.mint||l.mint===d.value.tokenB?.mint&&i.mint===d.value.tokenA?.mint)},{immediate:!0}),D(m,()=>{m.value&&(t.from=m.value.value.tokenA,t.to=m.value.value.tokenB)},{immediate:!0}),(l,i)=>(_(),K(Be,{modelValue:e(m),"onUpdate:modelValue":i[0]||(i[0]=d=>G(m)?m.value=d:null),"option-disable":"inactive","popup-content-class":"select-token-pair-popup transition-duration",outlined:"",options:e(h),dense:"","options-dense":!1,class:"select-token-pair",standout:!1},{prepend:n(()=>[e(m)?(_(),A("div",je,[a(F,null,{default:n(()=>[a(ge,{src:e(m)?.value.tokenA.image,alt:e(m)?.value.tokenA.symbol},null,8,["src","alt"])]),_:1}),a(F,null,{default:n(()=>[o("img",{src:e(m)?.value.tokenB.image,alt:e(m)?.value.tokenB.symbol},null,8,Fe)]),_:1})])):(_(),A("div",De," Select a pair of tokens "))]),option:n(d=>[a(be,ye(d.itemProps,{class:"token-select__token items-center"}),{default:n(()=>[o("div",Re,[a(F,null,{default:n(()=>[o("img",{src:d.opt.value.tokenA.image},null,8,We)]),_:2},1024),a(F,null,{default:n(()=>[o("img",{src:d.opt.value.tokenB.image},null,8,Ke)]),_:2},1024)]),o("div",Oe,[a(ae,null,{default:n(()=>[w(s(d.opt.value.tokenA.symbol),1)]),_:2},1024),He,a(ae,null,{default:n(()=>[w(s(d.opt.value.tokenB.symbol),1)]),_:2},1024)])]),_:2},1040)]),_:1},8,["modelValue","options"]))}}),ze={class:"swap-form q-mt-md"},Ge={class:"swap-field"},Je={class:"swap-field__info"},Ye={class:"row"},Ze=o("div",{class:"col-2 swap-field__label"}," AMOUNT ",-1),eo={class:"col row justify-end swap-field__balance q-pr-sm"},oo={key:0,class:"insufficient-error"},to={class:"row justify-between",style:{gap:"10px"}},ao={class:"swap-info q-mt-md q-pt-xs"},lo={class:"text-weight-medium"},so={class:"text-weight-medium"},no=o("dt",null,"Slippage Tolerance",-1),io={href:"#"},ro=o("dt",null,"Withdraw fee",-1),co={class:"swap-submit q-mt-md"},uo={key:0,class:"text-weight-medium fs-13 text-center q-mt-md text-negative"},mo={key:1,class:"row q-mt-md text-center relative-position full-width"},po={class:"absolute-right swap-rate__refresh"},_o={class:"swap-info q-mt-lg q-pt-sm"},fo=o("dt",null,"LP tokens total",-1),ko=W({__name:"WithdrawBothCard",setup(I){const c=ee(),{state:t,loadingPoolTokens:k,loadPoolTokenAccounts:T}=c,u=p(()=>c.tokenSwap),{certificateExpired:h}=re(),m=Ae(),{state:l,depositBothTokens:i,closeSlippage:d}=m,g=p(()=>u.value&&c.userPoolsTokens[u.value.data.poolMint.toBase58()]||0),B=p(()=>t.poolBalance[t.from.mint]?b(t.poolBalance[t.from.mint],t.from.decimals):0),S=p(()=>t.poolBalance[t.to.mint]?b(t.poolBalance[t.to.mint],t.to.decimals):0),E=V=>fe.format(V);function N(){l.poolAmount=b(g.value,U)}const M=p(()=>Number(Te(l.poolAmount,U))>g.value?"Insufficient funds":!1);return D([()=>l.poolAmount,g],()=>{l.active=!M.value}),(V,q)=>{const O=Xe,C=ie,P=ne;return _(),K(R,{class:"swap-card__body"},{default:n(()=>[a(O),o("div",ze,[o("div",Ge,[o("div",Je,[o("div",Ye,[Ze,o("div",eo,[e(M)?(_(),A("div",oo," Insufficient funds ")):J("",!0),w(" Balance: "+s(e(y)(e(b)(e(g),e(U)))),1)])])]),o("div",to,[a(Y,{modelValue:e(l).poolAmount,"onUpdate:modelValue":q[0]||(q[0]=x=>e(l).poolAmount=x),maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input col",onKeypress:e(Z)},{append:n(()=>[a($,{dense:"",unelevated:"",ripple:!1,class:"swap-input__max",onClick:N},{default:n(()=>[w(" MAX ")]),_:1})]),_:1},8,["modelValue","onKeypress"])])])]),o("div",ao,[o("dl",lo,[o("dt",null,"Min "+s(e(t).from.symbol.toUpperCase())+" received",1),o("dd",null,s(e(y)(e(b)(e(l).minAmountTokenA,e(t).from.decimals),e(t).from.decimals))+" "+s(e(t).from.symbol.toUpperCase()),1)]),o("dl",so,[o("dt",null,"Min "+s(e(t).to.symbol.toUpperCase())+" received",1),o("dd",null,s(e(y)(e(b)(e(l).minAmountTokenB,e(t).to.decimals),e(t).to.decimals))+" "+s(e(t).to.symbol.toUpperCase()),1)]),o("dl",null,[no,o("dd",null,[o("a",io,[w(s(E(e(l).slippage))+" ",1),a(ce,{modelValue:e(l).slippageDialog,"onUpdate:modelValue":q[2]||(q[2]=x=>e(l).slippageDialog=x),"transition-duration":"100","transition-show":"fade","transition-hide":"fade"},{default:n(()=>[a(oe,null,{default:n(()=>[a(R,null,{default:n(()=>[a(ue,{modelValue:e(l).slippage,"onUpdate:modelValue":[q[1]||(q[1]=x=>e(l).slippage=x),e(d)],spread:"","no-caps":"",unelevated:"",ripple:!1,"toggle-color":"secondary",color:"white","text-color":"dark",options:[{label:"0.1%",value:.001},{label:"0.5%",value:.005},{label:"1%",value:.01},{label:"5%",value:.05}]},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),o("dl",null,[ro,o("dd",null,s(E(e(t).fees.ownerWithdraw))+" SOL",1)])]),a(C,{class:"q-mt-md"}),a(P,{class:"q-mt-md q-mx-auto"}),o("div",co,[a($,{loading:e(l).swapping,disable:!e(l).active||!e(u)||!e(l).poolAmount||e(h),rounded:"",ripple:!1,onClick:e(i)},{default:n(()=>[w(" Remove Liquidity ")]),_:1},8,["loading","disable","onClick"])]),e(u)?(_(),A("div",mo,[o("div",po,[a($,{loading:e(k),class:"swap-card__reload",unelevated:"",color:V.$q.dark.isActive?"white":"primary",round:"",onClick:e(T)},{default:n(()=>[a(me,{name:e(pe),color:V.$q.dark.isActive?"primary":"white"},null,8,["name","color"])]),_:1},8,["loading","color","onClick"])])])):(_(),A("div",uo," Pool not found ")),o("div",_o,[o("dl",null,[fo,o("dd",null,s(e(b)(e(t).poolTokenSupply,e(U))),1)]),o("dl",null,[o("dt",null,"Pool "+s(e(t).from.symbol)+" balance",1),o("dd",null,s(e(y)(e(B)))+" "+s(e(t).from.symbol),1)]),o("dl",null,[o("dt",null,"Pool "+s(e(t).to.symbol)+" balance",1),o("dd",null,s(e(y)(e(S)))+" "+s(e(t).to.symbol),1)])]),a(_e,{showing:e(t)?.loading,class:"swap-loading",color:"grey"},null,8,["showing"])]),_:1})}}}),vo={class:"swap-form"},wo={class:"swap-field"},ho={class:"swap-field__info"},go={class:"row items-end justify-end"},bo={class:"col-8 col-xs-10 row justify-end swap-field__balance"},yo={key:0,class:"insufficient-error"},Bo={class:"swap-field q-pt-xs"},Ao={class:"swap-field__info q-mt-sm"},To={class:"row items-end justify-end"},So={class:"col-8 col-xs-10 row justify-end swap-field__balance"},qo={key:0,class:"insufficient-error"},xo={class:"swap-info q-mt-md q-pt-xs"},$o={class:"text-weight-medium"},Vo=o("dt",null,"LP tokens received",-1),Co={class:"text-weight-medium"},Po={class:"text-weight-medium"},Uo=o("dt",null,"Slippage Tolerance",-1),Mo={href:"#"},Lo={class:"swap-submit q-mt-md"},Qo={key:0,class:"text-weight-medium fs-13 text-center q-mt-md text-negative"},Io={key:1,class:"row q-mt-md text-center relative-position full-width"},Eo={class:"absolute-right swap-rate__refresh"},No={class:"swap-info q-mt-lg q-pt-sm"},jo=o("dt",null,"Your LP tokens",-1),Fo=W({__name:"DepositBothCard",setup(I){const c=ee(),{state:t,loadingPoolTokens:k,loadPoolTokenAccounts:T}=c,u=p(()=>c.tokenSwap),h=p(()=>u.value&&c.userPoolsTokens[u.value.data.poolMint.toBase58()]||0),m=Se(),{state:l,depositBothTokens:i,calcRate:d,closeSlippage:g}=m,{certificateExpired:B}=re(),{handleSearchToken:S,handleFilterToken:E,tokens:N}=de();E(z);const M=qe(),V=p(()=>t.poolBalance[t.from.mint]?b(t.poolBalance[t.from.mint],t.from.decimals):0),q=p(()=>t.poolBalance[t.to.mint]?b(t.poolBalance[t.to.mint],t.to.decimals):0),O=v=>fe.format(v),C=p(()=>M.tokenBalance(t.from.mint)),P=p(()=>M.tokenBalance(t.to.mint));function x(v,r){t[r?"to":"from"]=v}function te(v=!1){const r=v?"to":"from",L=v?"amountTokenB":"amountTokenA",j=v?P.value:C.value;t[r]?.mint===z||t[r]?.mint===xe?l[L]=j-$e-3*Ve-Ce:l[L]=j,d(v)}const H=p(()=>Number(l.amountTokenA)>C.value?"Insufficient funds":!1),X=p(()=>Number(l.amountTokenB)>P.value?"Insufficient funds":!1);return D([()=>l.amountTokenA,C,()=>l.amountTokenB,P],v=>{l.active=!H.value&&!X.value}),(v,r)=>{const L=Ee,j=ie,ke=ne;return _(),K(R,{class:"swap-card__body"},{default:n(()=>[o("div",vo,[o("div",wo,[o("div",ho,[o("div",go,[o("div",bo,[e(H)?(_(),A("div",yo,s(e(H)),1)):J("",!0),w(" Balance: "+s(e(y)(e(C)))+" "+s(e(t).from.symbol),1)])])]),a(Y,{modelValue:e(l).amountTokenA,"onUpdate:modelValue":[r[1]||(r[1]=f=>e(l).amountTokenA=f),r[2]||(r[2]=f=>{const Q=String(f);Q[Q.length-1]!=="."&&e(d)()})],maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input",onKeypress:e(Z)},{append:n(()=>[a($,{dense:"",unelevated:"",ripple:!1,class:"swap-input__max",onClick:r[0]||(r[0]=f=>te())},{default:n(()=>[w(" MAX ")]),_:1}),a(L,{options:e(N),token:e(t).from,"swap-token":String(e(t).to.symbol),onHandleSearchToken:e(S),onSetToken:x},null,8,["options","token","swap-token","onHandleSearchToken"])]),_:1},8,["modelValue","onKeypress"])]),o("div",Bo,[o("div",Ao,[o("div",To,[o("div",So,[e(X)?(_(),A("div",qo,s(e(X)),1)):J("",!0),w(" Balance: "+s(e(y)(e(P)))+" "+s(e(t).to.symbol),1)])])]),a(Y,{modelValue:e(l).amountTokenB,"onUpdate:modelValue":[r[4]||(r[4]=f=>e(l).amountTokenB=f),r[5]||(r[5]=f=>{const Q=String(f);Q[Q.length-1]!=="."&&e(d)(!0)})],maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input",onKeypress:e(Z)},{append:n(()=>[a($,{dense:"",unelevated:"",ripple:!1,class:"swap-input__max",onClick:r[3]||(r[3]=f=>te(!0))},{default:n(()=>[w(" MAX ")]),_:1}),a(L,{"swap-token":String(e(t).from.symbol),options:e(N),direction:!0,token:e(t).to,"destination-unavailable":!e(u),onHandleSearchToken:e(S),onSetToken:x},null,8,["swap-token","options","token","destination-unavailable","onHandleSearchToken"])]),_:1},8,["modelValue","onKeypress"])])]),o("div",xo,[o("dl",$o,[Vo,o("dd",null,s(e(b)(e(l).poolAmount,e(U))),1)]),o("dl",Co,[o("dt",null,"Max "+s(e(t).from.symbol.toUpperCase())+" to be withdrawn",1),o("dd",null,s(e(y)(e(l).maxAmountTokenA,e(t).from.decimals))+" "+s(e(t).from.symbol.toUpperCase()),1)]),o("dl",Po,[o("dt",null,"Max "+s(e(t).to.symbol.toUpperCase())+" to be withdrawn",1),o("dd",null,s(e(y)(e(l).maxAmountTokenB,e(t).to.decimals))+" "+s(e(t).to.symbol.toUpperCase()),1)]),o("dl",null,[Uo,o("dd",null,[o("a",Mo,[w(s(O(e(l).slippage))+" ",1),a(ce,{modelValue:e(l).slippageDialog,"onUpdate:modelValue":r[7]||(r[7]=f=>e(l).slippageDialog=f),"transition-duration":"100","transition-show":"fade","transition-hide":"fade"},{default:n(()=>[a(oe,null,{default:n(()=>[a(R,null,{default:n(()=>[a(ue,{modelValue:e(l).slippage,"onUpdate:modelValue":[r[6]||(r[6]=f=>e(l).slippage=f),e(g)],spread:"","no-caps":"",unelevated:"",ripple:!1,"toggle-color":"secondary",color:"white","text-color":"dark",options:[{label:"0.1%",value:.001},{label:"0.5%",value:.005},{label:"1%",value:.01},{label:"5%",value:.05}]},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])]),a(j,{class:"q-mt-md"}),a(ke,{class:"q-mt-md q-mx-auto"}),o("div",Lo,[a($,{loading:e(l).swapping,disable:!e(l).active||!e(u)||!e(l).amountTokenA||e(B),rounded:"",ripple:!1,onClick:e(i)},{default:n(()=>[w(" Add Liquidity ")]),_:1},8,["loading","disable","onClick"])]),e(u)?(_(),A("div",Io,[o("div",Eo,[a($,{loading:e(k),class:"swap-card__reload",unelevated:"",color:v.$q.dark.isActive?"white":"primary",round:"",onClick:e(T)},{default:n(()=>[a(me,{name:e(pe),color:v.$q.dark.isActive?"primary":"white"},null,8,["name","color"])]),_:1},8,["loading","color","onClick"])])])):(_(),A("div",Qo," Pool not found ")),o("div",No,[o("dl",null,[jo,o("dd",null,s(e(b)(e(h),e(U))),1)]),o("dl",null,[o("dt",null,"Pool "+s(e(t).from.symbol)+" balance",1),o("dd",null,s(e(y)(e(V)))+" "+s(e(t).from.symbol),1)]),o("dl",null,[o("dt",null,"Pool "+s(e(t).to.symbol)+" balance",1),o("dd",null,s(e(y)(e(q)))+" "+s(e(t).to.symbol),1)])]),a(_e,{showing:e(t)?.loading,class:"swap-loading",color:"grey"},null,8,["showing"])]),_:1})}}}),Do=W({__name:"LiquidityCard",setup(I){const c=Pe("withdraw-tab","deposit");return(t,k)=>{const T=Fo,u=ko;return _(),K(oe,{class:"liquidity-tabs swap-card swap-widget"},{default:n(()=>[a(Me,{modelValue:e(c),"onUpdate:modelValue":k[0]||(k[0]=h=>G(c)?c.value=h:null),align:"justify","indicator-color":"transparent",class:Ue(t.$q.dark.isActive?"bg-blue-grey-9":"bg-grey-3"),"active-color":"white","active-bg-color":"primary"},{default:n(()=>[a(le,{ripple:!1,label:"Deposit",name:"deposit"}),a(le,{ripple:!1,label:"Withdraw",name:"withdraw"})]),_:1},8,["modelValue","class"]),a(Le,{modelValue:e(c),"onUpdate:modelValue":k[1]||(k[1]=h=>G(c)?c.value=h:null),animated:"",class:"bg-transparent"},{default:n(()=>[a(se,{name:"deposit"},{default:n(()=>[a(T)]),_:1}),a(se,{name:"withdraw"},{default:n(()=>[a(u)]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),Ro={},Wo={class:"main-block row justify-center"},Ko={class:"row justify-center col-12"};function Oo(I,c){const t=Ne,k=Do,T=ve,u=we;return _(),A(Ie,null,[a(t,{class:"q-mt-lg"}),o("div",Wo,[o("div",Ko,[a(k)])]),a(T,{class:"q-mt-lg"}),a(u,{class:"q-mt-lg"})],64)}const et=Qe(Ro,[["render",Oo]]);export{et as default};
