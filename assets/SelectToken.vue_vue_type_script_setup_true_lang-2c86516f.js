import{K as Ne,ai as je,aj as Le,q as F,O as ne,ak as Qe,P as J,al as Oe,Y as X,a3 as fe,V as Pe,a1 as Ve,a6 as K,am as ze,an as he,ao as We,a9 as $e,ap as Z,af as Fe,aq as ye,ar as H,ab as pe,as as Ze,at as Ke,au as Ie,av as Je,u as me,t as He,a2 as Ye,aw as Xe,ax as Ge,ay as et,az as we,s as re,aA as tt,aa as nt,a7 as be,aB as Se,m as De,aC as _e,o as ee,aD as ce,w as P,j as V,v as Te,aE as at,aF as oe,G as se,z as q,I as qe,i as ve,A as ie,x as ge,y as ae,aG as Ae,Q as ot,aH as ke,ae as st,aI as le,aJ as te,aK as it,aL as lt,L as rt,aM as ut,aN as ct,aO as dt,aP as Me,aQ as ft,aR as xe,aS as mt,aT as vt,aU as gt,aV as kt,aW as ht,aX as yt,aY as Ce,aZ as Ee,a_ as pt,a$ as de,b0 as wt,B as bt,b1 as St,b2 as _t}from"./index-7f7b8fd9.js";function Gt(e){const n=e.keyCode?e.keyCode:e.which;(n<48||n>57)&&n!==46&&e.preventDefault(),n===46&&String(e.target.value).includes(".")&&e.preventDefault()}const Tt=Ne({name:"QCardActions",props:{...je,vertical:Boolean},setup(e,{slots:n}){const r=Le(e),f=F(()=>`q-card__actions ${r.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>ne("div",{class:f.value},Qe(n.default))}}),At=new J("EjCM3aozA6sFUzQQ7vXg2uTtjRydyuHSWRwvQX16pAS9");var Mt=(e=>(e.TOKEN_A="TOKEN_A",e.TOKEN_B="TOKEN_B",e))(Mt||{});const en=Oe("swap",()=>{const e=X(),n=fe({loading:!1,slippageDialog:!1,status:void 0,poolBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},userBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},poolTokenSupply:0,rate:0}),r=Pe(),f=Ve();K(f,async m=>{m?l().then():d()},{immediate:!0}),K(e,async m=>{m&&await B()});async function l(){n.loading=!0;try{e.value=await ze.loadTokenSwap(r.connection,At),await u()}catch(m){console.log(m),e.value=void 0}finally{n.loading=!1}console.log("Token SWAP: ",e.value)}async function u(){if(!e.value)return;const m=await he(r.connection,e.value.authority);for(const M of m){const T=_(M.mint);T&&(n.poolBalance[T]=M.amount)}const N=await We(r.connection,e.value.poolToken);n.poolTokenSupply=Number(N.supply),n.rate=E()}async function B(){if(!e.value)return;const m=f.value?.publicKey;if(!m){console.log("Wallet is not connected...");return}const N=await he(r.connection,m,[e.value.poolToken,e.value.mintA,e.value.mintB]),M={TOKEN_A:0,TOKEN_B:0};for(const T of N){const I=_(T.mint);I&&(M[I]=+T.amount)}n.userBalance=M,console.log("[Pool Balance]",n.poolBalance),console.log("[User Balance]",n.userBalance)}function E(){return $e(k(Fe))}function _(m){if(e.value)switch(String(m)){case String(e.value.mintA):return"TOKEN_A";case String(e.value.mintB):return"TOKEN_B"}}function k(m){const N=new Z(n.poolBalance.TOKEN_A),M=new Z(m).div(N),T=new Z(1),A=T.add(M).sqrt().sub(T);return new Z(n.poolTokenSupply).mul(A).toNumber()}function y(m,N){const M=new Z(n.poolBalance[N]??0),T=new Z(m).div(M),I=new Z(1),A=I.sub(T);if(A.isNeg())return 0;const j=I.sub(A.sqrt());return new Z(n.poolTokenSupply).mul(j).toNumber()}async function p(m,N){const M=e.value?.mintA,T=e.value?.mintB;if(!M||!T)return;const I=M.toBase58()===m,A=await ye(r.connection,M.toBase58()),j=await ye(r.connection,T.toBase58()),z=10**(I?j:A),Q=10**(I?A:j),c=N*Q;return(I?n.userBalance.TOKEN_B/n.userBalance.TOKEN_A*c:n.userBalance.TOKEN_A/n.userBalance.TOKEN_B*c)/z}function d(){n.loading=!1,n.slippageDialog=!1,n.status=void 0,n.poolBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},n.userBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},n.poolTokenSupply=0,n.rate=0}return{state:n,tokenSwap:e,loadUserTokenAccounts:B,depositSingleTokenType:k,withdrawSingleTokenTypeExactOut:y,calculateDependentAmount:p}});var xt=Object.defineProperty,Ct=(e,n,r)=>n in e?xt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,Et=(e,n,r)=>(Ct(e,typeof n!="symbol"?n+"":n,r),r);const Rt=new H.BeetArgsStruct([["instructionDiscriminator",H.uniformFixedSizeArray(H.u8,8)],["amount",H.u64]],"SplTransferInstructionArgs"),Bt=[67,186,237,99,235,243,166,198];function Nt(e,n,r=new J("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[f]=Rt.serialize({instructionDiscriminator:Bt,...n}),l=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.tokenMint,isWritable:!1,isSigner:!1},{pubkey:e.source,isWritable:!0,isSigner:!1},{pubkey:e.destination,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Ze,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ke.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const u of e.anchorRemainingAccounts)l.push(u);return new Ie({programId:r,keys:l,data:f})}const Ot=new H.BeetArgsStruct([["instructionDiscriminator",H.uniformFixedSizeArray(H.u8,8)],["amount",H.u64]],"TransferInstructionArgs"),Pt=[163,52,200,231,140,3,69,186];function Vt(e,n,r=new J("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[f]=Ot.serialize({instructionDiscriminator:Pt,...n}),l=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ke.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const u of e.anchorRemainingAccounts)l.push(u);return new Ie({programId:r,keys:l,data:f})}const Ft="J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c",Kt=new J(Ft);class It{constructor(n){Et(this,"programId",Kt),this.provider=n}get connection(){return this.provider.connection}async transfer(n,r){const f=Vt({proofRequest:n.proofRequest,sender:this.provider.publicKey,receiver:n.receiver},{amount:n.amount}),l=new pe().add(f);return this.provider.sendAndConfirm(l,[],r)}async transferToken(n,r){const f=Nt({proofRequest:n.proofRequest,sender:this.provider.publicKey,receiver:n.receiver,source:n.source,destination:n.destination,tokenMint:n.tokenMint},{amount:n.amount}),l=new pe().add(f);return this.provider.sendAndConfirm(l,[],r)}}const tn=Oe("transfer",()=>{const e=Pe(),{tokens:n}=Je(),r=me(),{state:f,getUserTokens:l}=me(),u=F(()=>r.certificate),B=F(()=>r.certificateValid),E=0,_=Ve(),{publicKey:k}=He(),{notify:y}=Ye(),p=fe(n[0]),d=fe({address:"",value:void 0,loading:!1,token:p,fee:E,valid:!1});function m(){d.value=void 0,d.fee=E}K(()=>d.token,()=>{m(),r.policySpec=d.token.name}),K(()=>_.value?.publicKey,c=>{c||(m(),d.address="")}),K(()=>d.address,async()=>{d.valid=await Xe(d.address)}),K([()=>d.valid,()=>d.value],async([c,b])=>{c&&Number(b)>0?M():d.fee=E});async function N(){const c=d.token.label,b=f.tokens.find(U=>re(U.symbol)===re(c));return c==="sol"?!0:!b||!b.mint?!1:!!tt(b.mint)}async function M(){const c=await N(),b=await Ge(_.value?.publicKey,d.address,Number(d.value),e.connection),U=await et(b,e.connection);d.fee=c?U:U+.02}const T=F(()=>new It(new we(e.connection,_.value??{publicKey:J.default},we.defaultOptions())));async function I(){try{if(d.loading=!0,console.log("[debug] on transfer certificate === ",u.value),B.value){console.log(d.token);let c;d.token.label==="sol"?c=await A():c=await j(),y({type:"positive",message:"Transaction confirmed",actions:[{label:"Explore",color:"white",target:"_blank",href:`https://explorer.solana.com/tx/${c}?cluster=${e.cluster}`,onClick:()=>!1}]}),m(),await l()}else nt()}catch(c){console.error("verifyTransfer error: ",c),y({type:"negative",message:`${c}`})}finally{d.loading=!1}}async function A(){const c=new be(Number(d.value)*Fe),b=new J(d.address);return await T.value.transfer({amount:c,receiver:b,proofRequest:u.value.pubkey})}async function j(){if(!k.value||!d.token.mint)return;const c=f.tokens.find(o=>o.mint===d.token.mint);if(!c)return;const b=new J(d.token.mint),U=new J(d.address),s=await Se(b,k.value),a=await Se(b,U),i=new be(Number(d.value)*10**c.decimals);return await T.value.transferToken({destination:a,source:s,tokenMint:b,amount:i,receiver:U,proofRequest:u.value.pubkey})}function z(c){d.value=c}function Q(c){d.token=c}return{state:d,setMax:z,setToken:Q,verifyTransfer:I}}),Dt=ae("div",{class:"text-h6"}," Info ",-1),qt={key:0},Ut={key:1},jt=["href"],Lt=["href"],nn=De({__name:"ZkpRequestDialog",setup(e){const n=me(),r=X(!1),f=F(()=>_e.Empty===n.certificate?.data.status),l=F(()=>_e.Pending===n.certificate?.data.status);return(u,B)=>(ee(),ce(st,{modelValue:q(r),"onUpdate:modelValue":B[0]||(B[0]=E=>ke(r)?r.value=E:null)},{default:P(()=>[V(ot,{class:"zkp-dialog"},{default:P(()=>[V(Te,{class:"row items-center q-pb-none zkp-dialog__header"},{default:P(()=>[Dt,V(at),oe(V(se,{icon:q(qe),flat:"",round:"",dense:""},null,8,["icon"]),[[le]])]),_:1}),V(Te,{class:"q-pt-none zkp-dialog__body"},{default:P(()=>[q(f)?(ee(),ve("div",qt," To continue, you need to create a ZKP request ")):ie("",!0),q(l)?(ee(),ve("div",Ut,[ge(' To continue, you need to "prove" the request. Follow this link. '),ae("a",{class:"prove-link",href:q(Ae),target:"_blank"},"__Albus account__",8,jt)])):ie("",!0)]),_:1}),V(Tt,{align:"right",class:"zkp-dialog__actions"},{default:P(()=>[oe(V(se,{flat:"",label:"Cancel",class:"zkp-dialog__actions--cancel"},null,512),[[le]]),q(f)?oe((ee(),ce(se,{key:0,outline:"",label:"Create",color:"yellow"},null,512)),[[le]]):ie("",!0),q(l)?oe((ee(),ce(se,{key:1,color:"yellow",outline:""},{default:P(()=>[ae("a",{href:q(Ae),target:"_blank"},"prove",8,Lt)]),_:1})),[[le]]):ie("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const Re={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ue={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ue=Object.keys(ue);Ue.forEach(e=>{ue[e].regex=new RegExp(ue[e].pattern)});const Qt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ue.join("")+"])|(.)","g"),Be=/[.*+?^${}()|[\]\\]/g,R=String.fromCharCode(1),zt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Wt(e,n,r,f){let l,u,B,E,_,k;const y=X(null),p=X(m());function d(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}K(()=>e.type+e.autogrow,M),K(()=>e.mask,s=>{if(s!==void 0)T(p.value,!0);else{const a=b(p.value);M(),e.modelValue!==a&&n("update:modelValue",a)}}),K(()=>e.fillMask+e.reverseFillMask,()=>{y.value===!0&&T(p.value,!0)}),K(()=>e.unmaskedValue,()=>{y.value===!0&&T(p.value)});function m(){if(M(),y.value===!0){const s=Q(b(e.modelValue));return e.fillMask!==!1?U(s):s}return e.modelValue}function N(s){if(s<l.length)return l.slice(-s);let a="",i=l;const o=i.indexOf(R);if(o>-1){for(let g=s-i.length;g>0;g--)a+=R;i=i.slice(0,o)+a+i.slice(o)}return i}function M(){if(y.value=e.mask!==void 0&&e.mask.length!==0&&d(),y.value===!1){E=void 0,l="",u="";return}const s=Re[e.mask]===void 0?e.mask:Re[e.mask],a=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",i=a.replace(Be,"\\$&"),o=[],g=[],v=[];let C=e.reverseFillMask===!0,h="",w="";s.replace(Qt,(O,t,x,W,L)=>{if(W!==void 0){const D=ue[W];v.push(D),w=D.negate,C===!0&&(g.push("(?:"+w+"+)?("+D.pattern+"+)?(?:"+w+"+)?("+D.pattern+"+)?"),C=!1),g.push("(?:"+w+"+)?("+D.pattern+")?")}else if(x!==void 0)h="\\"+(x==="\\"?"":x),v.push(x),o.push("([^"+h+"]+)?"+h+"?");else{const D=t!==void 0?t:L;h=D==="\\"?"\\\\\\\\":D.replace(Be,"\\\\$&"),v.push(D),o.push("([^"+h+"]+)?"+h+"?")}});const Y=new RegExp("^"+o.join("")+"("+(h===""?".":"[^"+h+"]")+"+)?"+(h===""?"":"["+h+"]*")+"$"),$=g.length-1,S=g.map((O,t)=>t===0&&e.reverseFillMask===!0?new RegExp("^"+i+"*"+O):t===$?new RegExp("^"+O+"("+(w===""?".":w)+"+)?"+(e.reverseFillMask===!0?"$":i+"*")):new RegExp("^"+O));B=v,E=O=>{const t=Y.exec(e.reverseFillMask===!0?O:O.slice(0,v.length+1));t!==null&&(O=t.slice(1).join(""));const x=[],W=S.length;for(let L=0,D=O;L<W;L++){const G=S[L].exec(D);if(G===null)break;D=D.slice(G.shift().length),x.push(...G)}return x.length!==0?x.join(""):O},l=v.map(O=>typeof O=="string"?O:R).join(""),u=l.split(R).join(a)}function T(s,a,i){const o=f.value,g=o.selectionEnd,v=o.value.length-g,C=b(s);a===!0&&M();const h=Q(C),w=e.fillMask!==!1?U(h):h,Y=p.value!==w;o.value!==w&&(o.value=w),Y===!0&&(p.value=w),document.activeElement===o&&te(()=>{if(w===u){const S=e.reverseFillMask===!0?u.length:0;o.setSelectionRange(S,S,"forward");return}if(i==="insertFromPaste"&&e.reverseFillMask!==!0){const S=o.selectionEnd;let O=g-1;for(let t=_;t<=O&&t<S;t++)l[t]!==R&&O++;A.right(o,O);return}if(["deleteContentBackward","deleteContentForward"].indexOf(i)>-1){const S=e.reverseFillMask===!0?g===0?w.length>h.length?1:0:Math.max(0,w.length-(w===u?0:Math.min(h.length,v)+1))+1:g;o.setSelectionRange(S,S,"forward");return}if(e.reverseFillMask===!0)if(Y===!0){const S=Math.max(0,w.length-(w===u?0:Math.min(h.length,v+1)));S===1&&g===1?o.setSelectionRange(S,S,"forward"):A.rightReverse(o,S)}else{const S=w.length-v;o.setSelectionRange(S,S,"backward")}else if(Y===!0){const S=Math.max(0,l.indexOf(R),Math.min(h.length,g)-1);A.right(o,S)}else{const S=g-1;A.right(o,S)}});const $=e.unmaskedValue===!0?b(w):w;String(e.modelValue)!==$&&(e.modelValue!==null||$!=="")&&r($,!0)}function I(s,a,i){const o=Q(b(s.value));a=Math.max(0,l.indexOf(R),Math.min(o.length,a)),_=a,s.setSelectionRange(a,i,"forward")}const A={left(s,a){const i=l.slice(a-1).indexOf(R)===-1;let o=Math.max(0,a-1);for(;o>=0;o--)if(l[o]===R){a=o,i===!0&&a++;break}if(o<0&&l[a]!==void 0&&l[a]!==R)return A.right(s,0);a>=0&&s.setSelectionRange(a,a,"backward")},right(s,a){const i=s.value.length;let o=Math.min(i,a+1);for(;o<=i;o++)if(l[o]===R){a=o;break}else l[o-1]===R&&(a=o);if(o>i&&l[a-1]!==void 0&&l[a-1]!==R)return A.left(s,i);s.setSelectionRange(a,a,"forward")},leftReverse(s,a){const i=N(s.value.length);let o=Math.max(0,a-1);for(;o>=0;o--)if(i[o-1]===R){a=o;break}else if(i[o]===R&&(a=o,o===0))break;if(o<0&&i[a]!==void 0&&i[a]!==R)return A.rightReverse(s,0);a>=0&&s.setSelectionRange(a,a,"backward")},rightReverse(s,a){const i=s.value.length,o=N(i),g=o.slice(0,a+1).indexOf(R)===-1;let v=Math.min(i,a+1);for(;v<=i;v++)if(o[v-1]===R){a=v,a>0&&g===!0&&a--;break}if(v>i&&o[a-1]!==void 0&&o[a-1]!==R)return A.leftReverse(s,i);s.setSelectionRange(a,a,"forward")}};function j(s){n("click",s),k=void 0}function z(s){if(n("keydown",s),it(s)===!0||s.altKey===!0)return;const a=f.value,i=a.selectionStart,o=a.selectionEnd;if(s.shiftKey||(k=void 0),s.keyCode===37||s.keyCode===39){s.shiftKey&&k===void 0&&(k=a.selectionDirection==="forward"?i:o);const g=A[(s.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(s.preventDefault(),g(a,k===i?o:i),s.shiftKey){const v=a.selectionStart;a.setSelectionRange(Math.min(k,v),Math.max(k,v),"forward")}}else s.keyCode===8&&e.reverseFillMask!==!0&&i===o?(A.left(a,i),a.setSelectionRange(a.selectionStart,o,"backward")):s.keyCode===46&&e.reverseFillMask===!0&&i===o&&(A.rightReverse(a,o),a.setSelectionRange(i,a.selectionEnd,"forward"))}function Q(s){if(s==null||s==="")return"";if(e.reverseFillMask===!0)return c(s);const a=B;let i=0,o="";for(let g=0;g<a.length;g++){const v=s[i],C=a[g];if(typeof C=="string")o+=C,v===C&&i++;else if(v!==void 0&&C.regex.test(v))o+=C.transform!==void 0?C.transform(v):v,i++;else return o}return o}function c(s){const a=B,i=l.indexOf(R);let o=s.length-1,g="";for(let v=a.length-1;v>=0&&o>-1;v--){const C=a[v];let h=s[o];if(typeof C=="string")g=C+g,h===C&&o--;else if(h!==void 0&&C.regex.test(h))do g=(C.transform!==void 0?C.transform(h):h)+g,o--,h=s[o];while(i===v&&h!==void 0&&C.regex.test(h));else return g}return g}function b(s){return typeof s!="string"||E===void 0?typeof s=="number"?E(""+s):s:E(s)}function U(s){return u.length-s.length<=0?s:e.reverseFillMask===!0&&s.length!==0?u.slice(0,-s.length)+s:s+u.slice(s.length)}return{innerValue:p,hasMask:y,moveCursorForPaste:I,updateMaskValue:T,onMaskedKeydown:z,onMaskedClick:j}}function $t(e,n){function r(){const f=e.modelValue;try{const l="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(f)===f&&("length"in f?Array.from(f):[f]).forEach(u=>{l.items.add(u)}),{files:l.files}}catch{return{files:void 0}}}return n===!0?F(()=>{if(e.type==="file")return r()}):F(r)}const Zt=Ne({name:"QInput",inheritAttrs:!1,props:{...lt,...zt,...rt,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ut,"paste","change","keydown","click","animationend"],setup(e,{emit:n,attrs:r}){const{proxy:f}=ct(),{$q:l}=f,u={};let B=NaN,E,_,k=null,y;const p=X(null),d=dt(e),{innerValue:m,hasMask:N,moveCursorForPaste:M,updateMaskValue:T,onMaskedKeydown:I,onMaskedClick:A}=Wt(e,n,h,p),j=$t(e,!0),z=F(()=>Me(m.value)),Q=ht(v),c=ft(),b=F(()=>e.type==="textarea"||e.autogrow===!0),U=F(()=>b.value===!0||["text","search","url","tel","password"].includes(e.type)),s=F(()=>{const t={...c.splitAttrs.listeners.value,onInput:v,onPaste:g,onChange:Y,onBlur:$,onFocus:xe};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Q,N.value===!0&&(t.onKeydown=I,t.onClick=A),e.autogrow===!0&&(t.onAnimationend=C),t}),a=F(()=>{const t={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:d.value,...c.splitAttrs.attributes.value,id:c.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return b.value===!1&&(t.type=e.type),e.autogrow===!0&&(t.rows=1),t});K(()=>e.type,()=>{p.value&&(p.value.value=e.modelValue)}),K(()=>e.modelValue,t=>{if(N.value===!0){if(_===!0&&(_=!1,String(t)===B))return;T(t)}else m.value!==t&&(m.value=t,e.type==="number"&&u.hasOwnProperty("value")===!0&&(E===!0?E=!1:delete u.value));e.autogrow===!0&&te(w)}),K(()=>e.autogrow,t=>{t===!0?te(w):p.value!==null&&r.rows>0&&(p.value.style.height="auto")}),K(()=>e.dense,()=>{e.autogrow===!0&&te(w)});function i(){yt(()=>{const t=document.activeElement;p.value!==null&&p.value!==t&&(t===null||t.id!==c.targetUid.value)&&p.value.focus({preventScroll:!0})})}function o(){p.value!==null&&p.value.select()}function g(t){if(N.value===!0&&e.reverseFillMask!==!0){const x=t.target;M(x,x.selectionStart,x.selectionEnd)}n("paste",t)}function v(t){if(!t||!t.target)return;if(e.type==="file"){n("update:modelValue",t.target.files);return}const x=t.target.value;if(t.target.qComposing===!0){u.value=x;return}if(N.value===!0)T(x,!1,t.inputType);else if(h(x),U.value===!0&&t.target===document.activeElement){const{selectionStart:W,selectionEnd:L}=t.target;W!==void 0&&L!==void 0&&te(()=>{t.target===document.activeElement&&x.indexOf(t.target.value)===0&&t.target.setSelectionRange(W,L)})}e.autogrow===!0&&w()}function C(t){n("animationend",t),w()}function h(t,x){y=()=>{k=null,e.type!=="number"&&u.hasOwnProperty("value")===!0&&delete u.value,e.modelValue!==t&&B!==t&&(B=t,x===!0&&(_=!0),n("update:modelValue",t),te(()=>{B===t&&(B=NaN)})),y=void 0},e.type==="number"&&(E=!0,u.value=t),e.debounce!==void 0?(k!==null&&clearTimeout(k),u.value=t,k=setTimeout(y,e.debounce)):y()}function w(){requestAnimationFrame(()=>{const t=p.value;if(t!==null){const x=t.parentNode.style,{scrollTop:W}=t,{overflowY:L,maxHeight:D}=l.platform.is.firefox===!0?{}:window.getComputedStyle(t),G=L!==void 0&&L!=="scroll";G===!0&&(t.style.overflowY="hidden"),x.marginBottom=t.scrollHeight-1+"px",t.style.height="1px",t.style.height=t.scrollHeight+"px",G===!0&&(t.style.overflowY=parseInt(D,10)<t.scrollHeight?"auto":"hidden"),x.marginBottom="",t.scrollTop=W}})}function Y(t){Q(t),k!==null&&(clearTimeout(k),k=null),y!==void 0&&y(),n("change",t.target.value)}function $(t){t!==void 0&&xe(t),k!==null&&(clearTimeout(k),k=null),y!==void 0&&y(),E=!1,_=!1,delete u.value,e.type!=="file"&&setTimeout(()=>{p.value!==null&&(p.value.value=m.value!==void 0?m.value:"")})}function S(){return u.hasOwnProperty("value")===!0?u.value:m.value!==void 0?m.value:""}mt(()=>{$()}),vt(()=>{e.autogrow===!0&&w()}),Object.assign(c,{innerValue:m,fieldClass:F(()=>`q-${b.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:F(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:p,emitValue:h,hasValue:z,floatingLabel:F(()=>z.value===!0&&(e.type!=="number"||isNaN(m.value)===!1)||Me(e.displayValue)),getControl:()=>ne(b.value===!0?"textarea":"input",{ref:p,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...a.value,...s.value,...e.type!=="file"?{value:S()}:j.value}),getShadowControl:()=>ne("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(b.value===!0?"":" text-no-wrap")},[ne("span",{class:"invisible"},S()),ne("span",e.shadowText)])});const O=gt(c);return Object.assign(f,{focus:i,select:o,getNativeElement:()=>p.value}),kt(f,"nativeEl",()=>p.value),O}}),Jt={class:"token-select"},Ht=["src"],Yt=["src"],an=De({__name:"SelectToken",props:{options:Object,searchToken:String,direction:{type:Boolean,default:!1},token:Object,swapToken:String,disable:{type:Boolean,default:!1}},emits:["handleSearchToken","setToken"],setup(e,{emit:n}){const r=e,f=n,l=X(r.searchToken),u=X(r.token??r.options[0]);K(()=>r.token,_=>{u.value=_});function B(){l.value=""}const E=F(()=>r.options.map(_=>({..._,inactive:re(String(_.value))===re(r.swapToken)})));return K(l,_=>{f("handleSearchToken",_)}),K(u,_=>{f("setToken",_,r.direction)}),(_,k)=>(ee(),ve("div",Jt,[V(_t,{modelValue:q(u),"onUpdate:modelValue":k[2]||(k[2]=y=>ke(u)?u.value=y:null),"option-disable":"inactive","popup-content-class":"transition-duration",outlined:"",options:q(E),dense:"","options-dense":!1,disable:e.disable,onPopupHide:B},{prepend:P(()=>[V(Ce,null,{default:P(()=>[ae("img",{src:q(u).image},null,8,Ht)]),_:1})]),option:P(y=>[V(Ee,pt(y.itemProps,{class:"token-select__token"}),{default:P(()=>[V(de,{avatar:"",class:"token-select__token--item"},{default:P(()=>[V(Ce,null,{default:P(()=>[ae("img",{src:y.opt.image},null,8,Yt)]),_:2},1024)]),_:2},1024),V(de,null,{default:P(()=>[V(wt,null,{default:P(()=>[ge(bt(y.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":P(()=>[V(Zt,{modelValue:q(l),"onUpdate:modelValue":k[1]||(k[1]=y=>ke(l)?l.value=y:null),maxlength:8,outlined:"",class:"token-search"},{append:P(()=>[V(St,{name:q(qe),class:"cursor-pointer token-search__close",onClick:k[0]||(k[0]=y=>l.value="")},null,8,["name"])]),_:1},8,["modelValue"]),V(Ee,null,{default:P(()=>[V(de,{class:"text-grey"},{default:P(()=>[ge(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"])]))}});export{Mt as P,Zt as Q,nn as _,an as a,en as b,Gt as o,tn as u};
