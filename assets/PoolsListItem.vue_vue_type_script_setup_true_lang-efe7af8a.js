import{V as D,y as M,t as j,v as y,b2 as Q,G as I,a3 as s,o as d,Y as L,Z as w,j as i,a1 as N,a2 as t,i as k,a4 as r,a5 as o,a0 as l,aU as p,a6 as _,aD as q,b3 as E,a8 as T,ay as W,aI as Y,$ as A,b4 as B,b5 as F}from"./index-ee4f1418.js";import{u as O}from"./swap-9623c50b.js";const R={class:"row"},U={class:"pool-card__icons row justify-center q-mr-md"},G=["src","alt"],z=["src","alt"],Z={class:"pool-card__subtitle row justify-center items-center"},H={key:0,class:"row q-mt-sm q-mb-auto q-pt-xs pool-card__stats"},J={class:"row col-6 q-mt-xs"},K={class:"row col-6 q-mt-xs"},X={class:"row col-6 q-mt-xs"},tt={class:"row col-6 q-mt-xs"},st={key:0,class:"q-py-md"},et={key:1,class:"row col-6 q-mt-xs"},ot={key:2,class:"row col-6 q-mt-xs"},at={key:1,class:"row q-mt-md"},lt={class:"col"},nt={class:"row items-center"},it={class:"pool-card__pubkey monoscaped"},ct={class:"row items-center"},dt={class:"pool-card__pubkey monoscaped"},rt={class:"row items-center"},ut={class:"pool-card__pubkey monoscaped"},mt={class:"row items-center"},kt={class:"pool-card__pubkey monoscaped"},pt={class:"row items-center q-mt-xs"},ft={class:"pool-card__pubkey"},yt={class:"row items-center q-mt-xs"},wt={class:"pool-card__pubkey"},bt=D({__name:"PoolsListItem",props:{pubkey:Object,data:Object,poolStats:Object,userTokens:Number,useEmit:Boolean},emits:["selectPool"],setup(e){const c=e,{connected:S}=M(),C=j(),x=y(()=>C.tokens),u=y(()=>x.value.find(a=>a.mint===c.data?.tokenAMint.toBase58())),m=y(()=>x.value.find(a=>a.mint===c.data?.tokenBMint.toBase58())),h=O(),P=Q();async function $(a=!1){u.value&&m.value&&c.pubkey&&c.data&&(h.state.from=u.value,h.state.to=m.value,await P.push(a?"liquidity":"/swap"),h.setTokenSwap({pubkey:c.pubkey,data:c.data}),console.log("[swap] swapAction: ",c.pubkey.toBase58()))}const g=y(()=>c.data?h.getPoolFee(c.data):{}),V=y(()=>g.value.ownerTrade+g.value.trade),v=I(!1);return(a,n)=>{const b=F;return e.pubkey&&e.data&&s(u)&&s(m)?(d(),L(A,{key:0,class:"pool-card",onClick:n[4]||(n[4]=f=>e.useEmit?a.$emit("selectPool"):void 0)},{default:w(()=>[i(N,{class:"pool-card__body full-height"},{default:w(()=>[t("div",R,[t("div",U,[s(u)?.image?(d(),k("img",{key:0,src:s(u)?.image,alt:s(u)?.symbol},null,8,G)):r("",!0),s(m)?.image?(d(),k("img",{key:1,src:s(m)?.image,alt:s(m)?.symbol},null,8,z)):r("",!0)]),t("div",Z,[t("span",null,o(s(u)?.symbol)+" / "+o(s(m)?.symbol),1)]),t("span",{class:"policy-info q-ml-auto",onClick:n[0]||(n[0]=f=>v.value=!0)}," i ")]),e.poolStats?(d(),k("div",H,[t("div",J,[l(" Liquidity:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(_)(e.poolStats.tvl,2)),3)]),t("div",K,[l(" Volume 24h:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(_)(e.poolStats.volume24,2)),3)]),t("div",X,[l(" Fees 24h:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(_)(e.poolStats.fees24,2)),3)]),t("div",tt,[l(" APR 24h:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},o(s(q).format(e.poolStats.apr24)),3)]),e.userTokens&&s(S)?(d(),k("div",st)):r("",!0),e.userTokens&&s(S)?(d(),k("div",et,[l(" Your Liquidity:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(_)(e.userTokens/e.poolStats.poolTokenSupply*e.poolStats.tvl,2)),3)])):r("",!0),e.userTokens&&s(S)?(d(),k("div",ot,[l(" Your share:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},o(s(q).format(e.userTokens/e.poolStats.poolTokenSupply)),3)])):r("",!0)])):r("",!0),e.useEmit?r("",!0):(d(),k("div",at,[t("div",lt,[i(E,{spread:""},{default:w(()=>[i(T,{label:"ADD LIQUIDITY",color:"warning","text-color":"#282828",target:"_blank",onClick:n[1]||(n[1]=f=>$(!0))}),i(T,{label:"SWAP",color:"primary","text-color":"white",target:"_blank",onClick:n[2]||(n[2]=f=>$(!1))})]),_:1})])]))]),_:1}),i(W,{modelValue:s(v),"onUpdate:modelValue":n[3]||(n[3]=f=>Y(v)?v.value=f:null),"transition-duration":"100","transition-show":"fade","transition-hide":"fade"},{default:w(()=>[i(A,{class:"q-pa-md"},{default:w(()=>[t("div",nt,[l(" Pool address:  "),t("span",null,[t("span",it,o(s(B)(e.pubkey.toBase58())),1),i(b,{text:e.pubkey.toBase58()},null,8,["text"])])]),t("div",ct,[l(" Token A mint:  "),t("span",null,[t("span",dt,o(s(B)(e.data.tokenAMint.toBase58())),1),i(b,{text:e.data.tokenAMint.toBase58()},null,8,["text"])])]),t("div",rt,[l(" Token B mint:  "),t("span",null,[t("span",ut,o(s(B)(e.data.tokenBMint.toBase58())),1),i(b,{text:e.data.tokenBMint.toBase58()},null,8,["text"])])]),t("div",mt,[l(" LP token mint:  "),t("span",null,[t("span",kt,o(s(B)(e.data.poolMint.toBase58())),1),i(b,{text:e.data.poolMint.toBase58()},null,8,["text"])])]),t("div",pt,[l(" Swap fee:  "),t("span",ft,o(s(q).format(s(V))),1)]),t("div",yt,[l(" Withdraw fee:  "),t("span",wt,o(s(q).format(s(g).ownerWithdraw)),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):r("",!0)}}});export{bt as _};
