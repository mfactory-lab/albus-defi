var Qe=Object.defineProperty;var Ze=(t,e,i)=>e in t?Qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var S=(t,e,i)=>(Ze(t,typeof e!="symbol"?e+"":e,i),i);import{_ as Ne,a as $e,b as qe}from"./AppDescriptionTop-a4f01eef.js";import{_ as De}from"./PolicyCard.vue_vue_type_script_setup_true_lang-26be2b3c.js";import{o as Re,_ as Ue}from"./SelectToken.vue_vue_type_script_setup_true_lang-46083fa1.js";import{k as a,bk as w,P as f,bf as _,as as I,am as Y,bq as He,K as ve,ah as P,aw as je,br as Oe,bs as Ge,bt as Xe,ae as _e,R as he,J as Ye,af as et,ag as tt,ai as it,a as Z,s as nt,u as Fe,x as ke,w as Je,B as rt,v as T,bu as Ke,C as X,bn as st,ba as at,bv as ot,aE as ct,z as ut,U as Pe,V as be,o as D,Y as N,Z as B,j as k,a1 as Ee,a2 as u,a3 as o,i as Q,a5 as h,a4 as ee,a0 as R,a6 as te,a7 as ie,a8 as ne,bw as Ce,a9 as Ve,$ as Se,G as lt,aV as Te,aK as Be,aW as mt,aX as dt,aY as Ie,aZ as ft,_ as pt,ad as yt}from"./index-4fce5852.js";import{c as gt,A as ht}from"./setAuthority-a4658d09.js";import"./internal-d64c23ea.js";const kt="/assets/unrecognized-token-3289de57.svg";function Me(t,e){if(e)return e[t]?.symbol??""}function re(t){return t??kt}const bt=[244,158,220,65,8,73,4,65];class K{constructor(e,i){this.authority=e,this.isPlatformPaused=i}static fromArgs(e){return new K(e.authority,e.isPlatformPaused)}static fromAccountInfo(e,i=0){return K.deserialize(e.data,i)}static async fromAccountAddress(e,i,n){const r=await e.getAccountInfo(i,n);if(r==null)throw new Error(`Unable to find Admin account at ${i}`);return K.fromAccountInfo(r,0)[0]}static gpaBuilder(e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return w.GpaBuilder.fromStruct(e,q)}static deserialize(e,i=0){return q.deserialize(e,i)}serialize(){return q.serialize({accountDiscriminator:bt,...this})}static get byteSize(){return q.byteSize}static async getMinimumBalanceForRentExemption(e,i){return e.getMinimumBalanceForRentExemption(K.byteSize,i)}static hasCorrectByteSize(e,i=0){return e.byteLength-i===K.byteSize}pretty(){return{authority:this.authority.toBase58(),isPlatformPaused:this.isPlatformPaused}}}const q=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",w.publicKey],["isPlatformPaused",a.bool]],K.fromArgs,"Admin"),St=[221,78,171,233,213,142,113,56];class E{constructor(e,i){this.authority=e,this.isAllPaused=i}static fromArgs(e){return new E(e.authority,e.isAllPaused)}static fromAccountInfo(e,i=0){return E.deserialize(e.data,i)}static async fromAccountAddress(e,i,n){const r=await e.getAccountInfo(i,n);if(r==null)throw new Error(`Unable to find Manager account at ${i}`);return E.fromAccountInfo(r,0)[0]}static gpaBuilder(e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return w.GpaBuilder.fromStruct(e,H)}static deserialize(e,i=0){return H.deserialize(e,i)}serialize(){return H.serialize({accountDiscriminator:St,...this})}static get byteSize(){return H.byteSize}static async getMinimumBalanceForRentExemption(e,i){return e.getMinimumBalanceForRentExemption(E.byteSize,i)}static hasCorrectByteSize(e,i=0){return e.byteLength-i===E.byteSize}pretty(){return{authority:this.authority.toBase58(),isAllPaused:this.isAllPaused}}}const H=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",w.publicKey],["isAllPaused",a.bool]],E.fromArgs,"Manager"),Ae=new a.BeetArgsStruct([["num",a.u64],["denom",a.u64]],"Ratio"),xe=[85,72,49,176,182,228,141,82];class C{constructor(e,i,n,r,s,c,l,m,d,b){this.authority=e,this.tokenA=i,this.tokenB=n,this.lockedAmount=r,this.ratio=s,this.isPaused=c,this.lockFee=l,this.unlockFee=m,this.feeReceiver=d,this.policy=b}static fromArgs(e){return new C(e.authority,e.tokenA,e.tokenB,e.lockedAmount,e.ratio,e.isPaused,e.lockFee,e.unlockFee,e.feeReceiver,e.policy)}static fromAccountInfo(e,i=0){return C.deserialize(e.data,i)}static async fromAccountAddress(e,i,n){const r=await e.getAccountInfo(i,n);if(r==null)throw new Error(`Unable to find Pair account at ${i}`);return C.fromAccountInfo(r,0)[0]}static gpaBuilder(e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return w.GpaBuilder.fromStruct(e,j)}static deserialize(e,i=0){return j.deserialize(e,i)}serialize(){return j.serialize({accountDiscriminator:xe,...this})}static byteSize(e){const i=C.fromArgs(e);return j.toFixedFromValue({accountDiscriminator:xe,...i}).byteSize}static async getMinimumBalanceForRentExemption(e,i,n){return i.getMinimumBalanceForRentExemption(C.byteSize(e),n)}pretty(){return{authority:this.authority.toBase58(),tokenA:this.tokenA.toBase58(),tokenB:this.tokenB.toBase58(),lockedAmount:(()=>{const e=this.lockedAmount;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),ratio:this.ratio,isPaused:this.isPaused,lockFee:this.lockFee,unlockFee:this.unlockFee,feeReceiver:this.feeReceiver.toBase58(),policy:this.policy}}}const j=new a.FixableBeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",w.publicKey],["tokenA",w.publicKey],["tokenB",w.publicKey],["lockedAmount",a.u64],["ratio",Ae],["isPaused",a.bool],["lockFee",a.u16],["unlockFee",a.u16],["feeReceiver",w.publicKey],["policy",a.coption(w.publicKey)]],C.fromArgs,"Pair"),At=[159,117,95,227,239,151,58,236];class V{constructor(e,i){this.authority=e,this.isBlocked=i}static fromArgs(e){return new V(e.authority,e.isBlocked)}static fromAccountInfo(e,i=0){return V.deserialize(e.data,i)}static async fromAccountAddress(e,i,n){const r=await e.getAccountInfo(i,n);if(r==null)throw new Error(`Unable to find User account at ${i}`);return V.fromAccountInfo(r,0)[0]}static gpaBuilder(e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return w.GpaBuilder.fromStruct(e,O)}static deserialize(e,i=0){return O.deserialize(e,i)}serialize(){return O.serialize({accountDiscriminator:At,...this})}static get byteSize(){return O.byteSize}static async getMinimumBalanceForRentExemption(e,i){return e.getMinimumBalanceForRentExemption(V.byteSize,i)}static hasCorrectByteSize(e,i=0){return e.byteLength-i===V.byteSize}pretty(){return{authority:this.authority.toBase58(),isBlocked:this.isBlocked}}}const O=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",w.publicKey],["isBlocked",a.bool]],V.fromArgs,"User"),wt=[17,50,115,0,10,220,15,157];class L{constructor(e,i){this.user=e,this.pair=i}static fromArgs(e){return new L(e.user,e.pair)}static fromAccountInfo(e,i=0){return L.deserialize(e.data,i)}static async fromAccountAddress(e,i,n){const r=await e.getAccountInfo(i,n);if(r==null)throw new Error(`Unable to find WhitelistedUserInfo account at ${i}`);return L.fromAccountInfo(r,0)[0]}static gpaBuilder(e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return w.GpaBuilder.fromStruct(e,G)}static deserialize(e,i=0){return G.deserialize(e,i)}serialize(){return G.serialize({accountDiscriminator:wt,...this})}static get byteSize(){return G.byteSize}static async getMinimumBalanceForRentExemption(e,i){return e.getMinimumBalanceForRentExemption(L.byteSize,i)}static hasCorrectByteSize(e,i=0){return e.byteLength-i===L.byteSize}pretty(){return{user:this.user.toBase58(),pair:this.pair.toBase58()}}}const G=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["user",w.publicKey],["pair",w.publicKey]],L.fromArgs,"WhitelistedUserInfo"),U=new Map,F=new Map;class oe extends Error{constructor(){super("Unauthorized action");S(this,"code",6e3);S(this,"name","Unauthorized");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,oe)}}U.set(6e3,()=>new oe);F.set("Unauthorized",()=>new oe);class ce extends Error{constructor(){super("Paused");S(this,"code",6001);S(this,"name","IsPaused");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ce)}}U.set(6001,()=>new ce);F.set("IsPaused",()=>new ce);class ue extends Error{constructor(){super("Already resumed");S(this,"code",6002);S(this,"name","AlreadyResumed");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ue)}}U.set(6002,()=>new ue);F.set("AlreadyResumed",()=>new ue);class le extends Error{constructor(){super("Pair still have locked tokens");S(this,"code",6003);S(this,"name","StillRemainingLockedTokens");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,le)}}U.set(6003,()=>new le);F.set("StillRemainingLockedTokens",()=>new le);class me extends Error{constructor(){super("User is blocked");S(this,"code",6004);S(this,"name","IsBlocked");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,me)}}U.set(6004,()=>new me);F.set("IsBlocked",()=>new me);class de extends Error{constructor(){super("User is already unblocked");S(this,"code",6005);S(this,"name","AlreadyUnblocked");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,de)}}U.set(6005,()=>new de);F.set("AlreadyUnblocked",()=>new de);class fe extends Error{constructor(){super("Insufficient locked amount");S(this,"code",6006);S(this,"name","InsufficientLockedAmount");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe)}}U.set(6006,()=>new fe);F.set("InsufficientLockedAmount",()=>new fe);class pe extends Error{constructor(){super("Insufficient funds");S(this,"code",6007);S(this,"name","InsufficientFunds");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pe)}}U.set(6007,()=>new pe);F.set("InsufficientFunds",()=>new pe);const vt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["key",w.publicKey]],"AddManagerInstructionArgs"),_t=[125,38,192,212,101,91,179,16];function Pt(t,e,i=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[n]=vt.serialize({instructionDiscriminator:_t,...e}),r=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.admin,isWritable:!1,isSigner:!1},{pubkey:t.manager,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)r.push(c);return new I({programId:i,keys:r,data:n})}const Tt=new a.FixableBeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["policy",a.coption(w.publicKey)],["ratio",Ae]],"AddPairInstructionArgs"),Bt=[209,230,17,236,218,162,86,118];function It(t,e,i=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[n]=Tt.serialize({instructionDiscriminator:Bt,...e}),r=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.manager,isWritable:!1,isSigner:!1},{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.pairAuthority,isWritable:!1,isSigner:!1},{pubkey:t.tokenA,isWritable:!0,isSigner:!1},{pubkey:t.tokenB,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)r.push(c);return new I({programId:i,keys:r,data:n})}const Mt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"AddUserToWhitelistInstructionArgs"),xt=[244,177,124,12,22,50,139,152];function zt(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=Mt.serialize({instructionDiscriminator:xt}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.manager,isWritable:!1,isSigner:!1},{pubkey:t.user,isWritable:!0,isSigner:!1},{pubkey:t.userAuthority,isWritable:!1,isSigner:!1},{pubkey:t.whitelistedUserInfo,isWritable:!0,isSigner:!1},{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.tokenA,isWritable:!0,isSigner:!1},{pubkey:t.tokenB,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const Wt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"BlockUserInstructionArgs"),Dt=[10,164,178,6,231,175,185,191];function Rt(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=Wt.serialize({instructionDiscriminator:Dt}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.manager,isWritable:!1,isSigner:!1},{pubkey:t.user,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const Ut=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["amount",a.u64]],"LockTokensInstructionArgs"),Ft=[136,11,32,232,161,117,54,211];function Jt(t,e,i=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[n]=Ut.serialize({instructionDiscriminator:Ft,...e}),r=[{pubkey:t.proofRequest??i,isWritable:!1,isSigner:!1},{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.pairAuthority,isWritable:!1,isSigner:!1},{pubkey:t.user,isWritable:!1,isSigner:!1},{pubkey:t.userAuthority,isWritable:!0,isSigner:!0},{pubkey:t.whitelistedUserInfo,isWritable:!1,isSigner:!1},{pubkey:t.admin,isWritable:!1,isSigner:!1},{pubkey:t.manager,isWritable:!1,isSigner:!1},{pubkey:t.tokenA,isWritable:!0,isSigner:!1},{pubkey:t.tokenB,isWritable:!0,isSigner:!1},{pubkey:t.sourceA,isWritable:!0,isSigner:!1},{pubkey:t.destinationA,isWritable:!0,isSigner:!1},{pubkey:t.destinationB,isWritable:!0,isSigner:!1},{pubkey:t.feePayer,isWritable:!0,isSigner:!0},{pubkey:t.feeReceiver,isWritable:!0,isSigner:!1},{pubkey:t.tokenProgram??Y,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)r.push(c);return new I({programId:i,keys:r,data:n})}const Kt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"PausePairsInstructionArgs"),Et=[147,150,152,192,119,95,137,64];function Ct(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=Kt.serialize({instructionDiscriminator:Et}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.manager,isWritable:!0,isSigner:!1},{pubkey:t.admin,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const Vt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"PausePlatformInstructionArgs"),Lt=[232,46,204,130,181,0,172,57];function Qt(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=Vt.serialize({instructionDiscriminator:Lt}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.admin,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const Zt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"RemoveManagerInstructionArgs"),Nt=[150,55,157,77,128,148,7,15];function $t(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=Zt.serialize({instructionDiscriminator:Nt}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.manager,isWritable:!0,isSigner:!1},{pubkey:t.admin,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const qt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"RemovePairInstructionArgs"),Ht=[181,42,154,249,167,123,20,81];function jt(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=qt.serialize({instructionDiscriminator:Ht}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const Ot=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"RemoveUserFromWhitelistInstructionArgs"),Gt=[198,73,139,218,243,209,180,182];function Xt(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=Ot.serialize({instructionDiscriminator:Gt}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.whitelistedUserInfo,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const Yt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"ResumePairsInstructionArgs"),ei=[23,106,248,226,173,20,247,74];function ti(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=Yt.serialize({instructionDiscriminator:ei}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.manager,isWritable:!0,isSigner:!1},{pubkey:t.admin,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const ii=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"ResumePlatformInstructionArgs"),ni=[23,162,56,123,186,207,109,131];function ri(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=ii.serialize({instructionDiscriminator:ni}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.admin,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const si=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["key",w.publicKey]],"SetAdminInstructionArgs"),ai=[251,163,0,52,91,194,187,92];function oi(t,e,i=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[n]=si.serialize({instructionDiscriminator:ai,...e}),r=[{pubkey:t.admin,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)r.push(c);return new I({programId:i,keys:r,data:n})}const ci=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"UnblockUserInstructionArgs"),ui=[216,208,128,98,74,210,18,114];function li(t,e=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[i]=ci.serialize({instructionDiscriminator:ui}),n=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.manager,isWritable:!1,isSigner:!1},{pubkey:t.user,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const s of t.anchorRemainingAccounts)n.push(s);return new I({programId:e,keys:n,data:i})}const mi=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["amount",a.u64]],"UnlockTokensInstructionArgs"),di=[233,35,95,159,37,185,47,88];function fi(t,e,i=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[n]=mi.serialize({instructionDiscriminator:di,...e}),r=[{pubkey:t.proofRequest??i,isWritable:!1,isSigner:!1},{pubkey:t.user,isWritable:!1,isSigner:!1},{pubkey:t.userAuthority,isWritable:!0,isSigner:!0},{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.pairAuthority,isWritable:!1,isSigner:!1},{pubkey:t.whitelistedUserInfo,isWritable:!1,isSigner:!1},{pubkey:t.manager,isWritable:!1,isSigner:!1},{pubkey:t.admin,isWritable:!1,isSigner:!1},{pubkey:t.tokenA,isWritable:!0,isSigner:!1},{pubkey:t.tokenB,isWritable:!0,isSigner:!1},{pubkey:t.sourceA,isWritable:!0,isSigner:!1},{pubkey:t.destinationA,isWritable:!0,isSigner:!1},{pubkey:t.sourceB,isWritable:!0,isSigner:!1},{pubkey:t.feePayer,isWritable:!0,isSigner:!0},{pubkey:t.feeReceiver,isWritable:!0,isSigner:!1},{pubkey:t.tokenProgram??Y,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)r.push(c);return new I({programId:i,keys:r,data:n})}const pi=new a.FixableBeetArgsStruct([["newAuthority",a.coption(w.publicKey)],["isPaused",a.coption(a.bool)],["ratio",a.coption(Ae)],["lockFee",a.coption(a.u16)],["unlockFee",a.coption(a.u16)],["feeReceiver",a.coption(w.publicKey)]],"UpdatePairData"),yi=new a.FixableBeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["data",pi]],"UpdatePairInstructionArgs"),gi=[176,62,36,215,255,206,35,12];function hi(t,e,i=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[n]=yi.serialize({instructionDiscriminator:gi,...e}),r=[{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)r.push(c);return new I({programId:i,keys:r,data:n})}const ki=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["amount",a.u64]],"WithdrawFeeInstructionArgs"),bi=[14,122,231,218,31,238,223,150];function Si(t,e,i=new f("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[n]=ki.serialize({instructionDiscriminator:bi,...e}),r=[{pubkey:t.pair,isWritable:!0,isSigner:!1},{pubkey:t.pairAuthority,isWritable:!0,isSigner:!1},{pubkey:t.destination,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.systemProgram??_.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)r.push(c);return new I({programId:i,keys:r,data:n})}const Ai="JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm",ze=new f(Ai),wi={version:"0.0.6",name:"smart_converter",instructions:[{name:"setAdmin",accounts:[{name:"admin",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"key",type:"publicKey"}]},{name:"addManager",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"admin",isMut:!1,isSigner:!1},{name:"manager",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"key",type:"publicKey"}]},{name:"addPair",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!1,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"policy",type:{option:"publicKey"}},{name:"ratio",type:{defined:"Ratio"}}]},{name:"addUserToWhitelist",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"user",isMut:!0,isSigner:!1},{name:"userAuthority",isMut:!1,isSigner:!1},{name:"whitelistedUserInfo",isMut:!0,isSigner:!1},{name:"pair",isMut:!0,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"removeUserFromWhitelist",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"whitelistedUserInfo",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"pausePlatform",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"admin",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"resumePlatform",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"admin",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"lockTokens",accounts:[{name:"proofRequest",isMut:!1,isSigner:!1,isOptional:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!1,isSigner:!1},{name:"user",isMut:!1,isSigner:!1},{name:"userAuthority",isMut:!0,isSigner:!0},{name:"whitelistedUserInfo",isMut:!1,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"manager",isMut:!1,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"sourceA",isMut:!0,isSigner:!1},{name:"destinationA",isMut:!0,isSigner:!1},{name:"destinationB",isMut:!0,isSigner:!1},{name:"feePayer",isMut:!0,isSigner:!0},{name:"feeReceiver",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"unlockTokens",accounts:[{name:"proofRequest",isMut:!1,isSigner:!1,isOptional:!0},{name:"user",isMut:!1,isSigner:!1},{name:"userAuthority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!1,isSigner:!1},{name:"whitelistedUserInfo",isMut:!1,isSigner:!1},{name:"manager",isMut:!1,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"sourceA",isMut:!0,isSigner:!1},{name:"destinationA",isMut:!0,isSigner:!1},{name:"sourceB",isMut:!0,isSigner:!1},{name:"feePayer",isMut:!0,isSigner:!0},{name:"feeReceiver",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"removeManager",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"pausePairs",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"resumePairs",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"removePair",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updatePair",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"UpdatePairData"}}]},{name:"blockUser",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"user",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"unblockUser",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"user",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"withdrawFee",accounts:[{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]}],accounts:[{name:"pair",type:{kind:"struct",fields:[{name:"authority",docs:["Manager authority"],type:"publicKey"},{name:"tokenA",docs:["Security token mint address"],type:"publicKey"},{name:"tokenB",docs:["Utility token mint address"],type:"publicKey"},{name:"lockedAmount",docs:["Amount of security tokens currently locked"],type:"u64"},{name:"ratio",docs:["Ratio of token A to token B"],type:{defined:"Ratio"}},{name:"isPaused",docs:["Indicates if pair is paused or not"],type:"bool"},{name:"lockFee",docs:["Fee for locking token A"],type:"u16"},{name:"unlockFee",docs:["Fee for unlocking token A"],type:"u16"},{name:"feeReceiver",docs:["Wallet that will receive fee"],type:"publicKey"},{name:"policy",docs:["Albus policy"],type:{option:"publicKey"}}]}},{name:"admin",type:{kind:"struct",fields:[{name:"authority",docs:["Manager wallet address"],type:"publicKey"},{name:"isPlatformPaused",docs:["Indicates if platform is paused or not"],type:"bool"}]}},{name:"manager",type:{kind:"struct",fields:[{name:"authority",docs:["Manager address"],type:"publicKey"},{name:"isAllPaused",docs:["Indicates if manager's pairs are paused or not"],type:"bool"}]}},{name:"user",type:{kind:"struct",fields:[{name:"authority",docs:["User address"],type:"publicKey"},{name:"isBlocked",docs:["Indicates if user is blocked or not"],type:"bool"}]}},{name:"whitelistedUserInfo",type:{kind:"struct",fields:[{name:"user",docs:["User address"],type:"publicKey"},{name:"pair",docs:["Pair address"],type:"publicKey"}]}}],types:[{name:"UpdatePairData",type:{kind:"struct",fields:[{name:"newAuthority",type:{option:"publicKey"}},{name:"isPaused",type:{option:"bool"}},{name:"ratio",type:{option:{defined:"Ratio"}}},{name:"lockFee",type:{option:"u16"}},{name:"unlockFee",type:{option:"u16"}},{name:"feeReceiver",type:{option:"publicKey"}}]}},{name:"Ratio",type:{kind:"struct",fields:[{name:"num",type:"u64"},{name:"denom",type:"u64"}]}}],events:[{name:"LockTokensEvent",fields:[{name:"pair",type:"publicKey",index:!0},{name:"user",type:"publicKey",index:!1},{name:"userAuthority",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"UnlockTokensEvent",fields:[{name:"pair",type:"publicKey",index:!0},{name:"user",type:"publicKey",index:!1},{name:"userAuthority",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]}],errors:[{code:6e3,name:"Unauthorized",msg:"Unauthorized action"},{code:6001,name:"IsPaused",msg:"Paused"},{code:6002,name:"AlreadyResumed",msg:"Already resumed"},{code:6003,name:"StillRemainingLockedTokens",msg:"Pair still have locked tokens"},{code:6004,name:"IsBlocked",msg:"User is blocked"},{code:6005,name:"AlreadyUnblocked",msg:"User is already unblocked"},{code:6006,name:"InsufficientLockedAmount",msg:"Insufficient locked amount"},{code:6007,name:"InsufficientFunds",msg:"Insufficient funds"}]};function We(t){return"version"in t}class vi{constructor(e){this.payer=e}async signTransaction(e){return We(e)?e.sign([this.payer]):e.partialSign(this.payer),e}async signAllTransactions(e){return e.map(i=>(We(i)?i.sign([this.payer]):i.partialSign(this.payer),i))}get publicKey(){return this.payer.publicKey}}const _i="user",Pi="manager",Ti="pair",Bi="admin",Ii="whitelist",ae=class ae{constructor(e){S(this,"program");this.provider=e,this.program=new He(wi,ze,e)}static fromWallet(e,i,n){return new this(new ve(e,i??{publicKey:f.default},{...ve.defaultOptions(),...n}))}static fromKeypair(e,i,n){return ae.fromWallet(e,new vi(i),n)}get idl(){return this.program.idl}get pda(){return new Mi}fetchManager(e){return this.program.account.manager.fetchNullable(e)}fetchAdmin(e){return this.program.account.admin.fetchNullable(e??this.pda.admin()[0])}fetchUser(e){return this.program.account.user.fetchNullable(e)}fetchPair(e){return this.program.account.pair.fetchNullable(e)}fetchWhitelistedUserInfo(e){return this.program.account.whitelistedUserInfo.fetchNullable(e)}fetchWhitelistedUserInfoByUserAndPair(e,i){const[n]=this.pda.whitelistedUserInfo(e,i);return this.fetchWhitelistedUserInfo(n)}findManagers(){return this.program.account.manager.all()}findPairs(){return this.program.account.pair.all()}async findManagerPairs(e){return(await this.program.account.pair.all()).filter(n=>n.account.authority.toBase58()===e.toBase58())}async findWhitelistedUsers(e){return(await this.program.account.whitelistedUserInfo.all()).filter(n=>n.account.pair.toBase58()===e.toBase58())}async findUserWhitelistInfos(e){return(await this.program.account.whitelistedUserInfo.all()).filter(n=>n.account.user.toBase58()===e.toBase58())}async addManager(e){const i=this.provider.publicKey,[n]=this.pda.manager(e.managerWallet),[r]=this.pda.admin(),s=Pt({authority:i,admin:r,manager:n},{key:e.managerWallet}),c=new P().add(s);return{signature:await this.provider.sendAndConfirm(c),manager:n}}async addPair(e){const i=this.provider.publicKey,[n]=this.pda.manager(i),r=e.tokenA;let s=e.tokenB;const c=new P,l=[];let m,d;if(s)m=this.pda.pair(r,s)[0],d=this.pda.pairAuthority(m)[0],c.add(gt(s,this.provider.publicKey,ht.MintTokens,d));else{const g=e.tokenBKeypair??je.generate();s=g.publicKey,l.push(g),m=this.pda.pair(r,s)[0],d=this.pda.pairAuthority(m)[0];const y=await Oe(this.provider.connection);c.add(_.createAccount({fromPubkey:i,newAccountPubkey:g.publicKey,space:Ge,lamports:y,programId:Y}),Xe(g.publicKey,9,d,null,Y))}return await this.handleMissingTokenAccount(c,r,d),await this.handleMissingTokenAccount(c,s,d),c.add(It({authority:i,manager:n,pair:m,pairAuthority:d,tokenA:r,tokenB:s},{ratio:e.ratio??{num:1,denom:1},policy:e.policy??null})),{signature:await this.provider.sendAndConfirm(c,l),pair:m}}async lockTokens(e){const i=this.provider.publicKey,n=e.tokenA,r=e.tokenB,[s]=this.pda.user(i),[c]=this.pda.pair(n,r),l=await this.fetchPair(c),[m]=this.pda.admin(),[d]=this.pda.manager(l.authority),[b]=this.pda.pairAuthority(c),[g]=this.pda.whitelistedUserInfo(i,c),y=new P,A=_e(n,i),W=await this.handleMissingTokenAccount(y,n,b),p=await this.handleMissingTokenAccount(y,r,i);return y.add(Jt({proofRequest:e.proofRequest,user:s,userAuthority:i,pair:c,pairAuthority:b,admin:m,manager:d,whitelistedUserInfo:g,feePayer:e.feePayer??i,feeReceiver:l.feeReceiver,sourceA:A,destinationA:W,destinationB:p,tokenA:n,tokenB:r},{amount:new he(e.amount)})),{signature:await this.provider.sendAndConfirm(y),pair:c}}async unlockTokens(e){const i=this.provider.publicKey,n=e.tokenA,r=e.tokenB,[s]=this.pda.admin(),[c]=this.pda.user(i),[l]=this.pda.pair(n,r),[m]=this.pda.pairAuthority(l),[d]=this.pda.whitelistedUserInfo(i,l),b=await this.fetchPair(l),[g]=this.pda.manager(b.authority),y=new P,A=await this.handleMissingTokenAccount(y,r,i),W=await this.handleMissingTokenAccount(y,n,m),p=await this.handleMissingTokenAccount(y,n,i);return y.add(fi({proofRequest:e.proofRequest,user:c,userAuthority:i,pair:l,pairAuthority:m,feePayer:e.feePayer??i,feeReceiver:b.feeReceiver,whitelistedUserInfo:d,admin:s,destinationA:p,manager:g,sourceA:W,sourceB:A,tokenA:n,tokenB:r},{amount:new he(e.amount)})),{signature:await this.provider.sendAndConfirm(y),pair:l,user:c}}async addUserToWhitelist(e){const i=this.provider.publicKey,[n]=this.pda.manager(i),r=e.userWallet,[s]=this.pda.user(r),c=e.tokenA,l=e.tokenB,[m]=this.pda.pair(c,l),[d]=this.pda.whitelistedUserInfo(r,m),b=zt({userAuthority:r,authority:i,manager:n,pair:m,tokenA:c,tokenB:l,user:s,whitelistedUserInfo:d}),g=new P().add(b);return{signature:await this.provider.sendAndConfirm(g),user:s,whitelistedUserInfo:d}}async removeUserFromWhitelist(e){const i=this.provider.publicKey,n=e.userWallet,[r]=this.pda.user(n),[s]=this.pda.pair(e.tokenA,e.tokenB),[c]=this.pda.whitelistedUserInfo(n,s),l=Xt({authority:i,pair:s,whitelistedUserInfo:c}),m=new P().add(l);return{signature:await this.provider.sendAndConfirm(m),user:r,whitelistedUserInfo:c}}async blockUser(e){const i=this.provider.publicKey,[n]=this.pda.manager(i),r=e.userWallet,[s]=this.pda.user(r),c=Rt({authority:i,manager:n,user:s}),l=new P().add(c);return{signature:await this.provider.sendAndConfirm(l),user:s}}async unblockUser(e){const i=this.provider.publicKey,n=e.userWallet,[r]=this.pda.manager(i),[s]=this.pda.user(n),c=li({authority:i,manager:r,user:s}),l=new P().add(c);return{signature:await this.provider.sendAndConfirm(l),user:s}}async pausePairs(e){const i=this.provider.publicKey,n=e.managerWallet,[r]=this.pda.manager(n),[s]=this.pda.admin(),c=Ct({admin:s,authority:i,manager:r}),l=new P().add(c);return{signature:await this.provider.sendAndConfirm(l),manager:r}}async pausePlatform(){const e=this.provider.publicKey,[i]=this.pda.admin(),n=Qt({admin:i,authority:e}),r=new P().add(n);return{signature:await this.provider.sendAndConfirm(r),admin:i}}async removeManager(e){const i=this.provider.publicKey,n=e.managerWallet,[r]=this.pda.manager(n),[s]=this.pda.admin(),c=$t({admin:s,authority:i,manager:r}),l=new P().add(c);return{signature:await this.provider.sendAndConfirm(l),manager:r}}async removePair(e){const i=this.provider.publicKey,n=e.tokenA,r=e.tokenB,[s]=this.pda.pair(n,r),c=jt({authority:i,pair:s}),l=new P().add(c);return{signature:await this.provider.sendAndConfirm(l),pair:s}}async resumePairs(e){const i=this.provider.publicKey,n=e.managerWallet,[r]=this.pda.manager(n),[s]=this.pda.admin(),c=ti({authority:i,admin:s,manager:r}),l=new P().add(c);return{signature:await this.provider.sendAndConfirm(l),manager:r}}async resumePlatform(){const e=this.provider.publicKey,[i]=this.pda.admin(),n=ri({authority:e,admin:i}),r=new P().add(n);return{signature:await this.provider.sendAndConfirm(r),admin:i}}async setAdmin(e){const i=this.provider.publicKey,[n]=this.pda.admin(),r=oi({authority:i,admin:n},{key:e.authority}),s=new P().add(r);return{signature:await this.provider.sendAndConfirm(s)}}async withdrawFee(e){const i=this.provider.publicKey,[n]=this.pda.pair(e.tokenA,e.tokenB),[r]=this.pda.pairAuthority(n),s=Si({authority:i,pair:n,pairAuthority:r,destination:e.destination},{amount:new he(e.amount)}),c=new P().add(s);return{signature:await this.provider.sendAndConfirm(c)}}async updatePair(e){const i=this.provider.publicKey,n=e.tokenA,r=e.tokenB,[s]=this.pda.pair(n,r),c=hi({authority:i,pair:s},{data:{feeReceiver:e.feeReceiver??null,lockFee:e.lockFee??null,unlockFee:e.unlockFee??null,newAuthority:e.newAuthority??null,isPaused:e.isPaused??null,ratio:e.ratio??null}}),l=new P().add(c);return{signature:await this.provider.sendAndConfirm(l),pair:s}}async handleMissingTokenAccount(e,i,n){const r=n??this.provider.publicKey,s=_e(i,r,!0);try{await Ye(this.provider.connection,s)}catch(c){(c instanceof et||c instanceof tt)&&e.add(it(this.provider.publicKey,s,r,i))}return s}};S(ae,"programId",ze);let se=ae;class Mi{constructor(){S(this,"pairAuthority",e=>this.pda([new f(e).toBuffer()]));S(this,"admin",()=>this.pda([Z.Buffer.from(Bi)]));S(this,"manager",e=>this.pda([Z.Buffer.from(Pi),new f(e).toBuffer()]));S(this,"user",e=>this.pda([Z.Buffer.from(_i),new f(e).toBuffer()]));S(this,"pair",(e,i)=>this.pda([Z.Buffer.from(Ti),new f(e).toBuffer(),new f(i).toBuffer()]));S(this,"whitelistedUserInfo",(e,i)=>this.pda([Z.Buffer.from(Ii),new f(e).toBuffer(),new f(i).toBuffer()]))}pda(e){return f.findProgramAddressSync(e,se.programId)}}const we=nt("converter",()=>{const t=Fe(),e=ke(),{setContractPolicy:i}=Je(),n=rt({from:{amount:void 0},to:{amount:void 0},token:void 0,allTokens:[],pairs:[],selectedPair:void 0,searchToken:"",converting:!1,loading:!1,isLock:!0}),r=T(()=>se.fromWallet(t.connection,e.value));async function s(m,d,b){try{const g=await at.Metadata.fromAccountAddress(m,ot(d)),y=g.data?.uri;if(y){const{data:A}=await ct.get(y);return{...A,image:re(A?.image)}}return g}catch{return{symbol:b,image:re()}}}const c=m=>n.allTokens.find(b=>b.mint.toBase58()===m)?.balance??0,l=async()=>{try{const m=e.value?.publicKey;if(!m)return;n.allTokens=await st(t.connection,m)}catch(m){console.log(m)}};return Ke(r,async m=>{try{n.loading=!0;const d=await r.value.findPairs();if(n.pairs.length!==0)return;const b=await Promise.all(d.map(async g=>{const y=g.account,A=y.tokenA.toBase58(),W=y.tokenB.toBase58(),p=await s(t.connection,A,"tokenA"),M=await s(t.connection,W,"tokenB"),v={[A]:p,[W]:M};return{...g,tokensMetadata:v}}));n.pairs=b}catch(d){console.log(d)}finally{n.loading=!1}},{immediate:!0,debounce:500,maxWait:1e3}),X(()=>e.value?.publicKey,async m=>{if(!m){n.allTokens=[],n.from.balance=0,n.to.balance=0;return}await l()},{immediate:!0}),X([()=>n.token,()=>n.allTokens,()=>n.pairs],([m])=>{const d=n.selectedPair;if(!d)return;const b=d.account?.policy;b&&i(String(b));for(const g in d.tokensMetadata){const y=d.tokensMetadata[g],A=c(String(g));g===m?.mint?n.from={...y,balance:A,amount:void 0}:n.to={...y,balance:A,amount:void 0}}}),X(()=>n.isLock,()=>{n.token=void 0}),{state:n,getAllTokens:l,converterClient:r}});function Le(){const t=we(),e=Je(),i=Fe(),{notify:n}=ut();function r(p){console.log("set token ======== ",p),t.state.selectedPair=t.state.pairs.find(M=>M.publicKey.toBase58()===p?.publicKey?.toBase58()),t.state.token=p}function s(p){t.state.searchToken=p}const c=T(()=>t.state.pairs.map(v=>{const z=Object.entries(v.tokensMetadata)[t.state.isLock?0:1];return{...z[1],mint:z[0],publicKey:v.publicKey}}).flat().filter(v=>v.symbol.toLowerCase().includes(t.state.searchToken.toLowerCase()))),l=T(()=>t.state.selectedPair?.account),m=T(()=>l.value?.ratio?.num?.toNumber()??1),d=T(()=>l.value?.lockedAmount?.toNumber()/Pe),b=T(()=>l.value?.lockFee),g=T(()=>{const p=l.value?.tokenA?.toString();return Me(p,t.state.selectedPair?.tokensMetadata)}),y=T(()=>{const p=l.value?.tokenB?.toString();return Me(p,t.state.selectedPair?.tokensMetadata)}),A=T(()=>!!e.state.certificates?.find(p=>p.data?.policy.toBase58()===String(e.requiredPolicy)));async function W(p=!0){const M=e.state.certificates?.find(v=>v.data?.policy.toBase58()===String(e.requiredPolicy))?.pubkey;if(!(!l.value||!M))try{t.state.converting=!0;const v=l.value.tokenA,z=l.value.tokenB,$=Number(t.state.from.amount*Pe);let x;p?x=await t.converterClient.lockTokens({tokenA:v,tokenB:z,amount:$,proofRequest:M}):x=await t.converterClient.unlockTokens({tokenA:v,tokenB:z,amount:$,proofRequest:M}),console.log(x),n({message:"Transaction confirmed",type:"positive",actions:[{label:"Explore",color:"white",target:"_blank",href:`https://explorer.solana.com/tx/${x.signature}?cluster=${i.cluster}`,onClick:()=>!1}]}),await t.getAllTokens()}catch(v){console.error("lockedToken error: ",v),n({type:"negative",message:`${v}`})}finally{t.state.converting=!1}}return Ke(c,p=>{p.length!==0&&!t.state.token&&r(p[0])},{immediate:!0,debounce:100,maxWait:1e3}),X(()=>t.state.from.amount,p=>{p&&(t.state.to.amount=t.state.isLock?p*m.value:p/m.value)}),{options:c,setToken:r,handleSearchToken:s,pairRatio:m,pairLockedAmount:d,pairLockFee:b,tokenASymbol:g,tokenBSymbol:y,isHaveCertificate:A,lockUnlockToken:W}}const xi={class:"swap-form"},zi={class:"swap-field"},Wi={class:"swap-field__info"},Di={class:"row items-end"},Ri=u("div",{class:"col swap-field__label"}," FROM: ",-1),Ui={class:"col-8 col-xs-10 row justify-end swap-field__balance"},Fi={key:0,class:"insufficient-error"},Ji=u("div",{class:"swap-change"},null,-1),Ki={class:"swap-field"},Ei={class:"swap-field__info"},Ci={class:"row"},Vi=u("div",{class:"col swap-field__label"}," TO: ",-1),Li={class:"col swap-field__balance"},Qi={class:"convert-to"},Zi=["src"],Ni={class:"swap-info q-mt-md q-pt-xs"},$i={class:"text-weight-medium"},qi=u("dt",null,"Received",-1),Hi=u("dt",null,"Locked amount",-1),ji=u("dt",null,"Ratio",-1),Oi={key:0},Gi={key:1},Xi=u("dt",null,"Lock fee",-1),Yi={class:"swap-submit q-mt-md"},en={class:"row q-mt-md text-center relative-position full-width"},tn={class:"swap-rate q-mx-auto"},nn=be({__name:"UnlockCard",setup(t){const{state:e}=we(),{options:i,setToken:n,handleSearchToken:r,pairRatio:s,pairLockedAmount:c,pairLockFee:l,tokenASymbol:m,tokenBSymbol:d,isHaveCertificate:b,lockUnlockToken:g}=Le();e.isLock=!1;const y=ke(),A=T(()=>e.from.balance),W=T(()=>e.to.balance),p=T(()=>e.to.amount);function M(){e.from.amount=A.value}async function v(){await g(!1)}const z=T(()=>e.from.amount>A.value?"Insufficient funds":!1);return($,x)=>{const ye=Ue,ge=De;return D(),N(Se,{class:"swap-card swap-widget converting-card"},{default:B(()=>[k(Ee,{class:"swap-card__body"},{default:B(()=>[u("div",xi,[u("div",zi,[u("div",Wi,[u("div",Di,[Ri,u("div",Ui,[o(z)?(D(),Q("div",Fi,h(o(z)),1)):ee("",!0),R(" Balance: "+h(o(te)(o(A))),1)])])]),k(ie,{modelValue:o(e).from.amount,"onUpdate:modelValue":x[0]||(x[0]=J=>o(e).from.amount=J),maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input",onKeypress:o(Re)},{append:B(()=>[k(ne,{dense:"",unelevated:"",ripple:!1,class:"swap-input__max",onClick:M},{default:B(()=>[R(" MAX ")]),_:1}),o(e).token?(D(),N(ye,{key:0,options:o(i),token:o(e).token,"swap-token":String(o(e).to.symbol),onHandleSearchToken:o(r),onSetToken:o(n)},null,8,["options","token","swap-token","onHandleSearchToken","onSetToken"])):ee("",!0)]),_:1},8,["modelValue","onKeypress"])]),Ji,u("div",Ki,[u("div",Ei,[u("div",Ci,[Vi,u("div",Li," Balance: "+h(o(te)(o(W))),1)])]),k(ie,{modelValue:o(e).to.amount,"onUpdate:modelValue":x[1]||(x[1]=J=>o(e).to.amount=J),readonly:"",maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input"},Ce({_:2},[o(e).to?.symbol?{name:"append",fn:B(()=>[u("div",Qi,[u("img",{src:o(re)(o(e).to?.image)},null,8,Zi),R(),u("span",null,h(o(e).to?.symbol),1)])]),key:"0"}:void 0]),1032,["modelValue"])])]),u("div",Ni,[u("dl",$i,[qi,u("dd",null,h(o(p))+" "+h(o(d)),1)]),u("dl",null,[Hi,u("dd",null,h(o(c))+" "+h(o(m)),1)]),u("dl",null,[ji,o(s)?(D(),Q("dd",Oi,h(o(s))+":1 ",1)):(D(),Q("dd",Gi," - "))]),u("dl",null,[Xi,u("dd",null,h(o(l))+" SOL",1)])]),k(ge,{class:"q-mt-md q-mx-auto"}),u("div",Yi,[k(ne,{loading:o(e).converting,rounded:"",ripple:!1,disable:!o(y)?.publicKey||!o(e).from.amount||o(e).from.amount<=0||!!o(z)||!o(b),onClick:v},{default:B(()=>[R(" Unlock token ")]),_:1},8,["loading","disable"])]),u("div",en,[u("div",tn," 1 "+h(o(d))+" = "+h(1/o(s))+" "+h(o(m)),1)])]),_:1}),k(Ve,{showing:o(e)?.loading,class:"swap-loading",color:"grey"},null,8,["showing"])]),_:1})}}}),rn={class:"swap-form"},sn={class:"swap-field"},an={class:"swap-field__info"},on={class:"row items-end"},cn=u("div",{class:"col swap-field__label"}," FROM: ",-1),un={class:"col-8 col-xs-10 row justify-end swap-field__balance"},ln={key:0,class:"insufficient-error"},mn=u("div",{class:"swap-change"},null,-1),dn={class:"swap-field"},fn={class:"swap-field__info"},pn={class:"row"},yn=u("div",{class:"col swap-field__label"}," TO: ",-1),gn={class:"col swap-field__balance"},hn={class:"convert-to"},kn=["src"],bn={class:"swap-info q-mt-md q-pt-xs"},Sn={class:"text-weight-medium"},An=u("dt",null,"Received",-1),wn=u("dt",null,"Locked amount",-1),vn=u("dt",null,"Ratio",-1),_n={key:0},Pn={key:1},Tn=u("dt",null,"Lock fee",-1),Bn={class:"swap-submit q-mt-md"},In={class:"row q-mt-md text-center relative-position full-width"},Mn={class:"swap-rate q-mx-auto"},xn=be({__name:"LockCard",setup(t){const{state:e}=we(),{options:i,setToken:n,handleSearchToken:r,pairRatio:s,pairLockedAmount:c,pairLockFee:l,tokenASymbol:m,tokenBSymbol:d,isHaveCertificate:b,lockUnlockToken:g}=Le();e.isLock=!0;const y=ke(),A=T(()=>e.from.balance),W=T(()=>e.to.balance),p=T(()=>e.to.amount);function M(){e.from.amount=A.value}async function v(){await g()}const z=T(()=>e.from.amount>A.value?"Insufficient funds":!1);return($,x)=>{const ye=Ue,ge=De;return D(),N(Se,{class:"swap-card swap-widget converting-card"},{default:B(()=>[k(Ee,{class:"swap-card__body"},{default:B(()=>[u("div",rn,[u("div",sn,[u("div",an,[u("div",on,[cn,u("div",un,[o(z)?(D(),Q("div",ln,h(o(z)),1)):ee("",!0),R(" Balance: "+h(o(te)(o(A))),1)])])]),k(ie,{modelValue:o(e).from.amount,"onUpdate:modelValue":x[0]||(x[0]=J=>o(e).from.amount=J),maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input",onKeypress:o(Re)},{append:B(()=>[k(ne,{dense:"",unelevated:"",ripple:!1,class:"swap-input__max",onClick:M},{default:B(()=>[R(" MAX ")]),_:1}),o(e).token?(D(),N(ye,{key:0,options:o(i),token:o(e).token,"swap-token":String(o(e).to.symbol),onHandleSearchToken:o(r),onSetToken:o(n)},null,8,["options","token","swap-token","onHandleSearchToken","onSetToken"])):ee("",!0)]),_:1},8,["modelValue","onKeypress"])]),mn,u("div",dn,[u("div",fn,[u("div",pn,[yn,u("div",gn," Balance: "+h(o(te)(o(W))),1)])]),k(ie,{modelValue:o(e).to.amount,"onUpdate:modelValue":x[1]||(x[1]=J=>o(e).to.amount=J),readonly:"",maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input"},Ce({_:2},[o(e).to?.symbol?{name:"append",fn:B(()=>[u("div",hn,[u("img",{src:o(re)(o(e).to?.image)},null,8,kn),R(),u("span",null,h(o(e).to?.symbol),1)])]),key:"0"}:void 0]),1032,["modelValue"])])]),u("div",bn,[u("dl",Sn,[An,u("dd",null,h(o(p))+" "+h(o(d)),1)]),u("dl",null,[wn,u("dd",null,h(o(c))+" "+h(o(m)),1)]),u("dl",null,[vn,o(s)?(D(),Q("dd",_n," 1:"+h(o(s)),1)):(D(),Q("dd",Pn," - "))]),u("dl",null,[Tn,u("dd",null,h(o(l))+" SOL",1)])]),k(ge,{class:"q-mt-md q-mx-auto"}),u("div",Bn,[k(ne,{loading:o(e).converting,rounded:"",ripple:!1,disable:!o(y)?.publicKey||!o(e).from.amount||o(e).from.amount<=0||!!o(z)||!o(b),onClick:v},{default:B(()=>[R(" Lock token ")]),_:1},8,["loading","disable"])]),u("div",In,[u("div",Mn," 1 "+h(o(m))+" = "+h(o(s))+" "+h(o(d)),1)])]),_:1}),k(Ve,{showing:o(e)?.loading,class:"swap-loading",color:"grey"},null,8,["showing"])]),_:1})}}}),zn=be({__name:"ConverterCard",setup(t){const e=lt("lock");return(i,n)=>{const r=xn,s=nn;return D(),N(Se,{class:"liquidity-tabs swap-card swap-widget"},{default:B(()=>[k(dt,{modelValue:o(e),"onUpdate:modelValue":n[0]||(n[0]=c=>Be(e)?e.value=c:null),align:"justify","indicator-color":"transparent",class:mt(i.$q.dark.isActive?"bg-blue-grey-9":"bg-grey-3"),"active-color":"white","active-bg-color":"primary"},{default:B(()=>[k(Te,{ripple:!1,label:"LOCK",name:"lock"}),k(Te,{ripple:!1,label:"UNLOCK",name:"unlock"})]),_:1},8,["modelValue","class"]),k(ft,{modelValue:o(e),"onUpdate:modelValue":n[1]||(n[1]=c=>Be(e)?e.value=c:null),animated:"",class:"bg-transparent"},{default:B(()=>[k(Ie,{name:"lock"},{default:B(()=>[k(r)]),_:1}),k(Ie,{name:"unlock"},{default:B(()=>[k(s)]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),Wn={},Dn={class:"main-block row justify-center"};function Rn(t,e){const i=Ne,n=zn,r=$e,s=qe;return D(),Q(yt,null,[k(i,{class:"q-mt-lg"}),u("div",Dn,[k(n)]),k(r,{class:"q-mt-lg"}),k(s,{class:"q-mt-lg"})],64)}const Ln=pt(Wn,[["render",Rn]]);export{Ln as default};
