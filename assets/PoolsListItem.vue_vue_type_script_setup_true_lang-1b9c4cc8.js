import{V,t as $,v as r,w as T,aY as j,G as Q,a3 as e,o as f,Y as I,Z as m,j as o,a1 as E,a2 as t,a5 as d,i as B,a4 as v,aZ as N,a8 as h,ay as L,aI as U,$ as q,a0 as p,a_ as b,aD as Y,a$ as F}from"./index-ee7b9083.js";import{c as G}from"./AppDescriptionTop-abeaaf17.js";import{u as O}from"./swap-f0d1b728.js";const R={class:"pool-card__subtitle row justify-center items-center"},Z={class:"pool-card__icons row justify-center q-mt-xs"},W=["src","alt"],z=["src","alt"],H={class:"q-mt-md row justify-center"},J={key:0,class:"row q-mt-md"},K={class:"col"},X={class:"row items-center"},tt={class:"pool-card__pubkey monoscaped"},et={class:"row items-center"},at={class:"pool-card__pubkey monoscaped"},ot={class:"row items-center"},st={class:"pool-card__pubkey monoscaped"},nt={class:"row items-center"},lt={class:"pool-card__pubkey monoscaped"},it={class:"row items-center q-mt-xs"},ct={class:"pool-card__pubkey"},mt=V({__name:"PoolsListItem",props:{pubkey:Object,data:Object,useEmit:Boolean},emits:["selectPool"],setup(a){const s=a,S=$(),w=r(()=>S.tokens),i=r(()=>w.value.find(l=>l.mint===s.data?.tokenAMint.toBase58())),c=r(()=>w.value.find(l=>l.mint===s.data?.tokenBMint.toBase58())),A=T(),P=r(()=>A.servicePolicy.find(l=>l.pubkey.toBase58()===s.data?.policy?.toBase58())),k=O(),C=j();async function g(l=!1){i.value&&c.value&&s.pubkey&&s.data&&(k.state.from=i.value,k.state.to=c.value,await C.push(l?"liquidity":"/swap"),k.setTokenSwap({pubkey:s.pubkey,data:s.data}),console.log("[swap] swapAction: ",s.pubkey.toBase58()))}const x=r(()=>s.data?k.getPoolFee(s.data):{}),D=r(()=>x.value.ownerTrade+x.value.trade),y=Q(!1);return(l,n)=>{const M=G,_=F;return a.pubkey&&a.data&&e(i)&&e(c)?(f(),I(q,{key:0,class:"pool-card",onClick:n[4]||(n[4]=u=>a.useEmit?l.$emit("selectPool"):void 0)},{default:m(()=>[o(E,{class:"pool-card__body"},{default:m(()=>[t("div",R,[t("span",null,d(e(i)?.symbol)+" / "+d(e(c)?.symbol),1),t("span",{class:"policy-info q-ml-md",onClick:n[0]||(n[0]=u=>y.value=!0)}," i ")]),t("div",Z,[e(i)?.image?(f(),B("img",{key:0,src:e(i)?.image,alt:e(i)?.symbol},null,8,W)):v("",!0),e(c)?.image?(f(),B("img",{key:1,src:e(c)?.image,alt:e(c)?.symbol},null,8,z)):v("",!0)]),t("div",H,[o(M,{"required-policy":a.data.policy?.toBase58(),"required-policy-data":e(P)?.data},null,8,["required-policy","required-policy-data"])]),a.useEmit?v("",!0):(f(),B("div",J,[t("div",K,[o(N,{spread:""},{default:m(()=>[o(h,{label:"ADD LIQUIDITY",color:"warning","text-color":"#282828",target:"_blank",onClick:n[1]||(n[1]=u=>g(!0))}),o(h,{label:"SWAP",color:"primary","text-color":"white",target:"_blank",onClick:n[2]||(n[2]=u=>g(!1))})]),_:1})])]))]),_:1}),o(L,{modelValue:e(y),"onUpdate:modelValue":n[3]||(n[3]=u=>U(y)?y.value=u:null),"transition-duration":"100","transition-show":"fade","transition-hide":"fade"},{default:m(()=>[o(q,{class:"q-pa-md"},{default:m(()=>[t("div",X,[p(" Pool address:  "),t("span",null,[t("span",tt,d(e(b)(a.pubkey.toBase58())),1),o(_,{text:a.pubkey.toBase58()},null,8,["text"])])]),t("div",et,[p(" Token A mint:  "),t("span",null,[t("span",at,d(e(b)(a.data.tokenAMint.toBase58())),1),o(_,{text:a.data.tokenAMint.toBase58()},null,8,["text"])])]),t("div",ot,[p(" Token B mint:  "),t("span",null,[t("span",st,d(e(b)(a.data.tokenBMint.toBase58())),1),o(_,{text:a.data.tokenBMint.toBase58()},null,8,["text"])])]),t("div",nt,[p(" LP token mint:  "),t("span",null,[t("span",lt,d(e(b)(a.data.poolMint.toBase58())),1),o(_,{text:a.data.poolMint.toBase58()},null,8,["text"])])]),t("div",it,[p(" Pool fee:  "),t("span",ct,d(e(Y).format(e(D))),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):v("",!0)}}});export{mt as _};
