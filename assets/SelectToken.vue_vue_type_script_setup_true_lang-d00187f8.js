import{M as ne,J as he,ag as je,ah as Qe,q as I,ai as ze,P as Z,aj as Oe,X,a2 as fe,U as Pe,a0 as Fe,a5 as K,ak as Le,al as ye,am as We,a8 as Ze,an as W,ad as Ke,ao as pe,ap as $,a9 as we,aq as $e,ar as Ve,as as Ie,at as Je,u as me,t as He,au as Xe,av as Ye,aw as Ge,ax as be,s as re,ay as et,a6 as Se,az as _e,m as qe,aA as Te,o as ee,aB as ce,w as P,j as F,v as Me,aC as oe,G as se,z as U,I as De,i as ve,A as ie,x as ge,y as ae,aD as Ae,Q as tt,aE as ke,ac as nt,aF as le,aG as te,aH as at,aI as ot,K as st,aJ as it,aK as lt,aL as rt,aM as xe,aN as ut,aO as Ce,aP as ct,aQ as dt,aR as ft,aS as mt,aT as vt,aU as gt,aV as Re,aW as Be,aX as kt,aY as de,aZ as ht,B as yt,a_ as pt,a$ as wt}from"./index-242e9299.js";function Yt(e){const n=e.keyCode?e.keyCode:e.which;(n<48||n>57)&&n!==46&&e.preventDefault(),n===46&&String(e.target.value).includes(".")&&e.preventDefault()}const bt=ne("div",{class:"q-space"}),St=he({name:"QSpace",setup(){return()=>bt}}),_t=he({name:"QCardActions",props:{...je,vertical:Boolean},setup(e,{slots:n}){const u=Qe(e),d=I(()=>`q-card__actions ${u.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>ne("div",{class:d.value},ze(n.default))}}),Tt=new Z("EjCM3aozA6sFUzQQ7vXg2uTtjRydyuHSWRwvQX16pAS9");var Mt=(e=>(e.TOKEN_A="TOKEN_A",e.TOKEN_B="TOKEN_B",e))(Mt||{});const Gt=Oe("swap",()=>{const e=X(),n=fe({loading:!1,slippageDialog:!1,status:void 0,poolBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},userBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},poolTokenSupply:0,rate:0}),u=Pe(),d=Fe();K(d,async m=>{m?l().then():J()},{immediate:!0}),K(e,async m=>{m&&await x()});async function l(){n.loading=!0;try{e.value=await Le.loadTokenSwap(u.connection,Tt),await c()}catch(m){console.log(m),e.value=void 0}finally{n.loading=!1}console.log("Token SWAP: ",e.value)}async function c(){if(!e.value)return;const m=await ye(u.connection,e.value.authority);for(const T of m){const S=b(T.mint);S&&(n.poolBalance[S]=T.amount)}const B=await We(u.connection,e.value.poolToken);n.poolTokenSupply=Number(B.supply),n.rate=R()}async function x(){if(!e.value)return;const m=d.value?.publicKey;if(!m){console.log("Wallet is not connected...");return}const B=await ye(u.connection,m,[e.value.poolToken,e.value.mintA,e.value.mintB]),T={TOKEN_A:0,TOKEN_B:0};for(const S of B){const V=b(S.mint);V&&(T[V]=+S.amount)}n.userBalance=T,console.log("[Pool Balance]",n.poolBalance),console.log("[User Balance]",n.userBalance)}function R(){return Ze(g(Ke))}function b(m){if(e.value)switch(String(m)){case String(e.value.mintA):return"TOKEN_A";case String(e.value.mintB):return"TOKEN_B"}}function g(m){const B=new W(n.poolBalance.TOKEN_A),T=new W(m).div(B),S=new W(1),_=S.add(T).sqrt().sub(S);return new W(n.poolTokenSupply).mul(_).toNumber()}function i(m,B){const T=new W(n.poolBalance[B]??0),S=new W(m).div(T),V=new W(1),_=V.sub(S);if(_.isNeg())return 0;const j=V.sub(_.sqrt());return new W(n.poolTokenSupply).mul(j).toNumber()}async function k(m,B){const T=e.value?.mintA,S=e.value?.mintB;if(!T||!S)return;const V=T.toBase58()===m,_=await pe(u.connection,T.toBase58()),j=await pe(u.connection,S.toBase58()),y=10**(V?j:_),M=10**(V?_:j),N=B*M;return(V?n.userBalance.TOKEN_B/n.userBalance.TOKEN_A*N:n.userBalance.TOKEN_A/n.userBalance.TOKEN_B*N)/y}function J(){n.loading=!1,n.slippageDialog=!1,n.status=void 0,n.poolBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},n.userBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},n.poolTokenSupply=0,n.rate=0}return{state:n,tokenSwap:e,loadUserTokenAccounts:x,depositSingleTokenType:g,withdrawSingleTokenTypeExactOut:i,calculateDependentAmount:k}});var At=Object.defineProperty,xt=(e,n,u)=>n in e?At(e,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[n]=u,Ct=(e,n,u)=>(xt(e,typeof n!="symbol"?n+"":n,u),u);const Rt=new $.BeetArgsStruct([["instructionDiscriminator",$.uniformFixedSizeArray($.u8,8)],["amount",$.u64]],"SplTransferInstructionArgs"),Bt=[67,186,237,99,235,243,166,198];function Et(e,n,u=new Z("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[d]=Rt.serialize({instructionDiscriminator:Bt,...n}),l=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.tokenMint,isWritable:!1,isSigner:!1},{pubkey:e.source,isWritable:!0,isSigner:!1},{pubkey:e.destination,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??$e,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ve.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const c of e.anchorRemainingAccounts)l.push(c);return new Ie({programId:u,keys:l,data:d})}const Nt=new $.BeetArgsStruct([["instructionDiscriminator",$.uniformFixedSizeArray($.u8,8)],["amount",$.u64]],"TransferInstructionArgs"),Ot=[163,52,200,231,140,3,69,186];function Pt(e,n,u=new Z("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[d]=Nt.serialize({instructionDiscriminator:Ot,...n}),l=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ve.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const c of e.anchorRemainingAccounts)l.push(c);return new Ie({programId:u,keys:l,data:d})}const Ft="J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c",Kt=new Z(Ft);class Vt{constructor(n){Ct(this,"programId",Kt),this.provider=n}get connection(){return this.provider.connection}async transfer(n,u){const d=Pt({proofRequest:n.proofRequest,sender:this.provider.publicKey,receiver:n.receiver},{amount:n.amount}),l=new we().add(d);return this.provider.sendAndConfirm(l,[],u)}async transferToken(n,u){const d=Et({proofRequest:n.proofRequest,sender:this.provider.publicKey,receiver:n.receiver,source:n.source,destination:n.destination,tokenMint:n.tokenMint},{amount:n.amount}),l=new we().add(d);return this.provider.sendAndConfirm(l,[],u)}}const en=Oe("transfer",()=>{const e=Pe(),{tokens:n}=Je(),u=me(),{state:d,reloadUserTokens:l}=me(),c=I(()=>u.certificate),x=0,R=Fe(),{publicKey:b}=He(),g=fe(n[0]),i=fe({address:"",value:void 0,loading:!1,token:g,fee:x,valid:!1});function k(){i.value=void 0,i.fee=x}K(()=>i.token,()=>{k()}),K(()=>R.value?.publicKey,y=>{y||(k(),i.address="")}),K(()=>i.address,async()=>{i.valid=await Xe(i.address)}),K([()=>i.valid,()=>i.value],async([y,M])=>{y&&Number(M)>0?m():i.fee=x});async function J(){const y=i.token.label,M=d.tokens.find(N=>re(N.symbol)===re(y));return y==="sol"?!0:!M||!M.mint?!1:!!et(M.mint)}async function m(){const y=await J(),M=await Ye(R.value?.publicKey,i.address,Number(i.value),e.connection),N=await Ge(M,e.connection);i.fee=y?N:N+.02}const B=I(()=>new Vt(new be(e.connection,R.value??{publicKey:Z.default},be.defaultOptions())));async function T(){try{i.loading=!0,console.log("certificate === ",c.value),c.value?.data.status===2&&(console.log(i.token),i.token.label==="sol"?await S():await V(),await l())}catch(y){console.error("verifyTransfer error: ",y)}finally{i.loading=!1}}async function S(){const y=new Se(Number(i.value)*Ke),M=new Z(i.address);await B.value.transfer({amount:y,receiver:M,proofRequest:c.value.pubkey})}async function V(){if(!b.value||!i.token.mint)return;const y=d.tokens.find(a=>a.mint===i.token.mint);if(!y)return;const M=new Z(i.token.mint),N=new Z(i.address),D=await _e(M,b.value),Y=await _e(M,N),o=new Se(Number(i.value)*10**y.decimals);await B.value.transferToken({destination:Y,source:D,tokenMint:M,amount:o,receiver:N,proofRequest:c.value.pubkey})}function _(y){i.value=y}function j(y){i.token=y}return{state:i,setMax:_,setToken:j,verifyTransfer:T}}),It=ae("div",{class:"text-h6"}," Info ",-1),qt={key:0},Dt={key:1},Ut=["href"],jt=["href"],tn=qe({__name:"ZkpRequestDialog",setup(e){const n=me(),u=X(!1),d=I(()=>Te.Empty===n.certificate?.data.status),l=I(()=>Te.Pending===n.certificate?.data.status);return(c,x)=>(ee(),ce(nt,{modelValue:U(u),"onUpdate:modelValue":x[0]||(x[0]=R=>ke(u)?u.value=R:null)},{default:P(()=>[F(tt,{class:"zkp-dialog"},{default:P(()=>[F(Me,{class:"row items-center q-pb-none zkp-dialog__header"},{default:P(()=>[It,F(St),oe(F(se,{icon:U(De),flat:"",round:"",dense:""},null,8,["icon"]),[[le]])]),_:1}),F(Me,{class:"q-pt-none zkp-dialog__body"},{default:P(()=>[U(d)?(ee(),ve("div",qt," To continue, you need to create a ZKP request ")):ie("",!0),U(l)?(ee(),ve("div",Dt,[ge(' To continue, you need to "prove" the request. Follow this link. '),ae("a",{class:"prove-link",href:U(Ae),target:"_blank"},"__Albus account__",8,Ut)])):ie("",!0)]),_:1}),F(_t,{align:"right",class:"zkp-dialog__actions"},{default:P(()=>[oe(F(se,{flat:"",label:"Cancel",class:"zkp-dialog__actions--cancel"},null,512),[[le]]),U(d)?oe((ee(),ce(se,{key:0,outline:"",label:"Create",color:"yellow"},null,512)),[[le]]):ie("",!0),U(l)?oe((ee(),ce(se,{key:1,color:"yellow",outline:""},{default:P(()=>[ae("a",{href:U(Ae),target:"_blank"},"prove",8,jt)]),_:1})),[[le]]):ie("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const Ee={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ue={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ue=Object.keys(ue);Ue.forEach(e=>{ue[e].regex=new RegExp(ue[e].pattern)});const Qt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ue.join("")+"])|(.)","g"),Ne=/[.*+?^${}()|[\]\\]/g,E=String.fromCharCode(1),zt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Lt(e,n,u,d){let l,c,x,R,b,g;const i=X(null),k=X(m());function J(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}K(()=>e.type+e.autogrow,T),K(()=>e.mask,o=>{if(o!==void 0)S(k.value,!0);else{const a=D(k.value);T(),e.modelValue!==a&&n("update:modelValue",a)}}),K(()=>e.fillMask+e.reverseFillMask,()=>{i.value===!0&&S(k.value,!0)}),K(()=>e.unmaskedValue,()=>{i.value===!0&&S(k.value)});function m(){if(T(),i.value===!0){const o=M(D(e.modelValue));return e.fillMask!==!1?Y(o):o}return e.modelValue}function B(o){if(o<l.length)return l.slice(-o);let a="",r=l;const s=r.indexOf(E);if(s>-1){for(let v=o-r.length;v>0;v--)a+=E;r=r.slice(0,s)+a+r.slice(s)}return r}function T(){if(i.value=e.mask!==void 0&&e.mask.length!==0&&J(),i.value===!1){R=void 0,l="",c="";return}const o=Ee[e.mask]===void 0?e.mask:Ee[e.mask],a=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",r=a.replace(Ne,"\\$&"),s=[],v=[],f=[];let C=e.reverseFillMask===!0,h="",p="";o.replace(Qt,(O,t,A,z,Q)=>{if(z!==void 0){const q=ue[z];f.push(q),p=q.negate,C===!0&&(v.push("(?:"+p+"+)?("+q.pattern+"+)?(?:"+p+"+)?("+q.pattern+"+)?"),C=!1),v.push("(?:"+p+"+)?("+q.pattern+")?")}else if(A!==void 0)h="\\"+(A==="\\"?"":A),f.push(A),s.push("([^"+h+"]+)?"+h+"?");else{const q=t!==void 0?t:Q;h=q==="\\"?"\\\\\\\\":q.replace(Ne,"\\\\$&"),f.push(q),s.push("([^"+h+"]+)?"+h+"?")}});const H=new RegExp("^"+s.join("")+"("+(h===""?".":"[^"+h+"]")+"+)?"+(h===""?"":"["+h+"]*")+"$"),L=v.length-1,w=v.map((O,t)=>t===0&&e.reverseFillMask===!0?new RegExp("^"+r+"*"+O):t===L?new RegExp("^"+O+"("+(p===""?".":p)+"+)?"+(e.reverseFillMask===!0?"$":r+"*")):new RegExp("^"+O));x=f,R=O=>{const t=H.exec(e.reverseFillMask===!0?O:O.slice(0,f.length+1));t!==null&&(O=t.slice(1).join(""));const A=[],z=w.length;for(let Q=0,q=O;Q<z;Q++){const G=w[Q].exec(q);if(G===null)break;q=q.slice(G.shift().length),A.push(...G)}return A.length!==0?A.join(""):O},l=f.map(O=>typeof O=="string"?O:E).join(""),c=l.split(E).join(a)}function S(o,a,r){const s=d.value,v=s.selectionEnd,f=s.value.length-v,C=D(o);a===!0&&T();const h=M(C),p=e.fillMask!==!1?Y(h):h,H=k.value!==p;s.value!==p&&(s.value=p),H===!0&&(k.value=p),document.activeElement===s&&te(()=>{if(p===c){const w=e.reverseFillMask===!0?c.length:0;s.setSelectionRange(w,w,"forward");return}if(r==="insertFromPaste"&&e.reverseFillMask!==!0){const w=s.selectionEnd;let O=v-1;for(let t=b;t<=O&&t<w;t++)l[t]!==E&&O++;_.right(s,O);return}if(["deleteContentBackward","deleteContentForward"].indexOf(r)>-1){const w=e.reverseFillMask===!0?v===0?p.length>h.length?1:0:Math.max(0,p.length-(p===c?0:Math.min(h.length,f)+1))+1:v;s.setSelectionRange(w,w,"forward");return}if(e.reverseFillMask===!0)if(H===!0){const w=Math.max(0,p.length-(p===c?0:Math.min(h.length,f+1)));w===1&&v===1?s.setSelectionRange(w,w,"forward"):_.rightReverse(s,w)}else{const w=p.length-f;s.setSelectionRange(w,w,"backward")}else if(H===!0){const w=Math.max(0,l.indexOf(E),Math.min(h.length,v)-1);_.right(s,w)}else{const w=v-1;_.right(s,w)}});const L=e.unmaskedValue===!0?D(p):p;String(e.modelValue)!==L&&(e.modelValue!==null||L!=="")&&u(L,!0)}function V(o,a,r){const s=M(D(o.value));a=Math.max(0,l.indexOf(E),Math.min(s.length,a)),b=a,o.setSelectionRange(a,r,"forward")}const _={left(o,a){const r=l.slice(a-1).indexOf(E)===-1;let s=Math.max(0,a-1);for(;s>=0;s--)if(l[s]===E){a=s,r===!0&&a++;break}if(s<0&&l[a]!==void 0&&l[a]!==E)return _.right(o,0);a>=0&&o.setSelectionRange(a,a,"backward")},right(o,a){const r=o.value.length;let s=Math.min(r,a+1);for(;s<=r;s++)if(l[s]===E){a=s;break}else l[s-1]===E&&(a=s);if(s>r&&l[a-1]!==void 0&&l[a-1]!==E)return _.left(o,r);o.setSelectionRange(a,a,"forward")},leftReverse(o,a){const r=B(o.value.length);let s=Math.max(0,a-1);for(;s>=0;s--)if(r[s-1]===E){a=s;break}else if(r[s]===E&&(a=s,s===0))break;if(s<0&&r[a]!==void 0&&r[a]!==E)return _.rightReverse(o,0);a>=0&&o.setSelectionRange(a,a,"backward")},rightReverse(o,a){const r=o.value.length,s=B(r),v=s.slice(0,a+1).indexOf(E)===-1;let f=Math.min(r,a+1);for(;f<=r;f++)if(s[f-1]===E){a=f,a>0&&v===!0&&a--;break}if(f>r&&s[a-1]!==void 0&&s[a-1]!==E)return _.leftReverse(o,r);o.setSelectionRange(a,a,"forward")}};function j(o){n("click",o),g=void 0}function y(o){if(n("keydown",o),at(o)===!0||o.altKey===!0)return;const a=d.value,r=a.selectionStart,s=a.selectionEnd;if(o.shiftKey||(g=void 0),o.keyCode===37||o.keyCode===39){o.shiftKey&&g===void 0&&(g=a.selectionDirection==="forward"?r:s);const v=_[(o.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(o.preventDefault(),v(a,g===r?s:r),o.shiftKey){const f=a.selectionStart;a.setSelectionRange(Math.min(g,f),Math.max(g,f),"forward")}}else o.keyCode===8&&e.reverseFillMask!==!0&&r===s?(_.left(a,r),a.setSelectionRange(a.selectionStart,s,"backward")):o.keyCode===46&&e.reverseFillMask===!0&&r===s&&(_.rightReverse(a,s),a.setSelectionRange(r,a.selectionEnd,"forward"))}function M(o){if(o==null||o==="")return"";if(e.reverseFillMask===!0)return N(o);const a=x;let r=0,s="";for(let v=0;v<a.length;v++){const f=o[r],C=a[v];if(typeof C=="string")s+=C,f===C&&r++;else if(f!==void 0&&C.regex.test(f))s+=C.transform!==void 0?C.transform(f):f,r++;else return s}return s}function N(o){const a=x,r=l.indexOf(E);let s=o.length-1,v="";for(let f=a.length-1;f>=0&&s>-1;f--){const C=a[f];let h=o[s];if(typeof C=="string")v=C+v,h===C&&s--;else if(h!==void 0&&C.regex.test(h))do v=(C.transform!==void 0?C.transform(h):h)+v,s--,h=o[s];while(r===f&&h!==void 0&&C.regex.test(h));else return v}return v}function D(o){return typeof o!="string"||R===void 0?typeof o=="number"?R(""+o):o:R(o)}function Y(o){return c.length-o.length<=0?o:e.reverseFillMask===!0&&o.length!==0?c.slice(0,-o.length)+o:o+c.slice(o.length)}return{innerValue:k,hasMask:i,moveCursorForPaste:V,updateMaskValue:S,onMaskedKeydown:y,onMaskedClick:j}}function Wt(e,n){function u(){const d=e.modelValue;try{const l="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(d)===d&&("length"in d?Array.from(d):[d]).forEach(c=>{l.items.add(c)}),{files:l.files}}catch{return{files:void 0}}}return n===!0?I(()=>{if(e.type==="file")return u()}):I(u)}const Zt=he({name:"QInput",inheritAttrs:!1,props:{...ot,...zt,...st,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...it,"paste","change","keydown","click","animationend"],setup(e,{emit:n,attrs:u}){const{proxy:d}=lt(),{$q:l}=d,c={};let x=NaN,R,b,g=null,i;const k=X(null),J=rt(e),{innerValue:m,hasMask:B,moveCursorForPaste:T,updateMaskValue:S,onMaskedKeydown:V,onMaskedClick:_}=Lt(e,n,h,k),j=Wt(e,!0),y=I(()=>xe(m.value)),M=vt(f),N=ut(),D=I(()=>e.type==="textarea"||e.autogrow===!0),Y=I(()=>D.value===!0||["text","search","url","tel","password"].includes(e.type)),o=I(()=>{const t={...N.splitAttrs.listeners.value,onInput:f,onPaste:v,onChange:H,onBlur:L,onFocus:Ce};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=M,B.value===!0&&(t.onKeydown=V,t.onClick=_),e.autogrow===!0&&(t.onAnimationend=C),t}),a=I(()=>{const t={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:J.value,...N.splitAttrs.attributes.value,id:N.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return D.value===!1&&(t.type=e.type),e.autogrow===!0&&(t.rows=1),t});K(()=>e.type,()=>{k.value&&(k.value.value=e.modelValue)}),K(()=>e.modelValue,t=>{if(B.value===!0){if(b===!0&&(b=!1,String(t)===x))return;S(t)}else m.value!==t&&(m.value=t,e.type==="number"&&c.hasOwnProperty("value")===!0&&(R===!0?R=!1:delete c.value));e.autogrow===!0&&te(p)}),K(()=>e.autogrow,t=>{t===!0?te(p):k.value!==null&&u.rows>0&&(k.value.style.height="auto")}),K(()=>e.dense,()=>{e.autogrow===!0&&te(p)});function r(){gt(()=>{const t=document.activeElement;k.value!==null&&k.value!==t&&(t===null||t.id!==N.targetUid.value)&&k.value.focus({preventScroll:!0})})}function s(){k.value!==null&&k.value.select()}function v(t){if(B.value===!0&&e.reverseFillMask!==!0){const A=t.target;T(A,A.selectionStart,A.selectionEnd)}n("paste",t)}function f(t){if(!t||!t.target)return;if(e.type==="file"){n("update:modelValue",t.target.files);return}const A=t.target.value;if(t.target.qComposing===!0){c.value=A;return}if(B.value===!0)S(A,!1,t.inputType);else if(h(A),Y.value===!0&&t.target===document.activeElement){const{selectionStart:z,selectionEnd:Q}=t.target;z!==void 0&&Q!==void 0&&te(()=>{t.target===document.activeElement&&A.indexOf(t.target.value)===0&&t.target.setSelectionRange(z,Q)})}e.autogrow===!0&&p()}function C(t){n("animationend",t),p()}function h(t,A){i=()=>{g=null,e.type!=="number"&&c.hasOwnProperty("value")===!0&&delete c.value,e.modelValue!==t&&x!==t&&(x=t,A===!0&&(b=!0),n("update:modelValue",t),te(()=>{x===t&&(x=NaN)})),i=void 0},e.type==="number"&&(R=!0,c.value=t),e.debounce!==void 0?(g!==null&&clearTimeout(g),c.value=t,g=setTimeout(i,e.debounce)):i()}function p(){requestAnimationFrame(()=>{const t=k.value;if(t!==null){const A=t.parentNode.style,{scrollTop:z}=t,{overflowY:Q,maxHeight:q}=l.platform.is.firefox===!0?{}:window.getComputedStyle(t),G=Q!==void 0&&Q!=="scroll";G===!0&&(t.style.overflowY="hidden"),A.marginBottom=t.scrollHeight-1+"px",t.style.height="1px",t.style.height=t.scrollHeight+"px",G===!0&&(t.style.overflowY=parseInt(q,10)<t.scrollHeight?"auto":"hidden"),A.marginBottom="",t.scrollTop=z}})}function H(t){M(t),g!==null&&(clearTimeout(g),g=null),i!==void 0&&i(),n("change",t.target.value)}function L(t){t!==void 0&&Ce(t),g!==null&&(clearTimeout(g),g=null),i!==void 0&&i(),R=!1,b=!1,delete c.value,e.type!=="file"&&setTimeout(()=>{k.value!==null&&(k.value.value=m.value!==void 0?m.value:"")})}function w(){return c.hasOwnProperty("value")===!0?c.value:m.value!==void 0?m.value:""}ct(()=>{L()}),dt(()=>{e.autogrow===!0&&p()}),Object.assign(N,{innerValue:m,fieldClass:I(()=>`q-${D.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:I(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:k,emitValue:h,hasValue:y,floatingLabel:I(()=>y.value===!0&&(e.type!=="number"||isNaN(m.value)===!1)||xe(e.displayValue)),getControl:()=>ne(D.value===!0?"textarea":"input",{ref:k,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...a.value,...o.value,...e.type!=="file"?{value:w()}:j.value}),getShadowControl:()=>ne("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(D.value===!0?"":" text-no-wrap")},[ne("span",{class:"invisible"},w()),ne("span",e.shadowText)])});const O=ft(N);return Object.assign(d,{focus:r,select:s,getNativeElement:()=>k.value}),mt(d,"nativeEl",()=>k.value),O}}),$t={class:"token-select"},Jt=["src"],Ht=["src"],nn=qe({__name:"SelectToken",props:{options:Object,searchToken:String,direction:{type:Boolean,default:!1},token:Object,swapToken:String,disable:{type:Boolean,default:!1}},emits:["handleSearchToken","setToken"],setup(e,{emit:n}){const u=e,d=n,l=X(u.searchToken),c=X(u.token??u.options[0]);K(()=>u.token,b=>{c.value=b});function x(){l.value=""}const R=I(()=>u.options.map(b=>({...b,inactive:re(String(b.value))===re(u.swapToken)})));return K(l,b=>{d("handleSearchToken",b)}),K(c,b=>{d("setToken",b,u.direction)}),(b,g)=>(ee(),ve("div",$t,[F(wt,{modelValue:U(c),"onUpdate:modelValue":g[2]||(g[2]=i=>ke(c)?c.value=i:null),"option-disable":"inactive","popup-content-class":"transition-duration",outlined:"",options:U(R),dense:"","options-dense":!1,disable:e.disable,onPopupHide:x},{prepend:P(()=>[F(Re,null,{default:P(()=>[ae("img",{src:U(c).image},null,8,Jt)]),_:1})]),option:P(i=>[F(Be,kt(i.itemProps,{class:"token-select__token"}),{default:P(()=>[F(de,{avatar:"",class:"token-select__token--item"},{default:P(()=>[F(Re,null,{default:P(()=>[ae("img",{src:i.opt.image},null,8,Ht)]),_:2},1024)]),_:2},1024),F(de,null,{default:P(()=>[F(ht,null,{default:P(()=>[ge(yt(i.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":P(()=>[F(Zt,{modelValue:U(l),"onUpdate:modelValue":g[1]||(g[1]=i=>ke(l)?l.value=i:null),maxlength:8,outlined:"",class:"token-search"},{append:P(()=>[F(pt,{name:U(De),class:"cursor-pointer token-search__close",onClick:g[0]||(g[0]=i=>l.value="")},null,8,["name"])]),_:1},8,["modelValue"]),F(Be,null,{default:P(()=>[F(de,{class:"text-grey"},{default:P(()=>[ge(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"])]))}});export{Mt as P,Zt as Q,tn as _,nn as a,Gt as b,Yt as o,en as u};
