import{V,y as D,t as j,v as f,b3 as Q,G as I,a3 as s,o as d,Y as L,Z as h,j as n,a1 as N,a2 as t,i as k,a4 as r,a5 as o,a0 as l,az as E,aI as W,$,b4 as b,aD as _,aU as p,a6 as q,b5 as Y,a8 as A,b6 as F}from"./index-0f5d4962.js";import{u as O}from"./swap-e11100e3.js";const R={class:"row"},U={class:"pool-card__icons row justify-center q-mr-md"},z=["src","alt"],G=["src","alt"],Z={class:"pool-card__subtitle row justify-center items-center"},H={class:"policy-info q-ml-auto"},J={class:"row items-center"},K={class:"pool-card__pubkey monoscaped"},X={class:"row items-center"},tt={class:"pool-card__pubkey monoscaped"},st={class:"row items-center"},et={class:"pool-card__pubkey monoscaped"},ot={class:"row items-center"},at={class:"pool-card__pubkey monoscaped"},lt={class:"row items-center q-mt-xs"},nt={class:"pool-card__pubkey"},it={class:"row items-center q-mt-xs"},ct={class:"pool-card__pubkey"},dt={key:0,class:"row q-mt-sm q-mb-auto q-pt-xs pool-card__stats"},rt={class:"row col-6 q-mt-xs"},ut={class:"row col-6 q-mt-xs"},mt={class:"row col-6 q-mt-xs"},kt={class:"row col-6 q-mt-xs"},pt={key:0,class:"q-py-md"},ft={key:1,class:"row col-6 q-mt-xs"},ht={key:2,class:"row col-6 q-mt-xs"},wt={key:1,class:"row q-mt-md"},yt={class:"col"},_t=V({__name:"PoolsListItem",props:{pubkey:Object,data:Object,poolStats:Object,userTokens:Number,useEmit:Boolean},emits:["selectPool"],setup(e){const i=e,{connected:B}=D(),C=j(),g=f(()=>C.tokens),u=f(()=>g.value.find(a=>a.mint===i.data?.tokenAMint.toBase58())),m=f(()=>g.value.find(a=>a.mint===i.data?.tokenBMint.toBase58())),w=O(),M=Q();async function T(a=!1){u.value&&m.value&&i.pubkey&&i.data&&(w.state.from=u.value,w.state.to=m.value,await M.push(a?"liquidity":"/swap"),w.setTokenSwap({pubkey:i.pubkey,data:i.data}),console.log("[swap] swapAction: ",i.pubkey.toBase58()))}const S=f(()=>i.data?w.getPoolFee(i.data):{}),P=f(()=>S.value.ownerTrade+S.value.trade),x=I(!1);return(a,c)=>{const y=F;return e.pubkey&&e.data&&s(u)&&s(m)?(d(),L($,{key:0,class:"pool-card",onClick:c[3]||(c[3]=v=>e.useEmit?a.$emit("selectPool"):void 0)},{default:h(()=>[n(N,{class:"pool-card__body full-height"},{default:h(()=>[t("div",R,[t("div",U,[s(u)?.image?(d(),k("img",{key:0,src:s(u)?.image,alt:s(u)?.symbol},null,8,z)):r("",!0),s(m)?.image?(d(),k("img",{key:1,src:s(m)?.image,alt:s(m)?.symbol},null,8,G)):r("",!0)]),t("div",Z,[t("span",null,o(s(u)?.symbol)+" / "+o(s(m)?.symbol),1)]),t("span",H,[l(" i "),n(E,{modelValue:s(x),"onUpdate:modelValue":c[0]||(c[0]=v=>W(x)?x.value=v:null),"transition-duration":"100","transition-show":"fade","transition-hide":"fade"},{default:h(()=>[n($,{class:"q-pa-md"},{default:h(()=>[t("div",J,[l(" Pool address:  "),t("span",null,[t("span",K,o(s(b)(e.pubkey.toBase58())),1),n(y,{text:e.pubkey.toBase58()},null,8,["text"])])]),t("div",X,[l(" Token A mint:  "),t("span",null,[t("span",tt,o(s(b)(e.data.tokenAMint.toBase58())),1),n(y,{text:e.data.tokenAMint.toBase58()},null,8,["text"])])]),t("div",st,[l(" Token B mint:  "),t("span",null,[t("span",et,o(s(b)(e.data.tokenBMint.toBase58())),1),n(y,{text:e.data.tokenBMint.toBase58()},null,8,["text"])])]),t("div",ot,[l(" LP token mint:  "),t("span",null,[t("span",at,o(s(b)(e.data.poolMint.toBase58())),1),n(y,{text:e.data.poolMint.toBase58()},null,8,["text"])])]),t("div",lt,[l(" Swap fee:  "),t("span",nt,o(s(_).format(s(P))),1)]),t("div",it,[l(" Withdraw fee:  "),t("span",ct,o(s(_).format(s(S).ownerWithdraw)),1)])]),_:1})]),_:1},8,["modelValue"])])]),e.poolStats?(d(),k("div",dt,[t("div",rt,[l(" Liquidity:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(q)(e.poolStats.tvl,2)),3)]),t("div",ut,[l(" Volume 24h:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(q)(e.poolStats.volume24,2)),3)]),t("div",mt,[l(" Fees 24h:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(q)(e.poolStats.fees24,2)),3)]),t("div",kt,[l(" APR 24h:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},o(s(_).format(e.poolStats.apr24)),3)]),e.userTokens&&s(B)?(d(),k("div",pt)):r("",!0),e.userTokens&&s(B)?(d(),k("div",ft,[l(" Your Liquidity:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},"$"+o(s(q)(e.userTokens/e.poolStats.poolTokenSupply*e.poolStats.tvl,2)),3)])):r("",!0),e.userTokens&&s(B)?(d(),k("div",ht,[l(" Your share:  "),t("span",{class:p({"full-width":a.$q.screen.lt.sm})},o(s(_).format(e.userTokens/e.poolStats.poolTokenSupply)),3)])):r("",!0)])):r("",!0),e.useEmit?r("",!0):(d(),k("div",wt,[t("div",yt,[n(Y,{spread:""},{default:h(()=>[n(A,{label:"ADD LIQUIDITY",color:"warning","text-color":"#282828",target:"_blank",onClick:c[1]||(c[1]=v=>T(!0))}),n(A,{label:"SWAP",color:"primary","text-color":"white",target:"_blank",onClick:c[2]||(c[2]=v=>T(!1))})]),_:1})])]))]),_:1})]),_:1})):r("",!0)}}});export{_t as _};
