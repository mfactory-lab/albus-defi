var He=Object.defineProperty;var qe=(i,e,t)=>e in i?He(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var A=(i,e,t)=>(qe(i,typeof e!="symbol"?e+"":e,t),t);import{_ as je,a as Oe}from"./AppDescription-f54c2325.js";import{_ as Re}from"./PolicyCard.vue_vue_type_script_setup_true_lang-3aeb0de2.js";import{o as Ue,_ as Fe}from"./SelectToken.vue_vue_type_script_setup_true_lang-a390d874.js";import{k as a,bc as _,P as g,b6 as I,aQ as x,aR as te,bi as Ge,K as _e,aY as M,ae as Je,bj as Xe,bk as Ye,bl as et,bm as Pe,R as Ae,J as tt,b3 as it,b4 as nt,b5 as st,a as Z,s as rt,u as ce,x as Ke,w as Ce,B as at,v,bn as Ee,C as $,bf as ot,a_ as ct,bo as ut,am as lt,z as Ve,U as Te,V as ue,o as W,Y as ie,Z as B,j as k,a1 as Le,a2 as u,a3 as o,i as F,a5 as S,a4 as H,a0 as U,a6 as ne,a7 as se,a8 as q,bp as Qe,a9 as Ne,$ as we,y as Ze,G as dt,aF as mt,as as Be,aE as ft,aD as Ie,aH as pt,aG as Me,A as yt,bq as gt,_ as ht,ad as kt}from"./index-3a953339.js";import{c as bt,A as St}from"./setAuthority-17780cbb.js";import{b as At,g as wt,m as vt}from"./index-72442db0.js";import"./internal-183d1be7.js";const _t="/assets/unrecognized-token-3289de57.svg";function xe(i,e){if(e)return e[i]?.symbol??""}function re(i){return i??_t}const Pt=[244,158,220,65,8,73,4,65];class E{constructor(e,t){this.authority=e,this.isPlatformPaused=t}static fromArgs(e){return new E(e.authority,e.isPlatformPaused)}static fromAccountInfo(e,t=0){return E.deserialize(e.data,t)}static async fromAccountAddress(e,t,s){const n=await e.getAccountInfo(t,s);if(n==null)throw new Error(`Unable to find Admin account at ${t}`);return E.fromAccountInfo(n,0)[0]}static gpaBuilder(e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return _.GpaBuilder.fromStruct(e,O)}static deserialize(e,t=0){return O.deserialize(e,t)}serialize(){return O.serialize({accountDiscriminator:Pt,...this})}static get byteSize(){return O.byteSize}static async getMinimumBalanceForRentExemption(e,t){return e.getMinimumBalanceForRentExemption(E.byteSize,t)}static hasCorrectByteSize(e,t=0){return e.byteLength-t===E.byteSize}pretty(){return{authority:this.authority.toBase58(),isPlatformPaused:this.isPlatformPaused}}}const O=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",_.publicKey],["isPlatformPaused",a.bool]],E.fromArgs,"Admin"),Tt=[221,78,171,233,213,142,113,56];class V{constructor(e,t){this.authority=e,this.isAllPaused=t}static fromArgs(e){return new V(e.authority,e.isAllPaused)}static fromAccountInfo(e,t=0){return V.deserialize(e.data,t)}static async fromAccountAddress(e,t,s){const n=await e.getAccountInfo(t,s);if(n==null)throw new Error(`Unable to find Manager account at ${t}`);return V.fromAccountInfo(n,0)[0]}static gpaBuilder(e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return _.GpaBuilder.fromStruct(e,G)}static deserialize(e,t=0){return G.deserialize(e,t)}serialize(){return G.serialize({accountDiscriminator:Tt,...this})}static get byteSize(){return G.byteSize}static async getMinimumBalanceForRentExemption(e,t){return e.getMinimumBalanceForRentExemption(V.byteSize,t)}static hasCorrectByteSize(e,t=0){return e.byteLength-t===V.byteSize}pretty(){return{authority:this.authority.toBase58(),isAllPaused:this.isAllPaused}}}const G=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",_.publicKey],["isAllPaused",a.bool]],V.fromArgs,"Manager"),ve=new a.BeetArgsStruct([["num",a.u64],["denom",a.u64]],"Ratio"),De=[85,72,49,176,182,228,141,82];class L{constructor(e,t,s,n,r,c,l,d,p,w){this.authority=e,this.tokenA=t,this.tokenB=s,this.lockedAmount=n,this.ratio=r,this.isPaused=c,this.lockFee=l,this.unlockFee=d,this.feeReceiver=p,this.policy=w}static fromArgs(e){return new L(e.authority,e.tokenA,e.tokenB,e.lockedAmount,e.ratio,e.isPaused,e.lockFee,e.unlockFee,e.feeReceiver,e.policy)}static fromAccountInfo(e,t=0){return L.deserialize(e.data,t)}static async fromAccountAddress(e,t,s){const n=await e.getAccountInfo(t,s);if(n==null)throw new Error(`Unable to find Pair account at ${t}`);return L.fromAccountInfo(n,0)[0]}static gpaBuilder(e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return _.GpaBuilder.fromStruct(e,X)}static deserialize(e,t=0){return X.deserialize(e,t)}serialize(){return X.serialize({accountDiscriminator:De,...this})}static byteSize(e){const t=L.fromArgs(e);return X.toFixedFromValue({accountDiscriminator:De,...t}).byteSize}static async getMinimumBalanceForRentExemption(e,t,s){return t.getMinimumBalanceForRentExemption(L.byteSize(e),s)}pretty(){return{authority:this.authority.toBase58(),tokenA:this.tokenA.toBase58(),tokenB:this.tokenB.toBase58(),lockedAmount:(()=>{const e=this.lockedAmount;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),ratio:this.ratio,isPaused:this.isPaused,lockFee:this.lockFee,unlockFee:this.unlockFee,feeReceiver:this.feeReceiver.toBase58(),policy:this.policy}}}const X=new a.FixableBeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",_.publicKey],["tokenA",_.publicKey],["tokenB",_.publicKey],["lockedAmount",a.u64],["ratio",ve],["isPaused",a.bool],["lockFee",a.u16],["unlockFee",a.u16],["feeReceiver",_.publicKey],["policy",a.coption(_.publicKey)]],L.fromArgs,"Pair"),Bt=[159,117,95,227,239,151,58,236];class Q{constructor(e,t){this.authority=e,this.isBlocked=t}static fromArgs(e){return new Q(e.authority,e.isBlocked)}static fromAccountInfo(e,t=0){return Q.deserialize(e.data,t)}static async fromAccountAddress(e,t,s){const n=await e.getAccountInfo(t,s);if(n==null)throw new Error(`Unable to find User account at ${t}`);return Q.fromAccountInfo(n,0)[0]}static gpaBuilder(e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return _.GpaBuilder.fromStruct(e,Y)}static deserialize(e,t=0){return Y.deserialize(e,t)}serialize(){return Y.serialize({accountDiscriminator:Bt,...this})}static get byteSize(){return Y.byteSize}static async getMinimumBalanceForRentExemption(e,t){return e.getMinimumBalanceForRentExemption(Q.byteSize,t)}static hasCorrectByteSize(e,t=0){return e.byteLength-t===Q.byteSize}pretty(){return{authority:this.authority.toBase58(),isBlocked:this.isBlocked}}}const Y=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["authority",_.publicKey],["isBlocked",a.bool]],Q.fromArgs,"User"),It=[17,50,115,0,10,220,15,157];class N{constructor(e,t){this.user=e,this.pair=t}static fromArgs(e){return new N(e.user,e.pair)}static fromAccountInfo(e,t=0){return N.deserialize(e.data,t)}static async fromAccountAddress(e,t,s){const n=await e.getAccountInfo(t,s);if(n==null)throw new Error(`Unable to find WhitelistedUserInfo account at ${t}`);return N.fromAccountInfo(n,0)[0]}static gpaBuilder(e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){return _.GpaBuilder.fromStruct(e,ee)}static deserialize(e,t=0){return ee.deserialize(e,t)}serialize(){return ee.serialize({accountDiscriminator:It,...this})}static get byteSize(){return ee.byteSize}static async getMinimumBalanceForRentExemption(e,t){return e.getMinimumBalanceForRentExemption(N.byteSize,t)}static hasCorrectByteSize(e,t=0){return e.byteLength-t===N.byteSize}pretty(){return{user:this.user.toBase58(),pair:this.pair.toBase58()}}}const ee=new a.BeetStruct([["accountDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["user",_.publicKey],["pair",_.publicKey]],N.fromArgs,"WhitelistedUserInfo"),J=new Map,K=new Map;class le extends Error{constructor(){super("Unauthorized action");A(this,"code",6e3);A(this,"name","Unauthorized");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,le)}}J.set(6e3,()=>new le);K.set("Unauthorized",()=>new le);class de extends Error{constructor(){super("Paused");A(this,"code",6001);A(this,"name","IsPaused");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,de)}}J.set(6001,()=>new de);K.set("IsPaused",()=>new de);class me extends Error{constructor(){super("Already resumed");A(this,"code",6002);A(this,"name","AlreadyResumed");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,me)}}J.set(6002,()=>new me);K.set("AlreadyResumed",()=>new me);class fe extends Error{constructor(){super("Pair still have locked tokens");A(this,"code",6003);A(this,"name","StillRemainingLockedTokens");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fe)}}J.set(6003,()=>new fe);K.set("StillRemainingLockedTokens",()=>new fe);class pe extends Error{constructor(){super("User is blocked");A(this,"code",6004);A(this,"name","IsBlocked");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pe)}}J.set(6004,()=>new pe);K.set("IsBlocked",()=>new pe);class ye extends Error{constructor(){super("User is already unblocked");A(this,"code",6005);A(this,"name","AlreadyUnblocked");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ye)}}J.set(6005,()=>new ye);K.set("AlreadyUnblocked",()=>new ye);class ge extends Error{constructor(){super("Insufficient locked amount");A(this,"code",6006);A(this,"name","InsufficientLockedAmount");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ge)}}J.set(6006,()=>new ge);K.set("InsufficientLockedAmount",()=>new ge);class he extends Error{constructor(){super("Insufficient funds");A(this,"code",6007);A(this,"name","InsufficientFunds");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,he)}}J.set(6007,()=>new he);K.set("InsufficientFunds",()=>new he);const Mt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["key",_.publicKey]],"AddManagerInstructionArgs"),xt=[125,38,192,212,101,91,179,16];function Dt(i,e,t=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[s]=Mt.serialize({instructionDiscriminator:xt,...e}),n=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.admin,isWritable:!1,isSigner:!1},{pubkey:i.manager,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const c of i.anchorRemainingAccounts)n.push(c);return new x({programId:t,keys:n,data:s})}const Wt=new a.FixableBeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["policy",a.coption(_.publicKey)],["ratio",ve]],"AddPairInstructionArgs"),zt=[209,230,17,236,218,162,86,118];function Rt(i,e,t=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[s]=Wt.serialize({instructionDiscriminator:zt,...e}),n=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.manager,isWritable:!1,isSigner:!1},{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.pairAuthority,isWritable:!1,isSigner:!1},{pubkey:i.tokenA,isWritable:!0,isSigner:!1},{pubkey:i.tokenB,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const c of i.anchorRemainingAccounts)n.push(c);return new x({programId:t,keys:n,data:s})}const Ut=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"AddUserToWhitelistInstructionArgs"),Ft=[244,177,124,12,22,50,139,152];function Jt(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=Ut.serialize({instructionDiscriminator:Ft}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.manager,isWritable:!1,isSigner:!1},{pubkey:i.user,isWritable:!0,isSigner:!1},{pubkey:i.userAuthority,isWritable:!1,isSigner:!1},{pubkey:i.whitelistedUserInfo,isWritable:!0,isSigner:!1},{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.tokenA,isWritable:!0,isSigner:!1},{pubkey:i.tokenB,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const Kt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"BlockUserInstructionArgs"),Ct=[10,164,178,6,231,175,185,191];function Et(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=Kt.serialize({instructionDiscriminator:Ct}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.manager,isWritable:!1,isSigner:!1},{pubkey:i.user,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const Vt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["amount",a.u64]],"LockTokensInstructionArgs"),Lt=[136,11,32,232,161,117,54,211];function Qt(i,e,t=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[s]=Vt.serialize({instructionDiscriminator:Lt,...e}),n=[{pubkey:i.proofRequest??t,isWritable:!1,isSigner:!1},{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.pairAuthority,isWritable:!1,isSigner:!1},{pubkey:i.user,isWritable:!1,isSigner:!1},{pubkey:i.userAuthority,isWritable:!0,isSigner:!0},{pubkey:i.whitelistedUserInfo,isWritable:!1,isSigner:!1},{pubkey:i.admin,isWritable:!1,isSigner:!1},{pubkey:i.manager,isWritable:!1,isSigner:!1},{pubkey:i.tokenA,isWritable:!0,isSigner:!1},{pubkey:i.tokenB,isWritable:!0,isSigner:!1},{pubkey:i.sourceA,isWritable:!0,isSigner:!1},{pubkey:i.destinationA,isWritable:!0,isSigner:!1},{pubkey:i.destinationB,isWritable:!0,isSigner:!1},{pubkey:i.feePayer,isWritable:!0,isSigner:!0},{pubkey:i.feeReceiver,isWritable:!0,isSigner:!1},{pubkey:i.tokenProgram??te,isWritable:!1,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const c of i.anchorRemainingAccounts)n.push(c);return new x({programId:t,keys:n,data:s})}const Nt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"PausePairsInstructionArgs"),Zt=[147,150,152,192,119,95,137,64];function $t(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=Nt.serialize({instructionDiscriminator:Zt}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.manager,isWritable:!0,isSigner:!1},{pubkey:i.admin,isWritable:!1,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const Ht=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"PausePlatformInstructionArgs"),qt=[232,46,204,130,181,0,172,57];function jt(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=Ht.serialize({instructionDiscriminator:qt}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.admin,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const Ot=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"RemoveManagerInstructionArgs"),Gt=[150,55,157,77,128,148,7,15];function Xt(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=Ot.serialize({instructionDiscriminator:Gt}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.manager,isWritable:!0,isSigner:!1},{pubkey:i.admin,isWritable:!1,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const Yt=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"RemovePairInstructionArgs"),ei=[181,42,154,249,167,123,20,81];function ti(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=Yt.serialize({instructionDiscriminator:ei}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const ii=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"RemoveUserFromWhitelistInstructionArgs"),ni=[198,73,139,218,243,209,180,182];function si(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=ii.serialize({instructionDiscriminator:ni}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.whitelistedUserInfo,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const ri=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"ResumePairsInstructionArgs"),ai=[23,106,248,226,173,20,247,74];function oi(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=ri.serialize({instructionDiscriminator:ai}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.manager,isWritable:!0,isSigner:!1},{pubkey:i.admin,isWritable:!1,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const ci=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"ResumePlatformInstructionArgs"),ui=[23,162,56,123,186,207,109,131];function li(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=ci.serialize({instructionDiscriminator:ui}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.admin,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const di=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["key",_.publicKey]],"SetAdminInstructionArgs"),mi=[251,163,0,52,91,194,187,92];function fi(i,e,t=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[s]=di.serialize({instructionDiscriminator:mi,...e}),n=[{pubkey:i.admin,isWritable:!0,isSigner:!1},{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const c of i.anchorRemainingAccounts)n.push(c);return new x({programId:t,keys:n,data:s})}const pi=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)]],"UnblockUserInstructionArgs"),yi=[216,208,128,98,74,210,18,114];function gi(i,e=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[t]=pi.serialize({instructionDiscriminator:yi}),s=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.manager,isWritable:!1,isSigner:!1},{pubkey:i.user,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const r of i.anchorRemainingAccounts)s.push(r);return new x({programId:e,keys:s,data:t})}const hi=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["amount",a.u64]],"UnlockTokensInstructionArgs"),ki=[233,35,95,159,37,185,47,88];function bi(i,e,t=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[s]=hi.serialize({instructionDiscriminator:ki,...e}),n=[{pubkey:i.proofRequest??t,isWritable:!1,isSigner:!1},{pubkey:i.user,isWritable:!1,isSigner:!1},{pubkey:i.userAuthority,isWritable:!0,isSigner:!0},{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.pairAuthority,isWritable:!1,isSigner:!1},{pubkey:i.whitelistedUserInfo,isWritable:!1,isSigner:!1},{pubkey:i.manager,isWritable:!1,isSigner:!1},{pubkey:i.admin,isWritable:!1,isSigner:!1},{pubkey:i.tokenA,isWritable:!0,isSigner:!1},{pubkey:i.tokenB,isWritable:!0,isSigner:!1},{pubkey:i.sourceA,isWritable:!0,isSigner:!1},{pubkey:i.destinationA,isWritable:!0,isSigner:!1},{pubkey:i.sourceB,isWritable:!0,isSigner:!1},{pubkey:i.feePayer,isWritable:!0,isSigner:!0},{pubkey:i.feeReceiver,isWritable:!0,isSigner:!1},{pubkey:i.tokenProgram??te,isWritable:!1,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const c of i.anchorRemainingAccounts)n.push(c);return new x({programId:t,keys:n,data:s})}const Si=new a.FixableBeetArgsStruct([["newAuthority",a.coption(_.publicKey)],["isPaused",a.coption(a.bool)],["ratio",a.coption(ve)],["lockFee",a.coption(a.u16)],["unlockFee",a.coption(a.u16)],["feeReceiver",a.coption(_.publicKey)]],"UpdatePairData"),Ai=new a.FixableBeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["data",Si]],"UpdatePairInstructionArgs"),wi=[176,62,36,215,255,206,35,12];function vi(i,e,t=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[s]=Ai.serialize({instructionDiscriminator:wi,...e}),n=[{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const c of i.anchorRemainingAccounts)n.push(c);return new x({programId:t,keys:n,data:s})}const _i=new a.BeetArgsStruct([["instructionDiscriminator",a.uniformFixedSizeArray(a.u8,8)],["amount",a.u64]],"WithdrawFeeInstructionArgs"),Pi=[14,122,231,218,31,238,223,150];function Ti(i,e,t=new g("JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm")){const[s]=_i.serialize({instructionDiscriminator:Pi,...e}),n=[{pubkey:i.pair,isWritable:!0,isSigner:!1},{pubkey:i.pairAuthority,isWritable:!0,isSigner:!1},{pubkey:i.destination,isWritable:!0,isSigner:!1},{pubkey:i.authority,isWritable:!0,isSigner:!0},{pubkey:i.systemProgram??I.programId,isWritable:!1,isSigner:!1}];if(i.anchorRemainingAccounts!=null)for(const c of i.anchorRemainingAccounts)n.push(c);return new x({programId:t,keys:n,data:s})}const Bi="JDe51ZjpQ3tZzL6QTVPHt5VT5NzaDuJnrTmJJUFrC3vm",We=new g(Bi),Ii={version:"0.0.6",name:"smart_converter",instructions:[{name:"setAdmin",accounts:[{name:"admin",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"key",type:"publicKey"}]},{name:"addManager",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"admin",isMut:!1,isSigner:!1},{name:"manager",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"key",type:"publicKey"}]},{name:"addPair",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!1,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"policy",type:{option:"publicKey"}},{name:"ratio",type:{defined:"Ratio"}}]},{name:"addUserToWhitelist",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"user",isMut:!0,isSigner:!1},{name:"userAuthority",isMut:!1,isSigner:!1},{name:"whitelistedUserInfo",isMut:!0,isSigner:!1},{name:"pair",isMut:!0,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"removeUserFromWhitelist",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"whitelistedUserInfo",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"pausePlatform",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"admin",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"resumePlatform",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"admin",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"lockTokens",accounts:[{name:"proofRequest",isMut:!1,isSigner:!1,isOptional:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!1,isSigner:!1},{name:"user",isMut:!1,isSigner:!1},{name:"userAuthority",isMut:!0,isSigner:!0},{name:"whitelistedUserInfo",isMut:!1,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"manager",isMut:!1,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"sourceA",isMut:!0,isSigner:!1},{name:"destinationA",isMut:!0,isSigner:!1},{name:"destinationB",isMut:!0,isSigner:!1},{name:"feePayer",isMut:!0,isSigner:!0},{name:"feeReceiver",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"unlockTokens",accounts:[{name:"proofRequest",isMut:!1,isSigner:!1,isOptional:!0},{name:"user",isMut:!1,isSigner:!1},{name:"userAuthority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!1,isSigner:!1},{name:"whitelistedUserInfo",isMut:!1,isSigner:!1},{name:"manager",isMut:!1,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"tokenA",isMut:!0,isSigner:!1},{name:"tokenB",isMut:!0,isSigner:!1},{name:"sourceA",isMut:!0,isSigner:!1},{name:"destinationA",isMut:!0,isSigner:!1},{name:"sourceB",isMut:!0,isSigner:!1},{name:"feePayer",isMut:!0,isSigner:!0},{name:"feeReceiver",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"removeManager",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"pausePairs",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"resumePairs",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!0,isSigner:!1},{name:"admin",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"removePair",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"updatePair",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pair",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"UpdatePairData"}}]},{name:"blockUser",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"user",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"unblockUser",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"manager",isMut:!1,isSigner:!1},{name:"user",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"withdrawFee",accounts:[{name:"pair",isMut:!0,isSigner:!1},{name:"pairAuthority",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]}],accounts:[{name:"pair",type:{kind:"struct",fields:[{name:"authority",docs:["Manager authority"],type:"publicKey"},{name:"tokenA",docs:["Security token mint address"],type:"publicKey"},{name:"tokenB",docs:["Utility token mint address"],type:"publicKey"},{name:"lockedAmount",docs:["Amount of security tokens currently locked"],type:"u64"},{name:"ratio",docs:["Ratio of token A to token B"],type:{defined:"Ratio"}},{name:"isPaused",docs:["Indicates if pair is paused or not"],type:"bool"},{name:"lockFee",docs:["Fee for locking token A"],type:"u16"},{name:"unlockFee",docs:["Fee for unlocking token A"],type:"u16"},{name:"feeReceiver",docs:["Wallet that will receive fee"],type:"publicKey"},{name:"policy",docs:["Albus policy"],type:{option:"publicKey"}}]}},{name:"admin",type:{kind:"struct",fields:[{name:"authority",docs:["Manager wallet address"],type:"publicKey"},{name:"isPlatformPaused",docs:["Indicates if platform is paused or not"],type:"bool"}]}},{name:"manager",type:{kind:"struct",fields:[{name:"authority",docs:["Manager address"],type:"publicKey"},{name:"isAllPaused",docs:["Indicates if manager's pairs are paused or not"],type:"bool"}]}},{name:"user",type:{kind:"struct",fields:[{name:"authority",docs:["User address"],type:"publicKey"},{name:"isBlocked",docs:["Indicates if user is blocked or not"],type:"bool"}]}},{name:"whitelistedUserInfo",type:{kind:"struct",fields:[{name:"user",docs:["User address"],type:"publicKey"},{name:"pair",docs:["Pair address"],type:"publicKey"}]}}],types:[{name:"UpdatePairData",type:{kind:"struct",fields:[{name:"newAuthority",type:{option:"publicKey"}},{name:"isPaused",type:{option:"bool"}},{name:"ratio",type:{option:{defined:"Ratio"}}},{name:"lockFee",type:{option:"u16"}},{name:"unlockFee",type:{option:"u16"}},{name:"feeReceiver",type:{option:"publicKey"}}]}},{name:"Ratio",type:{kind:"struct",fields:[{name:"num",type:"u64"},{name:"denom",type:"u64"}]}}],events:[{name:"LockTokensEvent",fields:[{name:"pair",type:"publicKey",index:!0},{name:"user",type:"publicKey",index:!1},{name:"userAuthority",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"UnlockTokensEvent",fields:[{name:"pair",type:"publicKey",index:!0},{name:"user",type:"publicKey",index:!1},{name:"userAuthority",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1},{name:"timestamp",type:"i64",index:!1}]}],errors:[{code:6e3,name:"Unauthorized",msg:"Unauthorized action"},{code:6001,name:"IsPaused",msg:"Paused"},{code:6002,name:"AlreadyResumed",msg:"Already resumed"},{code:6003,name:"StillRemainingLockedTokens",msg:"Pair still have locked tokens"},{code:6004,name:"IsBlocked",msg:"User is blocked"},{code:6005,name:"AlreadyUnblocked",msg:"User is already unblocked"},{code:6006,name:"InsufficientLockedAmount",msg:"Insufficient locked amount"},{code:6007,name:"InsufficientFunds",msg:"Insufficient funds"}]};function ze(i){return"version"in i}class Mi{constructor(e){this.payer=e}async signTransaction(e){return ze(e)?e.sign([this.payer]):e.partialSign(this.payer),e}async signAllTransactions(e){return e.map(t=>(ze(t)?t.sign([this.payer]):t.partialSign(this.payer),t))}get publicKey(){return this.payer.publicKey}}const xi="user",Di="manager",Wi="pair",zi="admin",Ri="whitelist",oe=class oe{constructor(e){A(this,"program");this.provider=e,this.program=new Ge(Ii,We,e)}static fromWallet(e,t,s){return new this(new _e(e,t??{publicKey:g.default},{..._e.defaultOptions(),...s}))}static fromKeypair(e,t,s){return oe.fromWallet(e,new Mi(t),s)}get idl(){return this.program.idl}get pda(){return new Ui}fetchManager(e){return this.program.account.manager.fetchNullable(e)}fetchAdmin(e){return this.program.account.admin.fetchNullable(e??this.pda.admin()[0])}fetchUser(e){return this.program.account.user.fetchNullable(e)}fetchPair(e){return this.program.account.pair.fetchNullable(e)}fetchWhitelistedUserInfo(e){return this.program.account.whitelistedUserInfo.fetchNullable(e)}fetchWhitelistedUserInfoByUserAndPair(e,t){const[s]=this.pda.whitelistedUserInfo(e,t);return this.fetchWhitelistedUserInfo(s)}findManagers(){return this.program.account.manager.all()}findPairs(){return this.program.account.pair.all()}async findManagerPairs(e){return(await this.program.account.pair.all()).filter(s=>s.account.authority.toBase58()===e.toBase58())}async findWhitelistedUsers(e){return(await this.program.account.whitelistedUserInfo.all()).filter(s=>s.account.pair.toBase58()===e.toBase58())}async findUserWhitelistInfos(e){return(await this.program.account.whitelistedUserInfo.all()).filter(s=>s.account.user.toBase58()===e.toBase58())}async addManager(e){const t=this.provider.publicKey,[s]=this.pda.manager(e.managerWallet),[n]=this.pda.admin(),r=Dt({authority:t,admin:n,manager:s},{key:e.managerWallet}),c=new M().add(r);return{signature:await this.provider.sendAndConfirm(c),manager:s}}async addPair(e){const t=this.provider.publicKey,[s]=this.pda.manager(t),n=e.tokenA;let r=e.tokenB;const c=new M,l=[];let d,p;if(r)d=this.pda.pair(n,r)[0],p=this.pda.pairAuthority(d)[0],c.add(bt(r,this.provider.publicKey,St.MintTokens,p));else{const m=e.tokenBKeypair??Je.generate();r=m.publicKey,l.push(m),d=this.pda.pair(n,r)[0],p=this.pda.pairAuthority(d)[0];const f=await Xe(this.provider.connection);c.add(I.createAccount({fromPubkey:t,newAccountPubkey:m.publicKey,space:Ye,lamports:f,programId:te}),et(m.publicKey,9,p,null,te))}return await this.handleMissingTokenAccount(c,n,p),await this.handleMissingTokenAccount(c,r,p),c.add(Rt({authority:t,manager:s,pair:d,pairAuthority:p,tokenA:n,tokenB:r},{ratio:e.ratio??{num:1,denom:1},policy:e.policy??null})),{signature:await this.provider.sendAndConfirm(c,l),pair:d}}async lockTokens(e){const t=this.provider.publicKey,s=e.tokenA,n=e.tokenB,[r]=this.pda.user(t),[c]=this.pda.pair(s,n),l=await this.fetchPair(c),[d]=this.pda.admin(),[p]=this.pda.manager(l.authority),[w]=this.pda.pairAuthority(c),[m]=this.pda.whitelistedUserInfo(t,c),f=new M,b=Pe(s,t),h=await this.handleMissingTokenAccount(f,s,w),P=await this.handleMissingTokenAccount(f,n,t);return f.add(Qt({proofRequest:e.proofRequest,user:r,userAuthority:t,pair:c,pairAuthority:w,admin:d,manager:p,whitelistedUserInfo:m,feePayer:e.feePayer??t,feeReceiver:l.feeReceiver,sourceA:b,destinationA:h,destinationB:P,tokenA:s,tokenB:n},{amount:new Ae(e.amount)})),{signature:await this.provider.sendAndConfirm(f),pair:c}}async unlockTokens(e){const t=this.provider.publicKey,s=e.tokenA,n=e.tokenB,[r]=this.pda.admin(),[c]=this.pda.user(t),[l]=this.pda.pair(s,n),[d]=this.pda.pairAuthority(l),[p]=this.pda.whitelistedUserInfo(t,l),w=await this.fetchPair(l),[m]=this.pda.manager(w.authority),f=new M,b=await this.handleMissingTokenAccount(f,n,t),h=await this.handleMissingTokenAccount(f,s,d),P=await this.handleMissingTokenAccount(f,s,t);return f.add(bi({proofRequest:e.proofRequest,user:c,userAuthority:t,pair:l,pairAuthority:d,feePayer:e.feePayer??t,feeReceiver:w.feeReceiver,whitelistedUserInfo:p,admin:r,destinationA:P,manager:m,sourceA:h,sourceB:b,tokenA:s,tokenB:n},{amount:new Ae(e.amount)})),{signature:await this.provider.sendAndConfirm(f),pair:l,user:c}}async addUserToWhitelist(e){const t=this.provider.publicKey,[s]=this.pda.manager(t),n=e.userWallet,[r]=this.pda.user(n),c=e.tokenA,l=e.tokenB,[d]=this.pda.pair(c,l),[p]=this.pda.whitelistedUserInfo(n,d),w=Jt({userAuthority:n,authority:t,manager:s,pair:d,tokenA:c,tokenB:l,user:r,whitelistedUserInfo:p}),m=new M().add(w);return{signature:await this.provider.sendAndConfirm(m),user:r,whitelistedUserInfo:p}}async removeUserFromWhitelist(e){const t=this.provider.publicKey,s=e.userWallet,[n]=this.pda.user(s),[r]=this.pda.pair(e.tokenA,e.tokenB),[c]=this.pda.whitelistedUserInfo(s,r),l=si({authority:t,pair:r,whitelistedUserInfo:c}),d=new M().add(l);return{signature:await this.provider.sendAndConfirm(d),user:n,whitelistedUserInfo:c}}async blockUser(e){const t=this.provider.publicKey,[s]=this.pda.manager(t),n=e.userWallet,[r]=this.pda.user(n),c=Et({authority:t,manager:s,user:r}),l=new M().add(c);return{signature:await this.provider.sendAndConfirm(l),user:r}}async unblockUser(e){const t=this.provider.publicKey,s=e.userWallet,[n]=this.pda.manager(t),[r]=this.pda.user(s),c=gi({authority:t,manager:n,user:r}),l=new M().add(c);return{signature:await this.provider.sendAndConfirm(l),user:r}}async pausePairs(e){const t=this.provider.publicKey,s=e.managerWallet,[n]=this.pda.manager(s),[r]=this.pda.admin(),c=$t({admin:r,authority:t,manager:n}),l=new M().add(c);return{signature:await this.provider.sendAndConfirm(l),manager:n}}async pausePlatform(){const e=this.provider.publicKey,[t]=this.pda.admin(),s=jt({admin:t,authority:e}),n=new M().add(s);return{signature:await this.provider.sendAndConfirm(n),admin:t}}async removeManager(e){const t=this.provider.publicKey,s=e.managerWallet,[n]=this.pda.manager(s),[r]=this.pda.admin(),c=Xt({admin:r,authority:t,manager:n}),l=new M().add(c);return{signature:await this.provider.sendAndConfirm(l),manager:n}}async removePair(e){const t=this.provider.publicKey,s=e.tokenA,n=e.tokenB,[r]=this.pda.pair(s,n),c=ti({authority:t,pair:r}),l=new M().add(c);return{signature:await this.provider.sendAndConfirm(l),pair:r}}async resumePairs(e){const t=this.provider.publicKey,s=e.managerWallet,[n]=this.pda.manager(s),[r]=this.pda.admin(),c=oi({authority:t,admin:r,manager:n}),l=new M().add(c);return{signature:await this.provider.sendAndConfirm(l),manager:n}}async resumePlatform(){const e=this.provider.publicKey,[t]=this.pda.admin(),s=li({authority:e,admin:t}),n=new M().add(s);return{signature:await this.provider.sendAndConfirm(n),admin:t}}async setAdmin(e){const t=this.provider.publicKey,[s]=this.pda.admin(),n=fi({authority:t,admin:s},{key:e.authority}),r=new M().add(n);return{signature:await this.provider.sendAndConfirm(r)}}async withdrawFee(e){const t=this.provider.publicKey,[s]=this.pda.pair(e.tokenA,e.tokenB),[n]=this.pda.pairAuthority(s),r=Ti({authority:t,pair:s,pairAuthority:n,destination:e.destination},{amount:new Ae(e.amount)}),c=new M().add(r);return{signature:await this.provider.sendAndConfirm(c)}}async updatePair(e){const t=this.provider.publicKey,s=e.tokenA,n=e.tokenB,[r]=this.pda.pair(s,n),c=vi({authority:t,pair:r},{data:{feeReceiver:e.feeReceiver??null,lockFee:e.lockFee??null,unlockFee:e.unlockFee??null,newAuthority:e.newAuthority??null,isPaused:e.isPaused??null,ratio:e.ratio??null}}),l=new M().add(c);return{signature:await this.provider.sendAndConfirm(l),pair:r}}async handleMissingTokenAccount(e,t,s){const n=s??this.provider.publicKey,r=Pe(t,n,!0);try{await tt(this.provider.connection,r)}catch(c){(c instanceof it||c instanceof nt)&&e.add(st(this.provider.publicKey,r,n,t))}return r}};A(oe,"programId",We);let ae=oe;class Ui{constructor(){A(this,"pairAuthority",e=>this.pda([new g(e).toBuffer()]));A(this,"admin",()=>this.pda([Z.Buffer.from(zi)]));A(this,"manager",e=>this.pda([Z.Buffer.from(Di),new g(e).toBuffer()]));A(this,"user",e=>this.pda([Z.Buffer.from(xi),new g(e).toBuffer()]));A(this,"pair",(e,t)=>this.pda([Z.Buffer.from(Wi),new g(e).toBuffer(),new g(t).toBuffer()]));A(this,"whitelistedUserInfo",(e,t)=>this.pda([Z.Buffer.from(Ri),new g(e).toBuffer(),new g(t).toBuffer()]))}pda(e){return g.findProgramAddressSync(e,ae.programId)}}const ke=rt("converter",()=>{const i=ce(),e=Ke(),{setContractPolicy:t,contractPolicy:s}=Ce(),n=at({from:{amount:void 0},to:{amount:void 0},token:void 0,allTokens:[],pairs:[],selectedPair:void 0,searchToken:"",converting:!1,loading:!1,isLock:!0}),r=v(()=>ae.fromWallet(i.connection,e.value));async function c(m,f,b){try{const h=await ct.Metadata.fromAccountAddress(m,ut(f)),P=h.data?.uri;if(P){const{data:y}=await lt.get(P);return{...y,image:re(y?.image)}}return h}catch{return{symbol:b,image:re()}}}const l=m=>n.allTokens.find(b=>b.mint.toBase58()===m)?.balance??0,d=async()=>{try{const m=e.value?.publicKey;if(!m)return;n.allTokens=await ot(i.connection,m)}catch(m){console.log(m)}},p=async()=>{try{n.loading=!0;const m=await r.value.findPairs();if(n.pairs.length!==0)return;const f=await Promise.all(m.map(async b=>{const h=b.account,P=h.tokenA.toBase58(),y=h.tokenB.toBase58(),R=await c(i.connection,P,"tokenA"),T=await c(i.connection,y,"tokenB"),D={[P]:R,[y]:T};return{...b,tokensMetadata:D}}));n.pairs=f}catch(m){console.log(m)}finally{n.loading=!1}},w=async m=>{try{n.loading=!0;const f=await r.value.fetchPair(m);if(f){const b=n.pairs.findIndex(h=>h.publicKey.toBase58()===m);if(b!==-1){const h=n.pairs[b];n.pairs[b]={...h,account:f},n.selectedPair=n.pairs[b]}}}catch(f){console.log(f),await p()}finally{n.loading=!1}};return Ee([()=>i.cluster,()=>r.value],async()=>{i.cluster==="devnet"&&await p()},{immediate:!0,debounce:500,maxWait:1e3}),$(()=>i.cluster,m=>{m!=="devnet"&&(n.pairs=[],n.selectedPair=void 0,n.token=void 0,n.from={amount:void 0},n.to={amount:void 0},s?.converter&&delete s?.converter)}),$(()=>e.value?.publicKey,async m=>{if(!m){n.allTokens=[],n.from.balance=0,n.to.balance=0;return}await d()},{immediate:!0}),$([()=>n.token,()=>n.allTokens,()=>n.pairs],([m])=>{const f=n.selectedPair;if(!f)return;const b=f.account?.policy;b&&t(String(b));for(const h in f.tokensMetadata){const P=f.tokensMetadata[h],y=l(String(h));h===m?.mint?n.from={...P,balance:y,amount:void 0}:n.to={...P,balance:y,amount:void 0}}}),$(()=>n.isLock,()=>{n.token=void 0}),{state:n,getAllTokens:d,updatePairData:w,converterClient:r}});function $e(){const i=ke(),e=Ce(),t=ce(),{notify:s}=Ve();function n(y){console.log("set token ======== ",y),i.state.selectedPair=i.state.pairs.find(R=>R.publicKey.toBase58()===y?.publicKey?.toBase58()),i.state.token=y}function r(y){i.state.searchToken=y}const c=v(()=>i.state.pairs.map(T=>{const D=Object.entries(T.tokensMetadata)[i.state.isLock?0:1];return{...D[1],mint:D[0],publicKey:T.publicKey}}).flat().filter(T=>T.symbol.toLowerCase().includes(i.state.searchToken.toLowerCase()))),l=v(()=>i.state.selectedPair?.account),d=v(()=>l.value?.ratio?.num?.toNumber()??1),p=v(()=>l.value?.lockedAmount?l.value?.lockedAmount?.toNumber()/Te:0),w=v(()=>l.value?.lockFee),m=v(()=>{const y=l.value?.tokenA?.toString();return xe(y,i.state.selectedPair?.tokensMetadata)}),f=v(()=>{const y=l.value?.tokenB?.toString();return xe(y,i.state.selectedPair?.tokensMetadata)}),b=v(()=>i.state.pairs.length===0),h=v(()=>!!e.state.certificates?.find(y=>y.data?.policy.toBase58()===String(e.requiredPolicy)));async function P(y=!0){const R=e.state.certificates?.find(T=>T.data?.policy.toBase58()===String(e.requiredPolicy))?.pubkey;if(!(!l.value||!R))try{i.state.converting=!0;const T=l.value.tokenA,D=l.value.tokenB,j=Number(i.state.from.amount*Te)/(i.state.isLock?1:d.value);let z;y?z=await i.converterClient.lockTokens({tokenA:T,tokenB:D,amount:j,proofRequest:R}):z=await i.converterClient.unlockTokens({tokenA:T,tokenB:D,amount:j,proofRequest:R}),s({message:"Transaction confirmed",type:"positive",actions:[{label:"Explore",color:"white",target:"_blank",href:`https://explorer.solana.com/tx/${z.signature}?cluster=${t.cluster}`,onClick:()=>!1}]}),setTimeout(async()=>{Promise.all([await i.getAllTokens(),await i.updatePairData(i.state.selectedPair.publicKey.toBase58())])},1e3)}catch(T){console.error("lockedToken error: ",T),s({type:"negative",message:`${T}`})}finally{i.state.converting=!1}}return Ee(c,y=>{y.length!==0&&!i.state.token&&n(y[0])},{immediate:!0,debounce:100,maxWait:1e3}),$(()=>i.state.from.amount,y=>{if(!y){i.state.to.amount=void 0;return}i.state.to.amount=i.state.isLock?y*d.value:y/d.value}),{options:c,setToken:n,handleSearchToken:r,pairRatio:d,pairLockedAmount:p,pairLockFee:w,tokenASymbol:m,tokenBSymbol:f,isHaveCertificate:h,lockUnlockToken:P,isDisabledInputs:b}}const Fi={class:"swap-form"},Ji={class:"swap-field"},Ki={class:"swap-field__info"},Ci={class:"row items-end"},Ei=u("div",{class:"col swap-field__label"}," FROM: ",-1),Vi={class:"col-8 col-xs-10 row justify-end swap-field__balance"},Li={key:0,class:"insufficient-error"},Qi=u("div",{class:"swap-change"},null,-1),Ni={class:"swap-field"},Zi={class:"swap-field__info"},$i={class:"row"},Hi=u("div",{class:"col swap-field__label"}," TO: ",-1),qi={class:"col swap-field__balance"},ji={class:"convert-to"},Oi=["src"],Gi={class:"swap-info q-mt-md q-pt-xs"},Xi=u("dt",null,"Received",-1),Yi=u("dt",null,"Locked amount",-1),en=u("dt",null,"Ratio",-1),tn={key:0},nn={key:1},sn=u("dt",null,"Lock fee",-1),rn={class:"swap-submit q-mt-md"},an={class:"row q-mt-md text-center relative-position full-width"},on={class:"swap-rate q-mx-auto"},cn=ue({__name:"UnlockCard",setup(i){const{state:e}=ke(),{options:t,setToken:s,handleSearchToken:n,pairRatio:r,pairLockedAmount:c,pairLockFee:l,tokenASymbol:d,tokenBSymbol:p,isHaveCertificate:w,lockUnlockToken:m,isDisabledInputs:f}=$e();e.isLock=!1;const b=Ke(),h=v(()=>e.from.balance),P=v(()=>e.to.balance),y=v(()=>e.to.amount??0);function R(){e.from.amount=h.value}async function T(){await m(!1)}const D=v(()=>e.from.amount>h.value?"Insufficient funds":!1);return(j,z)=>{const be=Fe,Se=Re;return W(),ie(we,{class:"swap-card swap-widget converting-card"},{default:B(()=>[k(Le,{class:"swap-card__body"},{default:B(()=>[u("div",Fi,[u("div",Ji,[u("div",Ki,[u("div",Ci,[Ei,u("div",Vi,[o(D)?(W(),F("div",Li,S(o(D)),1)):H("",!0),U(" Balance: "+S(o(ne)(o(h))),1)])])]),k(se,{modelValue:o(e).from.amount,"onUpdate:modelValue":z[0]||(z[0]=C=>o(e).from.amount=C),maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input",disable:o(f),onKeypress:o(Ue)},{append:B(()=>[k(q,{disable:o(f),dense:"",unelevated:"",ripple:!1,class:"swap-input__max",onClick:R},{default:B(()=>[U(" MAX ")]),_:1},8,["disable"]),o(e).token?(W(),ie(be,{key:0,options:o(t),token:o(e).token,"swap-token":String(o(e).to.symbol),onHandleSearchToken:o(n),onSetToken:o(s)},null,8,["options","token","swap-token","onHandleSearchToken","onSetToken"])):H("",!0)]),_:1},8,["modelValue","disable","onKeypress"])]),Qi,u("div",Ni,[u("div",Zi,[u("div",$i,[Hi,u("div",qi," Balance: "+S(o(ne)(o(P))),1)])]),k(se,{modelValue:o(e).to.amount,"onUpdate:modelValue":z[1]||(z[1]=C=>o(e).to.amount=C),disable:o(f),readonly:"",maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input"},Qe({_:2},[o(e).to?.symbol?{name:"append",fn:B(()=>[u("div",ji,[u("img",{src:o(re)(o(e).to?.image)},null,8,Oi),U(),u("span",null,S(o(e).to?.symbol),1)])]),key:"0"}:void 0]),1032,["modelValue","disable"])])]),u("div",Gi,[u("dl",null,[Xi,u("dd",null,S(o(y))+" "+S(o(p)),1)]),u("dl",null,[Yi,u("dd",null,S(o(c))+" "+S(o(d)),1)]),u("dl",null,[en,o(r)?(W(),F("dd",tn,S(o(r))+":1 ",1)):(W(),F("dd",nn," - "))]),u("dl",null,[sn,u("dd",null,S(o(l))+" SOL",1)])]),k(Se,{class:"q-mt-md q-mx-auto"}),u("div",rn,[k(q,{loading:o(e).converting,rounded:"",ripple:!1,disable:!o(b)?.publicKey||!o(e).from.amount||o(e).from.amount<=0||!!o(D)||!o(w),onClick:T},{default:B(()=>[U(" Unlock token ")]),_:1},8,["loading","disable"])]),u("div",an,[u("div",on," 1 "+S(o(p))+" = "+S(1/o(r))+" "+S(o(d)),1)])]),_:1}),k(Ne,{showing:o(e)?.loading,class:"swap-loading",color:"grey"},null,8,["showing"])]),_:1})}}}),un={class:"swap-form"},ln={class:"swap-field"},dn={class:"swap-field__info"},mn={class:"row items-end"},fn=u("div",{class:"col swap-field__label"}," FROM: ",-1),pn={class:"col-8 col-xs-10 row justify-end swap-field__balance"},yn={key:0,class:"insufficient-error"},gn=u("div",{class:"swap-change"},null,-1),hn={class:"swap-field"},kn={class:"swap-field__info"},bn={class:"row"},Sn=u("div",{class:"col swap-field__label"}," TO: ",-1),An={class:"col swap-field__balance"},wn={class:"convert-to"},vn=["src"],_n={class:"swap-info q-mt-md q-pt-xs"},Pn=u("dt",null,"Received",-1),Tn=u("dt",null,"Locked amount",-1),Bn=u("dt",null,"Ratio",-1),In={key:0},Mn={key:1},xn=u("dt",null,"Lock fee",-1),Dn={class:"swap-submit q-mt-md"},Wn={class:"row q-mt-md text-center relative-position full-width"},zn={class:"swap-rate q-mx-auto"},Rn=ue({__name:"LockCard",setup(i){const e=Ze(),{state:t}=ke(),{options:s,setToken:n,handleSearchToken:r,pairRatio:c,pairLockedAmount:l,pairLockFee:d,tokenASymbol:p,tokenBSymbol:w,isHaveCertificate:m,lockUnlockToken:f,isDisabledInputs:b}=$e();t.isLock=!0;const h=v(()=>t.from.balance),P=v(()=>t.to.balance),y=v(()=>t.to.amount??0);function R(){t.from.amount=h.value}async function T(){await f()}const D=v(()=>t.from.amount>h.value?"Insufficient funds":!1);return(j,z)=>{const be=Fe,Se=Re;return W(),ie(we,{class:"swap-card swap-widget converting-card"},{default:B(()=>[k(Le,{class:"swap-card__body"},{default:B(()=>[u("div",un,[u("div",ln,[u("div",dn,[u("div",mn,[fn,u("div",pn,[o(D)?(W(),F("div",yn,S(o(D)),1)):H("",!0),U(" Balance: "+S(o(ne)(o(h))),1)])])]),k(se,{modelValue:o(t).from.amount,"onUpdate:modelValue":z[0]||(z[0]=C=>o(t).from.amount=C),maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input",disable:o(b),onKeypress:o(Ue)},{append:B(()=>[k(q,{disable:o(b),dense:"",unelevated:"",ripple:!1,class:"swap-input__max",onClick:R},{default:B(()=>[U(" MAX ")]),_:1},8,["disable"]),o(t).token?(W(),ie(be,{key:0,options:o(s),token:o(t).token,"swap-token":String(o(t).to.symbol),onHandleSearchToken:o(r),onSetToken:o(n)},null,8,["options","token","swap-token","onHandleSearchToken","onSetToken"])):H("",!0)]),_:1},8,["modelValue","disable","onKeypress"])]),gn,u("div",hn,[u("div",kn,[u("div",bn,[Sn,u("div",An," Balance: "+S(o(ne)(o(P))),1)])]),k(se,{modelValue:o(t).to.amount,"onUpdate:modelValue":z[1]||(z[1]=C=>o(t).to.amount=C),disable:o(b),readonly:"",maxlength:14,outlined:"",placeholder:"0.0",class:"swap-input"},Qe({_:2},[o(t).to?.symbol?{name:"append",fn:B(()=>[u("div",wn,[u("img",{src:o(re)(o(t).to?.image)},null,8,vn),U(),u("span",null,S(o(t).to?.symbol),1)])]),key:"0"}:void 0]),1032,["modelValue","disable"])])]),u("div",_n,[u("dl",null,[Pn,u("dd",null,S(o(y))+" "+S(o(w)),1)]),u("dl",null,[Tn,u("dd",null,S(o(l))+" "+S(o(p)),1)]),u("dl",null,[Bn,o(c)?(W(),F("dd",In," 1:"+S(o(c)),1)):(W(),F("dd",Mn," - "))]),u("dl",null,[xn,u("dd",null,S(o(d))+" SOL",1)])]),k(Se,{class:"q-mt-md q-mx-auto"}),u("div",Dn,[k(q,{loading:o(t).converting,rounded:"",ripple:!1,disable:!o(e)?.publicKey||!o(t).from.amount||o(t).from.amount<=0||!!o(D)||!o(m),onClick:T},{default:B(()=>[U(" Lock token ")]),_:1},8,["loading","disable"])]),u("div",Wn,[u("div",zn," 1 "+S(o(p))+" = "+S(o(c))+" "+S(o(w)),1)])]),_:1}),k(Ne,{showing:o(t)?.loading,class:"swap-loading",color:"grey"},null,8,["showing"])]),_:1})}}}),Un="/assets/faucet-icon-e5ad8100.svg",Fn={class:"converter"},Jn=u("div",{class:"converter-faucet__descr"}," To get the opTK token, click on faucet. ",-1),Kn=["src"],Cn=ue({__name:"ConverterCard",setup(i){const e=ce(),{publicKey:t}=Ze(),s=ke(),{notify:n}=Ve(),r=dt("lock"),c=v(()=>e.cluster==="devnet");async function l(){if(t.value)try{s.state.loading=!0;const d=Je.fromSecretKey(At.decode("38f57pVjJEb9wGuzAmonU2k76ctmrDWBVyn9v5hMMURLVqYC5xWwd31UhHAWmNkTwvh1r8d1SgNoLKTiDUDnTo1u")),p=new g("CDcwg5UiZcXBtQ7eBRZpSr23vHntpGotmmgCSoxAjfrM"),w=await wt(e.connection,d,p,t.value);await vt(e.connection,d,p,w.address,d,1e10),await s.getAllTokens(),s.state.from.amount=10,n({type:"positive",message:"You got 10 opTK"})}catch(d){console.log("failed mint e:",d)}finally{s.state.loading=!1}}return(d,p)=>{const w=Rn,m=cn;return W(),F("div",Fn,[o(s).state.pairs.length!==0&&o(c)&&o(t)?(W(),F("div",{key:0,class:"converter-faucet",onClick:l},[Jn,u("img",{src:o(Un),alt:"faucet icon"},null,8,Kn)])):H("",!0),k(we,{class:"liquidity-tabs swap-card swap-widget"},{default:B(()=>[k(mt,{modelValue:o(r),"onUpdate:modelValue":p[0]||(p[0]=f=>Be(r)?r.value=f:null),align:"justify","indicator-color":"transparent",class:ft(d.$q.dark.isActive?"bg-blue-grey-9":"bg-grey-3"),"active-color":"white","active-bg-color":"primary"},{default:B(()=>[k(Ie,{ripple:!1,label:"LOCK",name:"lock"}),k(Ie,{ripple:!1,label:"UNLOCK",name:"unlock"})]),_:1},8,["modelValue","class"]),k(pt,{modelValue:o(r),"onUpdate:modelValue":p[1]||(p[1]=f=>Be(r)?r.value=f:null),animated:"",class:"bg-transparent"},{default:B(()=>[k(Me,{name:"lock"},{default:B(()=>[k(w)]),_:1}),k(Me,{name:"unlock"},{default:B(()=>[k(m)]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});const En={class:"app-description converter-description"},Vn={class:"app-description__details"},Ln=ue({__name:"ConverterDescription",setup(i){const e=yt("rpc",""),t=ce(),s=v(()=>e.value==="devnet");function n(){s.value||t.setRpc("devnet")}return gt(()=>{}),(r,c)=>(W(),F("div",En,[u("div",Vn,[U(" The converter works exclusively in presentation mode and only on the devnet network. You can get acquainted with the functionality by switching Solana RPC Network. "),k(q,{disable:o(s),class:"switch-network-btn",unelevated:"",onClick:n},{default:B(()=>[U(" switch network ")]),_:1},8,["disable"])])]))}});const Qn={},Nn={class:"main-block row justify-center"};function Zn(i,e){const t=Ln,s=Cn,n=je,r=Oe;return W(),F(kt,null,[k(t,{class:"q-mt-lg"}),u("div",Nn,[k(s)]),k(n,{class:"q-mt-lg"}),k(r,{class:"q-mt-lg"})],64)}const es=ht(Qn,[["render",Zn]]);export{es as default};
