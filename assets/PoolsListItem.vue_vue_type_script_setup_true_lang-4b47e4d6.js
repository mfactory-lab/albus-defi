import{V as Q,t as T,v as d,w as $,aO as j,G as M,a3 as t,o as y,Y as E,Z as m,j as n,a1 as I,a2 as e,a5 as r,i as b,a4 as _,aP as N,a8 as h,ay as O,aE as R,$ as q,a0 as f,aQ as w,aD as U,aR as F}from"./index-c3609c28.js";import{c as G}from"./AppDescriptionTop-42265f8d.js";import{u as L}from"./swap-31a20ef2.js";const Y={class:"pool-card__subtitle row justify-center items-center"},W={class:"pool-card__icons row justify-center q-mt-xs"},Z=["src","alt"],z=["src","alt"],H={class:"q-mt-md row justify-center"},J={key:0,class:"row q-mt-md"},K={class:"col"},X={class:"row items-center"},tt={class:"pool-card__pubkey monoscaped"},et={class:"row items-center"},at={class:"pool-card__pubkey monoscaped"},ot={class:"row items-center"},st={class:"pool-card__pubkey monoscaped"},nt={class:"row items-center q-mt-xs"},lt={class:"pool-card__pubkey"},rt=Q({__name:"PoolsListItem",props:{pubkey:Object,data:Object,useEmit:Boolean},emits:["selectPool"],setup(a){const o=a,S=T(),B=d(()=>S.tokens),i=d(()=>B.value.find(l=>l.mint===o.data?.tokenAMint.toBase58())),c=d(()=>B.value.find(l=>l.mint===o.data?.tokenBMint.toBase58())),A=$(),P=d(()=>A.servicePolicy.find(l=>l.pubkey.toBase58()===o.data?.policy?.toBase58())),p=L(),C=j();async function g(l=!1){i.value&&c.value&&o.pubkey&&o.data&&(p.state.from=i.value,p.state.to=c.value,await C.push(l?"liquidity":"/swap"),p.setTokenSwap({pubkey:o.pubkey,data:o.data}),console.log("[swap] swapAction: ",o.pubkey.toBase58()))}const x=d(()=>o.data?p.getPoolFee(o.data):{}),D=d(()=>x.value.ownerTrade+x.value.trade),k=M(!1);return(l,s)=>{const V=G,v=F;return a.pubkey&&a.data&&t(i)&&t(c)?(y(),E(q,{key:0,class:"pool-card",onClick:s[4]||(s[4]=u=>a.useEmit?l.$emit("selectPool"):void 0)},{default:m(()=>[n(I,{class:"pool-card__body"},{default:m(()=>[e("div",Y,[e("span",null,r(t(i)?.symbol)+" / "+r(t(c)?.symbol),1),e("span",{class:"policy-info q-ml-md",onClick:s[0]||(s[0]=u=>k.value=!0)}," i ")]),e("div",W,[t(i)?.image?(y(),b("img",{key:0,src:t(i)?.image,alt:t(i)?.symbol},null,8,Z)):_("",!0),t(c)?.image?(y(),b("img",{key:1,src:t(c)?.image,alt:t(c)?.symbol},null,8,z)):_("",!0)]),e("div",H,[n(V,{"required-policy":a.data.policy?.toBase58(),"required-policy-data":t(P)?.data},null,8,["required-policy","required-policy-data"])]),a.useEmit?_("",!0):(y(),b("div",J,[e("div",K,[n(N,{spread:""},{default:m(()=>[n(h,{label:"ADD LIQUIDITY",color:"warning","text-color":"#282828",target:"_blank",onClick:s[1]||(s[1]=u=>g(!0))}),n(h,{label:"SWAP",color:"primary","text-color":"white",target:"_blank",onClick:s[2]||(s[2]=u=>g(!1))})]),_:1})])]))]),_:1}),n(O,{modelValue:t(k),"onUpdate:modelValue":s[3]||(s[3]=u=>R(k)?k.value=u:null),"transition-duration":"100","transition-show":"fade","transition-hide":"fade"},{default:m(()=>[n(q,{class:"q-pa-md"},{default:m(()=>[e("div",X,[f(" Pool address:  "),e("span",null,[e("span",tt,r(t(w)(a.pubkey.toBase58())),1),n(v,{text:a.pubkey.toBase58()},null,8,["text"])])]),e("div",et,[f(" Token A mint:  "),e("span",null,[e("span",at,r(t(w)(a.data.tokenAMint.toBase58())),1),n(v,{text:a.data.tokenAMint.toBase58()},null,8,["text"])])]),e("div",ot,[f(" Token B mint:  "),e("span",null,[e("span",st,r(t(w)(a.data.tokenBMint.toBase58())),1),n(v,{text:a.data.tokenBMint.toBase58()},null,8,["text"])])]),e("div",nt,[f(" Pool fee:  "),e("span",lt,r(t(U).format(t(D))),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):_("",!0)}}});export{rt as _};
