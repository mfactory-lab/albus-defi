import{L as Oe,al as Qe,am as je,q as N,U as ne,an as ze,P as Z,ao as Pe,a0 as H,a6 as fe,Y as Fe,a4 as Ve,a9 as F,ap as We,aq as he,ar as $e,ac as Ze,as as $,ai as Ke,at as ye,au as J,ae as pe,av as Je,aw as Ie,ax as De,ay as He,u as ve,t as Ye,a5 as Xe,v as ue,az as we,aA as Ge,aB as et,J as tt,aC as be,aD as nt,ad as at,aa as Se,m as qe,aE as _e,o as ee,aF as ce,w as O,j as P,x as Te,aG as ot,aH as oe,H as se,A as q,aI as Ue,i as me,B as le,y as ge,z as ae,aJ as Ae,Q as st,aK as ke,ah as lt,aL as ie,aM as te,aN as it,aO as rt,O as ut,aP as ct,aQ as dt,aR as ft,aS as Me,aT as vt,aU as xe,aV as mt,aW as gt,aX as kt,aY as ht,aZ as yt,a_ as pt,s as Ce,a$ as Ee,b0 as Re,b1 as wt,b2 as de,b3 as bt,C as St,b4 as _t,b5 as Tt}from"./index-9316c903.js";function en(e){const o=e.keyCode?e.keyCode:e.which;(o<48||o>57)&&o!==46&&e.preventDefault(),o===46&&String(e.target.value).includes(".")&&e.preventDefault()}const At=Oe({name:"QCardActions",props:{...Qe,vertical:Boolean},setup(e,{slots:o}){const r=je(e),f=N(()=>`q-card__actions ${r.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>ne("div",{class:f.value},ze(o.default))}}),Mt=new Z("EjCM3aozA6sFUzQQ7vXg2uTtjRydyuHSWRwvQX16pAS9");var xt=(e=>(e.TOKEN_A="TOKEN_A",e.TOKEN_B="TOKEN_B",e))(xt||{});const tn=Pe("swap",()=>{const e=H(),o=fe({loading:!1,slippageDialog:!1,status:void 0,poolBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},userBalance:{TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},poolTokenSupply:0,rate:0}),r=Fe(),f=Ve();F(f,async d=>{d?i().then():c()},{immediate:!0}),F(e,async d=>{d&&await R()});async function i(){o.loading=!0;try{e.value=await We.loadTokenSwap(r.connection,Mt),await u()}catch(d){console.log(d),e.value=void 0}finally{o.loading=!1}console.log("Token SWAP: ",e.value)}async function u(){if(!e.value)return;const d=await he(r.connection,e.value.authority);for(const b of d){const p=_(b.mint);p&&(o.poolBalance[p]=b.amount)}const T=await $e(r.connection,e.value.poolToken);o.poolTokenSupply=Number(T.supply),o.rate=C()}async function R(){if(!e.value)return;const d=f.value?.publicKey;if(!d){console.log("Wallet is not connected...");return}const T=await he(r.connection,d,[e.value.poolToken,e.value.mintA,e.value.mintB]),b={TOKEN_A:0,TOKEN_B:0};for(const p of T){const V=_(p.mint);V&&(b[V]=+p.amount)}o.userBalance=b,console.log("[Pool Balance]",o.poolBalance),console.log("[User Balance]",o.userBalance)}function C(){return Ze(g(Ke))}function _(d){if(e.value)switch(String(d)){case String(e.value.mintA):return"TOKEN_A";case String(e.value.mintB):return"TOKEN_B"}}function g(d){const T=new $(o.poolBalance.TOKEN_A),b=new $(d).div(T),p=new $(1),A=p.add(b).sqrt().sub(p);return new $(o.poolTokenSupply).mul(A).toNumber()}function h(d,T){const b=new $(o.poolBalance[T]??0),p=new $(d).div(b),V=new $(1),A=V.sub(p);if(A.isNeg())return 0;const U=V.sub(A.sqrt());return new $(o.poolTokenSupply).mul(U).toNumber()}async function y(d,T){const b=e.value?.mintA,p=e.value?.mintB;if(!b||!p)return;const V=b.toBase58()===d,A=await ye(r.connection,b.toBase58()),U=await ye(r.connection,p.toBase58()),j=10**(V?U:A),Q=10**(V?A:U),D=T*Q;return(V?o.userBalance.TOKEN_B/o.userBalance.TOKEN_A*D:o.userBalance.TOKEN_A/o.userBalance.TOKEN_B*D)/j}function c(){o.loading=!1,o.slippageDialog=!1,o.status=void 0,o.poolBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},o.userBalance={TOKEN_A:void 0,TOKEN_B:void 0,JPLU:void 0},o.poolTokenSupply=0,o.rate=0}return{state:o,tokenSwap:e,loadUserTokenAccounts:R,depositSingleTokenType:g,withdrawSingleTokenTypeExactOut:h,calculateDependentAmount:y}});var Ct=Object.defineProperty,Et=(e,o,r)=>o in e?Ct(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,Rt=(e,o,r)=>(Et(e,typeof o!="symbol"?o+"":o,r),r);const Bt=new J.BeetArgsStruct([["instructionDiscriminator",J.uniformFixedSizeArray(J.u8,8)],["amount",J.u64]],"SplTransferInstructionArgs"),Nt=[67,186,237,99,235,243,166,198];function Ot(e,o,r=new Z("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[f]=Bt.serialize({instructionDiscriminator:Nt,...o}),i=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.tokenMint,isWritable:!1,isSigner:!1},{pubkey:e.source,isWritable:!0,isSigner:!1},{pubkey:e.destination,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Je,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ie.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const u of e.anchorRemainingAccounts)i.push(u);return new De({programId:r,keys:i,data:f})}const Pt=new J.BeetArgsStruct([["instructionDiscriminator",J.uniformFixedSizeArray(J.u8,8)],["amount",J.u64]],"TransferInstructionArgs"),Ft=[163,52,200,231,140,3,69,186];function Vt(e,o,r=new Z("J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c")){const[f]=Pt.serialize({instructionDiscriminator:Ft,...o}),i=[{pubkey:e.sender,isWritable:!0,isSigner:!0},{pubkey:e.receiver,isWritable:!0,isSigner:!1},{pubkey:e.proofRequest,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Ie.programId,isWritable:!1,isSigner:!1}];if(e.anchorRemainingAccounts!=null)for(const u of e.anchorRemainingAccounts)i.push(u);return new De({programId:r,keys:i,data:f})}const Kt="J4pyN7p9dAovEQKoZJV1jUbM3FrCBPLCS2dyiRUnwi5c",It=new Z(Kt);class Dt{constructor(o){Rt(this,"programId",It),this.provider=o}get connection(){return this.provider.connection}async transfer(o,r){const f=Vt({proofRequest:o.proofRequest,sender:this.provider.publicKey,receiver:o.receiver},{amount:o.amount}),i=new pe().add(f);return this.provider.sendAndConfirm(i,[],r)}async transferToken(o,r){const f=Ot({proofRequest:o.proofRequest,sender:this.provider.publicKey,receiver:o.receiver,source:o.source,destination:o.destination,tokenMint:o.tokenMint},{amount:o.amount}),i=new pe().add(f);return this.provider.sendAndConfirm(i,[],r)}}const nn=Pe("transfer",()=>{const e=Fe(),{tokens:o}=He(),r=ve(),{state:f,getUserTokens:i}=ve(),u=N(()=>r.certificate),R=N(()=>r.certificateValid),C=0,_=Ve(),{publicKey:g}=Ye(),{notify:h}=Xe(),y=fe(o[0]),c=fe({address:"",value:void 0,loading:!1,token:y,fee:C,valid:!1});function d(){c.value=void 0,c.fee=C}F(()=>c.token,()=>{d(),r.policySpec=c.token.name}),F(()=>_.value?.publicKey,t=>{t||(d(),c.address="")}),F(()=>c.address,async()=>{c.valid=ue(c.address)});const T=N(()=>{const t=c.token.mint??"";return ue(t)?new Z(t):""}),b=N(()=>ue(c.address)?new Z(c.address):""),p=H();F([T,b],async()=>{if(T.value&&b.value&&c.valid)return p.value=await we(T.value,b.value);p.value=""}),F([()=>c.valid,()=>c.value,p],async([t,n])=>{t&&Number(n)>0?A():c.fee=C});async function V(){return c.token.label==="sol"?!0:p.value?!!nt(p.value):!1}async function A(){const t=await V(),n=await Ge(_.value?.publicKey,c.address,Number(c.value),e.connection),l=await et(n,e.connection)+tt;c.fee=t?l:l+.02}const U=N(()=>new Dt(new be(e.connection,_.value??{publicKey:Z.default},be.defaultOptions())));async function j(){try{if(c.loading=!0,console.log("[debug] on transfer certificate === ",u.value),R.value){let t;c.token.label==="sol"?t=await Q():t=await D(),h({type:"positive",message:"Transaction confirmed",actions:[{label:"Explore",color:"white",target:"_blank",href:`https://explorer.solana.com/tx/${t}?cluster=${e.cluster}`,onClick:()=>!1}]}),d(),await i()}else at()}catch(t){console.error("verifyTransfer error: ",t),h({type:"negative",message:`${t}`})}finally{c.loading=!1}}async function Q(){const t=new Se(Number(c.value)*Ke),n=new Z(c.address);return await U.value.transfer({amount:t,receiver:n,proofRequest:u.value.pubkey})}async function D(){if(!g.value||!c.token.mint)return;const t=f.tokens.find(s=>s.mint===c.token.mint);if(!t||!T.value||!b.value)return;const n=await we(T.value,g.value),l=new Se(Number(c.value)*10**t.decimals);return await U.value.transferToken({destination:p.value,source:n,tokenMint:T.value,amount:l,receiver:b.value,proofRequest:u.value.pubkey})}function I(t){c.value=t}function X(t){c.token=t}return{state:c,setMax:I,setToken:X,verifyTransfer:j}}),qt=ae("div",{class:"text-h6"}," Info ",-1),Ut={key:0},Lt={key:1},Qt=["href"],jt=["href"],an=qe({__name:"ZkpRequestDialog",setup(e){const o=ve(),r=H(!1),f=N(()=>_e.Empty===o.certificate?.data.status),i=N(()=>_e.Pending===o.certificate?.data.status);return(u,R)=>(ee(),ce(lt,{modelValue:q(r),"onUpdate:modelValue":R[0]||(R[0]=C=>ke(r)?r.value=C:null)},{default:O(()=>[P(st,{class:"zkp-dialog"},{default:O(()=>[P(Te,{class:"row items-center q-pb-none zkp-dialog__header"},{default:O(()=>[qt,P(ot),oe(P(se,{icon:q(Ue),flat:"",round:"",dense:""},null,8,["icon"]),[[ie]])]),_:1}),P(Te,{class:"q-pt-none zkp-dialog__body"},{default:O(()=>[q(f)?(ee(),me("div",Ut," To continue, you need to create a ZKP request ")):le("",!0),q(i)?(ee(),me("div",Lt,[ge(' To continue, you need to "prove" the request. Follow this link. '),ae("a",{class:"prove-link",href:q(Ae),target:"_blank"},"__Albus account__",8,Qt)])):le("",!0)]),_:1}),P(At,{align:"right",class:"zkp-dialog__actions"},{default:O(()=>[oe(P(se,{flat:"",label:"Cancel",class:"zkp-dialog__actions--cancel"},null,512),[[ie]]),q(f)?oe((ee(),ce(se,{key:0,outline:"",label:"Create",color:"yellow"},null,512)),[[ie]]):le("",!0),q(i)?oe((ee(),ce(se,{key:1,color:"yellow",outline:""},{default:O(()=>[ae("a",{href:q(Ae),target:"_blank"},"prove",8,jt)]),_:1})),[[ie]]):le("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const Be={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},re={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Le=Object.keys(re);Le.forEach(e=>{re[e].regex=new RegExp(re[e].pattern)});const zt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Le.join("")+"])|(.)","g"),Ne=/[.*+?^${}()|[\]\\]/g,E=String.fromCharCode(1),Wt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function $t(e,o,r,f){let i,u,R,C,_,g;const h=H(null),y=H(d());function c(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}F(()=>e.type+e.autogrow,b),F(()=>e.mask,t=>{if(t!==void 0)p(y.value,!0);else{const n=I(y.value);b(),e.modelValue!==n&&o("update:modelValue",n)}}),F(()=>e.fillMask+e.reverseFillMask,()=>{h.value===!0&&p(y.value,!0)}),F(()=>e.unmaskedValue,()=>{h.value===!0&&p(y.value)});function d(){if(b(),h.value===!0){const t=Q(I(e.modelValue));return e.fillMask!==!1?X(t):t}return e.modelValue}function T(t){if(t<i.length)return i.slice(-t);let n="",l=i;const s=l.indexOf(E);if(s>-1){for(let m=t-l.length;m>0;m--)n+=E;l=l.slice(0,s)+n+l.slice(s)}return l}function b(){if(h.value=e.mask!==void 0&&e.mask.length!==0&&c(),h.value===!1){C=void 0,i="",u="";return}const t=Be[e.mask]===void 0?e.mask:Be[e.mask],n=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",l=n.replace(Ne,"\\$&"),s=[],m=[],v=[];let x=e.reverseFillMask===!0,k="",w="";t.replace(zt,(B,a,M,z,L)=>{if(z!==void 0){const K=re[z];v.push(K),w=K.negate,x===!0&&(m.push("(?:"+w+"+)?("+K.pattern+"+)?(?:"+w+"+)?("+K.pattern+"+)?"),x=!1),m.push("(?:"+w+"+)?("+K.pattern+")?")}else if(M!==void 0)k="\\"+(M==="\\"?"":M),v.push(M),s.push("([^"+k+"]+)?"+k+"?");else{const K=a!==void 0?a:L;k=K==="\\"?"\\\\\\\\":K.replace(Ne,"\\\\$&"),v.push(K),s.push("([^"+k+"]+)?"+k+"?")}});const Y=new RegExp("^"+s.join("")+"("+(k===""?".":"[^"+k+"]")+"+)?"+(k===""?"":"["+k+"]*")+"$"),W=m.length-1,S=m.map((B,a)=>a===0&&e.reverseFillMask===!0?new RegExp("^"+l+"*"+B):a===W?new RegExp("^"+B+"("+(w===""?".":w)+"+)?"+(e.reverseFillMask===!0?"$":l+"*")):new RegExp("^"+B));R=v,C=B=>{const a=Y.exec(e.reverseFillMask===!0?B:B.slice(0,v.length+1));a!==null&&(B=a.slice(1).join(""));const M=[],z=S.length;for(let L=0,K=B;L<z;L++){const G=S[L].exec(K);if(G===null)break;K=K.slice(G.shift().length),M.push(...G)}return M.length!==0?M.join(""):B},i=v.map(B=>typeof B=="string"?B:E).join(""),u=i.split(E).join(n)}function p(t,n,l){const s=f.value,m=s.selectionEnd,v=s.value.length-m,x=I(t);n===!0&&b();const k=Q(x),w=e.fillMask!==!1?X(k):k,Y=y.value!==w;s.value!==w&&(s.value=w),Y===!0&&(y.value=w),document.activeElement===s&&te(()=>{if(w===u){const S=e.reverseFillMask===!0?u.length:0;s.setSelectionRange(S,S,"forward");return}if(l==="insertFromPaste"&&e.reverseFillMask!==!0){const S=s.selectionEnd;let B=m-1;for(let a=_;a<=B&&a<S;a++)i[a]!==E&&B++;A.right(s,B);return}if(["deleteContentBackward","deleteContentForward"].indexOf(l)>-1){const S=e.reverseFillMask===!0?m===0?w.length>k.length?1:0:Math.max(0,w.length-(w===u?0:Math.min(k.length,v)+1))+1:m;s.setSelectionRange(S,S,"forward");return}if(e.reverseFillMask===!0)if(Y===!0){const S=Math.max(0,w.length-(w===u?0:Math.min(k.length,v+1)));S===1&&m===1?s.setSelectionRange(S,S,"forward"):A.rightReverse(s,S)}else{const S=w.length-v;s.setSelectionRange(S,S,"backward")}else if(Y===!0){const S=Math.max(0,i.indexOf(E),Math.min(k.length,m)-1);A.right(s,S)}else{const S=m-1;A.right(s,S)}});const W=e.unmaskedValue===!0?I(w):w;String(e.modelValue)!==W&&(e.modelValue!==null||W!=="")&&r(W,!0)}function V(t,n,l){const s=Q(I(t.value));n=Math.max(0,i.indexOf(E),Math.min(s.length,n)),_=n,t.setSelectionRange(n,l,"forward")}const A={left(t,n){const l=i.slice(n-1).indexOf(E)===-1;let s=Math.max(0,n-1);for(;s>=0;s--)if(i[s]===E){n=s,l===!0&&n++;break}if(s<0&&i[n]!==void 0&&i[n]!==E)return A.right(t,0);n>=0&&t.setSelectionRange(n,n,"backward")},right(t,n){const l=t.value.length;let s=Math.min(l,n+1);for(;s<=l;s++)if(i[s]===E){n=s;break}else i[s-1]===E&&(n=s);if(s>l&&i[n-1]!==void 0&&i[n-1]!==E)return A.left(t,l);t.setSelectionRange(n,n,"forward")},leftReverse(t,n){const l=T(t.value.length);let s=Math.max(0,n-1);for(;s>=0;s--)if(l[s-1]===E){n=s;break}else if(l[s]===E&&(n=s,s===0))break;if(s<0&&l[n]!==void 0&&l[n]!==E)return A.rightReverse(t,0);n>=0&&t.setSelectionRange(n,n,"backward")},rightReverse(t,n){const l=t.value.length,s=T(l),m=s.slice(0,n+1).indexOf(E)===-1;let v=Math.min(l,n+1);for(;v<=l;v++)if(s[v-1]===E){n=v,n>0&&m===!0&&n--;break}if(v>l&&s[n-1]!==void 0&&s[n-1]!==E)return A.leftReverse(t,l);t.setSelectionRange(n,n,"forward")}};function U(t){o("click",t),g=void 0}function j(t){if(o("keydown",t),it(t)===!0||t.altKey===!0)return;const n=f.value,l=n.selectionStart,s=n.selectionEnd;if(t.shiftKey||(g=void 0),t.keyCode===37||t.keyCode===39){t.shiftKey&&g===void 0&&(g=n.selectionDirection==="forward"?l:s);const m=A[(t.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(t.preventDefault(),m(n,g===l?s:l),t.shiftKey){const v=n.selectionStart;n.setSelectionRange(Math.min(g,v),Math.max(g,v),"forward")}}else t.keyCode===8&&e.reverseFillMask!==!0&&l===s?(A.left(n,l),n.setSelectionRange(n.selectionStart,s,"backward")):t.keyCode===46&&e.reverseFillMask===!0&&l===s&&(A.rightReverse(n,s),n.setSelectionRange(l,n.selectionEnd,"forward"))}function Q(t){if(t==null||t==="")return"";if(e.reverseFillMask===!0)return D(t);const n=R;let l=0,s="";for(let m=0;m<n.length;m++){const v=t[l],x=n[m];if(typeof x=="string")s+=x,v===x&&l++;else if(v!==void 0&&x.regex.test(v))s+=x.transform!==void 0?x.transform(v):v,l++;else return s}return s}function D(t){const n=R,l=i.indexOf(E);let s=t.length-1,m="";for(let v=n.length-1;v>=0&&s>-1;v--){const x=n[v];let k=t[s];if(typeof x=="string")m=x+m,k===x&&s--;else if(k!==void 0&&x.regex.test(k))do m=(x.transform!==void 0?x.transform(k):k)+m,s--,k=t[s];while(l===v&&k!==void 0&&x.regex.test(k));else return m}return m}function I(t){return typeof t!="string"||C===void 0?typeof t=="number"?C(""+t):t:C(t)}function X(t){return u.length-t.length<=0?t:e.reverseFillMask===!0&&t.length!==0?u.slice(0,-t.length)+t:t+u.slice(t.length)}return{innerValue:y,hasMask:h,moveCursorForPaste:V,updateMaskValue:p,onMaskedKeydown:j,onMaskedClick:U}}function Zt(e,o){function r(){const f=e.modelValue;try{const i="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(f)===f&&("length"in f?Array.from(f):[f]).forEach(u=>{i.items.add(u)}),{files:i.files}}catch{return{files:void 0}}}return o===!0?N(()=>{if(e.type==="file")return r()}):N(r)}const Jt=Oe({name:"QInput",inheritAttrs:!1,props:{...rt,...Wt,...ut,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ct,"paste","change","keydown","click","animationend"],setup(e,{emit:o,attrs:r}){const{proxy:f}=dt(),{$q:i}=f,u={};let R=NaN,C,_,g=null,h;const y=H(null),c=ft(e),{innerValue:d,hasMask:T,moveCursorForPaste:b,updateMaskValue:p,onMaskedKeydown:V,onMaskedClick:A}=$t(e,o,k,y),U=Zt(e,!0),j=N(()=>Me(d.value)),Q=yt(v),D=vt(),I=N(()=>e.type==="textarea"||e.autogrow===!0),X=N(()=>I.value===!0||["text","search","url","tel","password"].includes(e.type)),t=N(()=>{const a={...D.splitAttrs.listeners.value,onInput:v,onPaste:m,onChange:Y,onBlur:W,onFocus:xe};return a.onCompositionstart=a.onCompositionupdate=a.onCompositionend=Q,T.value===!0&&(a.onKeydown=V,a.onClick=A),e.autogrow===!0&&(a.onAnimationend=x),a}),n=N(()=>{const a={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:c.value,...D.splitAttrs.attributes.value,id:D.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return I.value===!1&&(a.type=e.type),e.autogrow===!0&&(a.rows=1),a});F(()=>e.type,()=>{y.value&&(y.value.value=e.modelValue)}),F(()=>e.modelValue,a=>{if(T.value===!0){if(_===!0&&(_=!1,String(a)===R))return;p(a)}else d.value!==a&&(d.value=a,e.type==="number"&&u.hasOwnProperty("value")===!0&&(C===!0?C=!1:delete u.value));e.autogrow===!0&&te(w)}),F(()=>e.autogrow,a=>{a===!0?te(w):y.value!==null&&r.rows>0&&(y.value.style.height="auto")}),F(()=>e.dense,()=>{e.autogrow===!0&&te(w)});function l(){pt(()=>{const a=document.activeElement;y.value!==null&&y.value!==a&&(a===null||a.id!==D.targetUid.value)&&y.value.focus({preventScroll:!0})})}function s(){y.value!==null&&y.value.select()}function m(a){if(T.value===!0&&e.reverseFillMask!==!0){const M=a.target;b(M,M.selectionStart,M.selectionEnd)}o("paste",a)}function v(a){if(!a||!a.target)return;if(e.type==="file"){o("update:modelValue",a.target.files);return}const M=a.target.value;if(a.target.qComposing===!0){u.value=M;return}if(T.value===!0)p(M,!1,a.inputType);else if(k(M),X.value===!0&&a.target===document.activeElement){const{selectionStart:z,selectionEnd:L}=a.target;z!==void 0&&L!==void 0&&te(()=>{a.target===document.activeElement&&M.indexOf(a.target.value)===0&&a.target.setSelectionRange(z,L)})}e.autogrow===!0&&w()}function x(a){o("animationend",a),w()}function k(a,M){h=()=>{g=null,e.type!=="number"&&u.hasOwnProperty("value")===!0&&delete u.value,e.modelValue!==a&&R!==a&&(R=a,M===!0&&(_=!0),o("update:modelValue",a),te(()=>{R===a&&(R=NaN)})),h=void 0},e.type==="number"&&(C=!0,u.value=a),e.debounce!==void 0?(g!==null&&clearTimeout(g),u.value=a,g=setTimeout(h,e.debounce)):h()}function w(){requestAnimationFrame(()=>{const a=y.value;if(a!==null){const M=a.parentNode.style,{scrollTop:z}=a,{overflowY:L,maxHeight:K}=i.platform.is.firefox===!0?{}:window.getComputedStyle(a),G=L!==void 0&&L!=="scroll";G===!0&&(a.style.overflowY="hidden"),M.marginBottom=a.scrollHeight-1+"px",a.style.height="1px",a.style.height=a.scrollHeight+"px",G===!0&&(a.style.overflowY=parseInt(K,10)<a.scrollHeight?"auto":"hidden"),M.marginBottom="",a.scrollTop=z}})}function Y(a){Q(a),g!==null&&(clearTimeout(g),g=null),h!==void 0&&h(),o("change",a.target.value)}function W(a){a!==void 0&&xe(a),g!==null&&(clearTimeout(g),g=null),h!==void 0&&h(),C=!1,_=!1,delete u.value,e.type!=="file"&&setTimeout(()=>{y.value!==null&&(y.value.value=d.value!==void 0?d.value:"")})}function S(){return u.hasOwnProperty("value")===!0?u.value:d.value!==void 0?d.value:""}mt(()=>{W()}),gt(()=>{e.autogrow===!0&&w()}),Object.assign(D,{innerValue:d,fieldClass:N(()=>`q-${I.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:N(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:y,emitValue:k,hasValue:j,floatingLabel:N(()=>j.value===!0&&(e.type!=="number"||isNaN(d.value)===!1)||Me(e.displayValue)),getControl:()=>ne(I.value===!0?"textarea":"input",{ref:y,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...n.value,...t.value,...e.type!=="file"?{value:S()}:U.value}),getShadowControl:()=>ne("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(I.value===!0?"":" text-no-wrap")},[ne("span",{class:"invisible"},S()),ne("span",e.shadowText)])});const B=kt(D);return Object.assign(f,{focus:l,select:s,getNativeElement:()=>y.value}),ht(f,"nativeEl",()=>y.value),B}}),Ht={class:"token-select"},Yt=["src"],Xt=["src"],on=qe({__name:"SelectToken",props:{options:Object,searchToken:String,direction:{type:Boolean,default:!1},token:Object,swapToken:String,disable:{type:Boolean,default:!1}},emits:["handleSearchToken","setToken"],setup(e,{emit:o}){const r=e,f=o,i=H(r.searchToken),u=H(r.token??r.options[0]);F(()=>r.token,_=>{u.value=_});function R(){i.value=""}const C=N(()=>r.options.map(_=>({..._,inactive:Ce(String(_.value))===Ce(r.swapToken)})));return F(i,_=>{f("handleSearchToken",_)}),F(u,_=>{f("setToken",_,r.direction)}),(_,g)=>(ee(),me("div",Ht,[P(Tt,{modelValue:q(u),"onUpdate:modelValue":g[2]||(g[2]=h=>ke(u)?u.value=h:null),"option-disable":"inactive","popup-content-class":"transition-duration",outlined:"",options:q(C),dense:"","options-dense":!1,disable:e.disable,onPopupHide:R},{prepend:O(()=>[P(Ee,null,{default:O(()=>[ae("img",{src:q(u).image},null,8,Yt)]),_:1})]),option:O(h=>[P(Re,wt(h.itemProps,{class:"token-select__token"}),{default:O(()=>[P(de,{avatar:"",class:"token-select__token--item"},{default:O(()=>[P(Ee,null,{default:O(()=>[ae("img",{src:h.opt.image},null,8,Xt)]),_:2},1024)]),_:2},1024),P(de,null,{default:O(()=>[P(bt,null,{default:O(()=>[ge(St(h.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":O(()=>[P(Jt,{modelValue:q(i),"onUpdate:modelValue":g[1]||(g[1]=h=>ke(i)?i.value=h:null),maxlength:8,outlined:"",class:"token-search"},{append:O(()=>[P(_t,{name:q(Ue),class:"cursor-pointer token-search__close",onClick:g[0]||(g[0]=h=>i.value="")},null,8,["name"])]),_:1},8,["modelValue"]),P(Re,null,{default:O(()=>[P(de,{class:"text-grey"},{default:O(()=>[ge(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","disable"])]))}});export{xt as P,Jt as Q,an as _,on as a,tn as b,en as o,nn as u};
